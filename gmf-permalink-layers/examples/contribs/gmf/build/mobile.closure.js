(function(){'use strict';var m,t=this;function ba(b){return void 0!==b}function ca(){}
function da(b){var c=typeof b;if("object"==c)if(b){if(b instanceof Array)return"array";if(b instanceof Object)return c;var d=Object.prototype.toString.call(b);if("[object Window]"==d)return"object";if("[object Array]"==d||"number"==typeof b.length&&"undefined"!=typeof b.splice&&"undefined"!=typeof b.propertyIsEnumerable&&!b.propertyIsEnumerable("splice"))return"array";if("[object Function]"==d||"undefined"!=typeof b.call&&"undefined"!=typeof b.propertyIsEnumerable&&!b.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==c&&"undefined"==typeof b.call)return"object";return c}function ea(b){return"array"==da(b)}function fa(b){var c=da(b);return"array"==c||"object"==c&&"number"==typeof b.length}function ga(b){return"string"==typeof b}function ha(b){return"number"==typeof b}function ia(b){return"function"==da(b)}function ka(b){var c=typeof b;return"object"==c&&null!=b||"function"==c}function w(b){return b[la]||(b[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;
function na(b,c,d){return b.call.apply(b.bind,arguments)}function oa(b,c,d){if(!b)throw Error();if(2<arguments.length){var e=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(d,e);return b.apply(c,d)}}return function(){return b.apply(c,arguments)}}function pa(b,c,d){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return pa.apply(null,arguments)}
function qa(b,c){var d=Array.prototype.slice.call(arguments,1);return function(){var c=d.slice();c.push.apply(c,arguments);return b.apply(this,c)}}var ra=Date.now||function(){return+new Date};function sa(b,c){var d=b.split("."),e=t;d[0]in e||!e.execScript||e.execScript("var "+d[0]);for(var f;d.length&&(f=d.shift());)!d.length&&ba(c)?e[f]=c:e[f]?e=e[f]:e=e[f]={}}
function y(b,c){function d(){}d.prototype=c.prototype;b.U=c.prototype;b.prototype=new d;b.prototype.constructor=b;b.lk=function(b,d,g){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return c.prototype[d].apply(b,h)}};var z=angular.module("ngeo",[]);var B=angular.module("gmf",[z.name,"gettext","ngAnimate","ngTouch"]);var ta=angular.module("app",[B.name]);var ua;var va=String.prototype.trim?function(b){return b.trim()}:function(b){return b.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};function wa(b){if(!xa.test(b))return b;-1!=b.indexOf("&")&&(b=b.replace(ya,"&amp;"));-1!=b.indexOf("<")&&(b=b.replace(za,"&lt;"));-1!=b.indexOf(">")&&(b=b.replace(Ba,"&gt;"));-1!=b.indexOf('"')&&(b=b.replace(Ca,"&quot;"));-1!=b.indexOf("'")&&(b=b.replace(Da,"&#39;"));-1!=b.indexOf("\x00")&&(b=b.replace(Ea,"&#0;"));return b}
var ya=/&/g,za=/</g,Ba=/>/g,Ca=/"/g,Da=/'/g,Ea=/\x00/g,xa=/[\x00&<>"']/,Fa=String.prototype.repeat?function(b,c){return b.repeat(c)}:function(b,c){return Array(c+1).join(b)};function Ga(b,c,d){b=ba(d)?b.toFixed(d):String(b);d=b.indexOf(".");-1==d&&(d=b.length);return Fa("0",Math.max(0,c-d))+b}function Ha(b){return Array.prototype.join.call(arguments,"")}
function Ia(b,c){for(var d=0,e=va(String(b)).split("."),f=va(String(c)).split("."),g=Math.max(e.length,f.length),h=0;0==d&&h<g;h++){var k=e[h]||"",l=f[h]||"",n=/(\d*)(\D*)/g,q=/(\d*)(\D*)/g;do{var p=n.exec(k)||["","",""],r=q.exec(l)||["","",""];if(0==p[0].length&&0==r[0].length)break;d=Ja(0==p[1].length?0:parseInt(p[1],10),0==r[1].length?0:parseInt(r[1],10))||Ja(0==p[2].length,0==r[2].length)||Ja(p[2],r[2])}while(0==d)}return d}function Ja(b,c){return b<c?-1:b>c?1:0};function Ka(b,c,d){Array.prototype.forEach.call(b,c,d)}function La(b,c){return Array.prototype.filter.call(b,c,void 0)}function Ma(b,c){var d;a:{d=b.length;for(var e=ga(b)?b.split(""):b,f=0;f<d;f++)if(f in e&&c.call(void 0,e[f],f,b)){d=f;break a}d=-1}return 0>d?null:ga(b)?b.charAt(d):b[d]}function Na(b,c){return 0<=Array.prototype.indexOf.call(b,c,void 0)}function Oa(b,c){var d=Array.prototype.indexOf.call(b,c,void 0),e;(e=0<=d)&&Array.prototype.splice.call(b,d,1);return e}
function Pa(b){return Array.prototype.concat.apply(Array.prototype,arguments)}function Qa(b){var c=b.length;if(0<c){for(var d=Array(c),e=0;e<c;e++)d[e]=b[e];return d}return[]}function Ra(b,c,d){return 2>=arguments.length?Array.prototype.slice.call(b,c):Array.prototype.slice.call(b,c,d)};function Sa(b,c){this.type=b;this.target=c}Sa.prototype.preventDefault=Sa.prototype.stopPropagation=function(){this.Zi=!0};function Ta(b){b.stopPropagation()};var Ua="function"===typeof Object.assign?Object.assign:function(b,c){if(void 0===b||null===b)throw new TypeError("Cannot convert undefined or null to object");for(var d=Object(b),e=1,f=arguments.length;e<f;++e){var g=arguments[e];if(void 0!==g&&null!==g)for(var h in g)g.hasOwnProperty(h)&&(d[h]=g[h])}return d};function Va(b){for(var c in b)delete b[c]}function Wa(b){for(var c in b)return!1;return!c};var Xa="olm_"+(1E4*Math.random()|0);function Ya(b){function c(c){var e=b.listener,f=b.Me||b.target;b.hb&&G(b);return e.call(f,c)}return b.Ne=c}function Za(b,c,d,e){for(var f,g=0,h=b.length;g<h;++g)if(f=b[g],f.listener===c&&f.Me===d)return e&&(f.deleteIndex=g),f}function $a(b,c){var d=b[Xa];return d?d[c]:void 0}function ab(b){var c=b[Xa];c||(c=b[Xa]={});return c}
function bb(b,c){var d=$a(b,c);if(d){for(var e=0,f=d.length;e<f;++e)b.removeEventListener(c,d[e].Ne),Va(d[e]);d.length=0;if(d=b[Xa])delete d[c],0===Object.keys(d).length&&delete b[Xa]}}function I(b,c,d,e,f){var g=ab(b),h=g[c];h||(h=g[c]=[]);(g=Za(h,d,e,!1))?f||(g.hb=!1):(g={Me:e,hb:!!f,listener:d,target:b,type:c},b.addEventListener(c,Ya(g)),h.push(g));return g}function cb(b,c,d,e){(b=$a(b,c))&&(d=Za(b,d,e,!0))&&G(d)}
function G(b){if(b&&b.target){b.target.removeEventListener(b.type,b.Ne);var c=$a(b.target,b.type);if(c){var d="deleteIndex"in b?b.deleteIndex:c.indexOf(b);-1!==d&&c.splice(d,1);0===c.length&&bb(b.target,b.type)}Va(b)}};function db(){0!=eb&&(fb[w(this)]=this);this.W=this.W;this.V=this.V}var eb=0,fb={};db.prototype.W=!1;db.prototype.Db=function(){if(!this.W&&(this.W=!0,this.L(),0!=eb)){var b=w(this);delete fb[b]}};function gb(b,c){b.W?c.call(void 0):(b.V||(b.V=[]),b.V.push(ba(void 0)?pa(c,void 0):c))}db.prototype.L=function(){if(this.V)for(;this.V.length;)this.V.shift()()};function hb(b){b&&"function"==typeof b.Db&&b.Db()};function ib(){db.call(this);this.M={}}y(ib,db);ib.prototype.addEventListener=function(b,c){var d=this.M[b];d||(d=this.M[b]=[]);-1===d.indexOf(c)&&d.unshift(c)};ib.prototype.B=function(b){b="string"===typeof b?new Sa(b):b;var c=b.type;b.target=this;if(c=this.M[c])for(var d=c.length-1;0<=d;--d)if(!1===c[d].call(this,b)||b.Zi)return!1};ib.prototype.L=function(){var b=ab(this),c;for(c in b)bb(this,c);ib.U.L.call(this)};function jb(b,c){return c?c in b.M:0<Object.keys(b.M).length}
ib.prototype.removeEventListener=function(b,c){var d=this.M[b];d&&(d.splice(d.indexOf(c),1),0===d.length&&delete this.M[b])};function kb(){ib.call(this);this.f=0}y(kb,ib);kb.prototype.b=function(){++this.f;this.B("change")};kb.prototype.on=function(b,c,d){if(Array.isArray(b)){for(var e=b.length,f=Array(e),g=0;g<e;++g)f[g]=I(this,b[g],c,d);return f}return I(this,b,c,d)};function lb(b,c,d){Sa.call(this,b);this.key=c;this.oldValue=d}y(lb,Sa);function mb(b){kb.call(this);w(this);this.u={};void 0!==b&&this.ka(b)}y(mb,kb);var nb={};function L(b){return nb.hasOwnProperty(b)?nb[b]:nb[b]="change:"+b}mb.prototype.get=function(b){var c;this.u.hasOwnProperty(b)&&(c=this.u[b]);return c};mb.prototype.ya=function(){return Object.keys(this.u)};
mb.prototype.set=function(b,c,d){d?this.u[b]=c:(d=this.u[b],this.u[b]=c,d!==c&&(c=L(b),this.B(new lb(c,b,d)),this.B(new lb("propertychange",b,d))))};mb.prototype.ka=function(b,c){for(var d in b)this.set(d,b[d],c)};function ob(b,c,d){Sa.call(this,b,d);this.element=c}y(ob,Sa);function pb(b){mb.call(this);this.a=b?b:[];qb(this)}y(pb,mb);m=pb.prototype;m.clear=function(){for(;0<this.get("length");)this.pop()};m.extend=function(b){var c,d;c=0;for(d=b.length;c<d;++c)this.push(b[c]);return this};m.forEach=function(b,c){this.a.forEach(b,c)};function rb(b){return b.a}m.item=function(b){return this.a[b]};function sb(b,c,d){b.a.splice(c,0,d);qb(b);b.B(new ob("add",d,b))}
m.pop=function(){return tb(this,this.get("length")-1)};m.push=function(b){var c=this.a.length;sb(this,c,b);return c};m.remove=function(b){var c=this.a,d,e;d=0;for(e=c.length;d<e;++d)if(c[d]===b)return tb(this,d)};function tb(b,c){var d=b.a[c];b.a.splice(c,1);qb(b);b.B(new ob("remove",d,b));return d}function qb(b){b.set("length",b.a.length)};function ub(b){this.length=b.length||b;for(var c=0;c<this.length;c++)this[c]=b[c]||0}ub.prototype.a=4;ub.prototype.set=function(b,c){c=c||0;for(var d=0;d<b.length&&c+d<this.length;d++)this[c+d]=b[d]};ub.prototype.toString=Array.prototype.join;"undefined"==typeof Float32Array&&(ub.BYTES_PER_ELEMENT=4,ub.prototype.BYTES_PER_ELEMENT=ub.prototype.a,ub.prototype.set=ub.prototype.set,ub.prototype.toString=ub.prototype.toString,sa("Float32Array",ub));function vb(b){this.length=b.length||b;for(var c=0;c<this.length;c++)this[c]=b[c]||0}vb.prototype.a=8;vb.prototype.set=function(b,c){c=c||0;for(var d=0;d<b.length&&c+d<this.length;d++)this[c+d]=b[d]};vb.prototype.toString=Array.prototype.join;if("undefined"==typeof Float64Array){try{vb.BYTES_PER_ELEMENT=8}catch(b){}vb.prototype.BYTES_PER_ELEMENT=vb.prototype.a;vb.prototype.set=vb.prototype.set;vb.prototype.toString=vb.prototype.toString;sa("Float64Array",vb)};function wb(){var b=Array(16);b[0]=0;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=0;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=0;return b}
function xb(b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],k=b[5],l=b[6],n=b[7],q=b[8],p=b[9],r=b[10],u=b[11],v=b[12],A=b[13],x=b[14],C=b[15],H=d*k-e*h,E=d*l-f*h,D=d*n-g*h,R=e*l-f*k,F=e*n-g*k,N=f*n-g*l,T=q*A-p*v,K=q*x-r*v,Z=q*C-u*v,X=p*x-r*A,W=p*C-u*A,J=r*C-u*x,aa=H*J-E*W+D*X+R*Z-F*K+N*T;0!=aa&&(aa=1/aa,c[0]=(k*J-l*W+n*X)*aa,c[1]=(-e*J+f*W-g*X)*aa,c[2]=(A*N-x*F+C*R)*aa,c[3]=(-p*N+r*F-u*R)*aa,c[4]=(-h*J+l*Z-n*K)*aa,c[5]=(d*J-f*Z+g*K)*aa,c[6]=(-v*N+x*D-C*E)*aa,c[7]=(q*N-r*D+u*E)*aa,c[8]=(h*W-k*Z+n*T)*
aa,c[9]=(-d*W+e*Z-g*T)*aa,c[10]=(v*F-A*D+C*H)*aa,c[11]=(-q*F+p*D-u*H)*aa,c[12]=(-h*X+k*K-l*T)*aa,c[13]=(d*X-e*K+f*T)*aa,c[14]=(-v*R+A*E-x*H)*aa,c[15]=(q*R-p*E+r*H)*aa)}function yb(b,c,d){var e=b[1]*c+b[5]*d+0*b[9]+b[13],f=b[2]*c+b[6]*d+0*b[10]+b[14],g=b[3]*c+b[7]*d+0*b[11]+b[15];b[12]=b[0]*c+b[4]*d+0*b[8]+b[12];b[13]=e;b[14]=f;b[15]=g}new Float64Array(3);new Float64Array(3);new Float64Array(4);new Float64Array(4);new Float64Array(4);new Float64Array(16);function zb(b,c){var d=b%c;return 0>d*c?d+c:d};function Ab(b,c){b[0]+=c[0];b[1]+=c[1]}function Bb(b,c){var d=Math.cos(c),e=Math.sin(c),f=b[1]*d+b[0]*e;b[0]=b[0]*d-b[1]*e;b[1]=f};function Db(b,c){if(ea(b))return b;void 0===c?c=[b,b]:(c[0]=b,c[1]=b);return c};function Eb(b){for(var c=Fb(),d=0,e=b.length;d<e;++d)Gb(c,b[d]);return c}function Hb(b,c,d){return d?(d[0]=b[0]-c,d[1]=b[1]-c,d[2]=b[2]+c,d[3]=b[3]+c,d):[b[0]-c,b[1]-c,b[2]+c,b[3]+c]}function Ib(b,c){return c?(c[0]=b[0],c[1]=b[1],c[2]=b[2],c[3]=b[3],c):b.slice()}function Jb(b,c){return b[0]<=c[0]&&c[2]<=b[2]&&b[1]<=c[1]&&c[3]<=b[3]}function Fb(){return[Infinity,Infinity,-Infinity,-Infinity]}function Kb(b,c,d,e,f){return f?(f[0]=b,f[1]=c,f[2]=d,f[3]=e,f):[b,c,d,e]}
function Lb(b,c){return b[0]==c[0]&&b[2]==c[2]&&b[1]==c[1]&&b[3]==c[3]}function Mb(b,c){c[0]<b[0]&&(b[0]=c[0]);c[2]>b[2]&&(b[2]=c[2]);c[1]<b[1]&&(b[1]=c[1]);c[3]>b[3]&&(b[3]=c[3])}function Gb(b,c){c[0]<b[0]&&(b[0]=c[0]);c[0]>b[2]&&(b[2]=c[0]);c[1]<b[1]&&(b[1]=c[1]);c[1]>b[3]&&(b[3]=c[1])}function Nb(b,c,d,e,f){for(;d<e;d+=f){var g=b,h=c[d],k=c[d+1];g[0]=Math.min(g[0],h);g[1]=Math.min(g[1],k);g[2]=Math.max(g[2],h);g[3]=Math.max(g[3],k)}return b}
function Ob(b){var c=0;Pb(b)||(c=Qb(b)*Rb(b));return c}function Sb(b){return[(b[0]+b[2])/2,(b[1]+b[3])/2]}function Tb(b,c,d,e,f){var g=c*e[0]/2;e=c*e[1]/2;c=Math.cos(d);var h=Math.sin(d);d=g*c;g*=h;c*=e;var k=e*h,l=b[0],n=b[1];b=l-d+k;e=l-d-k;h=l+d-k;d=l+d+k;var k=n-g-c,l=n-g+c,q=n+g+c,g=n+g-c;return Kb(Math.min(b,e,h,d),Math.min(k,l,q,g),Math.max(b,e,h,d),Math.max(k,l,q,g),f)}function Rb(b){return b[3]-b[1]}
function Ub(b,c){var d=Fb();Vb(b,c)&&(d[0]=b[0]>c[0]?b[0]:c[0],d[1]=b[1]>c[1]?b[1]:c[1],d[2]=b[2]<c[2]?b[2]:c[2],d[3]=b[3]<c[3]?b[3]:c[3]);return d}function Qb(b){return b[2]-b[0]}function Vb(b,c){return b[0]<=c[2]&&b[2]>=c[0]&&b[1]<=c[3]&&b[3]>=c[1]}function Pb(b){return b[2]<b[0]||b[3]<b[1]};function Wb(b){return b.getAttributeNS("http://www.w3.org/1999/xlink","href")};var Xb;a:{var Yb=t.navigator;if(Yb){var Zb=Yb.userAgent;if(Zb){Xb=Zb;break a}}Xb=""}function $b(b){return-1!=Xb.indexOf(b)};function ac(b,c,d){for(var e in b)c.call(d,b[e],e,b)}function bc(b){var c=[],d=0,e;for(e in b)c[d++]=b[e];return c}function cc(b){var c=[],d=0,e;for(e in b)c[d++]=e;return c}function dc(b){var c={},d;for(d in b)c[d]=b[d];return c}var ec="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function fc(b,c){for(var d,e,f=1;f<arguments.length;f++){e=arguments[f];for(d in e)b[d]=e[d];for(var g=0;g<ec.length;g++)d=ec[g],Object.prototype.hasOwnProperty.call(e,d)&&(b[d]=e[d])}};var gc=$b("Opera")||$b("OPR"),hc=$b("Trident")||$b("MSIE"),ic=$b("Edge"),jc=$b("Gecko")&&!(-1!=Xb.toLowerCase().indexOf("webkit")&&!$b("Edge"))&&!($b("Trident")||$b("MSIE"))&&!$b("Edge"),kc=-1!=Xb.toLowerCase().indexOf("webkit")&&!$b("Edge"),lc=$b("Macintosh");function mc(){var b=Xb;if(jc)return/rv\:([^\);]+)(\)|;)/.exec(b);if(ic)return/Edge\/([\d\.]+)/.exec(b);if(hc)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(b);if(kc)return/WebKit\/(\S+)/.exec(b)}
function nc(){var b=t.document;return b?b.documentMode:void 0}var oc=function(){if(gc&&t.opera){var b;var c=t.opera.version;try{b=c()}catch(d){b=c}return b}b="";(c=mc())&&(b=c?c[1]:"");return hc&&(c=nc(),null!=c&&c>parseFloat(b))?String(c):b}(),pc={};function qc(b){return pc[b]||(pc[b]=0<=Ia(oc,b))}var rc=t.document,sc=rc&&hc?nc()||("CSS1Compat"==rc.compatMode?parseInt(oc,10):5):void 0;var tc=!hc||9<=Number(sc),uc=!jc&&!hc||hc&&9<=Number(sc)||jc&&qc("1.9.1");hc&&qc("9");function vc(b,c){this.x=ba(b)?b:0;this.y=ba(c)?c:0}m=vc.prototype;m.clone=function(){return new vc(this.x,this.y)};m.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};m.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};m.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};m.translate=function(b,c){b instanceof vc?(this.x+=b.x,this.y+=b.y):(this.x+=Number(b),ha(c)&&(this.y+=c));return this};
m.scale=function(b,c){var d=ha(c)?c:b;this.x*=b;this.y*=d;return this};function wc(b,c){this.width=b;this.height=c}m=wc.prototype;m.clone=function(){return new wc(this.width,this.height)};m.area=function(){return this.width*this.height};m.Ja=function(){return!this.area()};m.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};m.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};m.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};
m.scale=function(b,c){var d=ha(c)?c:b;this.width*=b;this.height*=d;return this};function xc(b){return b?new yc(zc(b)):ua||(ua=new yc)}function Ac(b){var c=document;return ga(b)?c.getElementById(b):b}function Bc(b,c){var d=c||document,e=null;d.getElementsByClassName?e=d.getElementsByClassName(b)[0]:d.querySelectorAll&&d.querySelector?e=d.querySelector("."+b):e=Cc(b,c)[0];return e||null}
function Cc(b,c){var d,e,f,g;d=document;d=c||d;if(d.querySelectorAll&&d.querySelector&&b)return d.querySelectorAll(""+(b?"."+b:""));if(b&&d.getElementsByClassName){var h=d.getElementsByClassName(b);return h}h=d.getElementsByTagName("*");if(b){g={};for(e=f=0;d=h[e];e++){var k=d.className;"function"==typeof k.split&&Na(k.split(/\s+/),b)&&(g[f++]=d)}g.length=f;return g}return h}
function Dc(b,c){ac(c,function(c,e){"style"==e?b.style.cssText=c:"class"==e?b.className=c:"for"==e?b.htmlFor=c:Ec.hasOwnProperty(e)?b.setAttribute(Ec[e],c):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?b.setAttribute(e,c):b[e]=c})}var Ec={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function Fc(b,c,d){var e=arguments,f=document,g=e[0],h=e[1];if(!tc&&h&&(h.name||h.type)){g=["<",g];h.name&&g.push(' name="',wa(h.name),'"');if(h.type){g.push(' type="',wa(h.type),'"');var k={};fc(k,h);delete k.type;h=k}g.push(">");g=g.join("")}g=f.createElement(g);h&&(ga(h)?g.className=h:ea(h)?g.className=h.join(" "):Dc(g,h));2<e.length&&Gc(f,g,e,2);return g}
function Gc(b,c,d,e){function f(d){d&&c.appendChild(ga(d)?b.createTextNode(d):d)}for(;e<d.length;e++){var g=d[e];!fa(g)||ka(g)&&0<g.nodeType?f(g):Ka(Hc(g)?Qa(g):g,f)}}function Ic(b){for(var c;c=b.firstChild;)b.removeChild(c)}function Jc(b){b&&b.parentNode&&b.parentNode.removeChild(b)}function Kc(b){return uc&&void 0!=b.children?b.children:La(b.childNodes,function(b){return 1==b.nodeType})}
function Lc(b){if(ba(b.nextElementSibling))b=b.nextElementSibling;else for(b=b.nextSibling;b&&1!=b.nodeType;)b=b.nextSibling;return b}function Mc(b,c){if(!b||!c)return!1;if(b.contains&&1==c.nodeType)return b==c||b.contains(c);if("undefined"!=typeof b.compareDocumentPosition)return b==c||!!(b.compareDocumentPosition(c)&16);for(;c&&b!=c;)c=c.parentNode;return c==b}function zc(b){return 9==b.nodeType?b:b.ownerDocument||b.document}
function Hc(b){if(b&&"number"==typeof b.length){if(ka(b))return"function"==typeof b.item||"string"==typeof b.item;if(ia(b))return"function"==typeof b.item}return!1}function yc(b){this.a=b||t.document||document}m=yc.prototype;m.ka=Dc;
function Nc(b){var c=b.a;b=c.scrollingElement?c.scrollingElement:kc?c.body||c.documentElement:c.documentElement;c=c.parentWindow||c.defaultView;return hc&&qc("10")&&c.pageYOffset!=b.scrollTop?new vc(b.scrollLeft,b.scrollTop):new vc(c.pageXOffset||b.scrollLeft,c.pageYOffset||b.scrollTop)}m.appendChild=function(b,c){b.appendChild(c)};m.append=function(b,c){Gc(zc(b),b,arguments,1)};m.isElement=function(b){return ka(b)&&1==b.nodeType};m.contains=Mc;function Oc(){if(!hc)return!1;try{return new ActiveXObject("MSXML2.DOMDocument"),!0}catch(b){return!1}}var Pc=hc&&Oc();function Qc(b,c){return b>c?1:b<c?-1:0}function Sc(b,c,d){var e=b.length;if(b[0]<=c)return 0;if(!(c<=b[e-1]))if(0<d)for(d=1;d<e;++d){if(b[d]<c)return d-1}else if(0>d)for(d=1;d<e;++d){if(b[d]<=c)return d}else for(d=1;d<e;++d){if(b[d]==c)return d;if(b[d]<c)return b[d-1]-c<c-b[d]?d-1:d}return e-1}function Tc(b,c){var d,e=fa(c)?c:[c],f=e.length;for(d=0;d<f;d++)b[b.length]=e[d]}function Uc(b,c){var d=b.indexOf(c),e=-1<d;e&&b.splice(d,1);return e}
function Vc(b,c){for(var d=b.length>>>0,e,f=0;f<d;f++)if(e=b[f],c(e,f,b))return e;return null}function Wc(b,c){var d=b.length;if(d!==c.length)return!1;for(var e=0;e<d;e++)if(b[e]!==c[e])return!1;return!0}function Xc(b){var c=Yc,d=b.length,e=Array(b.length),f;for(f=0;f<d;f++)e[f]={index:f,value:b[f]};e.sort(function(b,d){return c(b.value,d.value)||b.index-d.index});for(f=0;f<b.length;f++)b[f]=e[f].value}function Zc(b,c){var d;return b.every(function(e,f){d=f;return!c(e,f,b)})?-1:d};var $c;a:if(document.implementation&&document.implementation.createDocument)$c=document.implementation.createDocument("","",null);else{if(Pc){var ad=new ActiveXObject("MSXML2.DOMDocument");ad.resolveExternals=!1;ad.validateOnParse=!1;try{ad.setProperty("ProhibitDTD",!0),ad.setProperty("MaxXMLSize",2048),ad.setProperty("MaxElementDepth",256)}catch(b){}if(ad){$c=ad;break a}}throw Error("Your browser does not support creating new documents");}var bd=$c;
function cd(b,c){return bd.createElementNS(b,c)}function dd(b,c){b||(b="");return bd.createNode(1,c,b)}var ed=document.implementation&&document.implementation.createDocument?cd:dd;function fd(b){return gd(b,!1,[]).join("")}function gd(b,c,d){if(4==b.nodeType||3==b.nodeType)c?d.push(String(b.nodeValue).replace(/(\r\n|\r|\n)/g,"")):d.push(b.nodeValue);else for(b=b.firstChild;b;b=b.nextSibling)gd(b,c,d);return d}function hd(b){return b.localName}
function id(b){var c=b.localName;return void 0!==c?c:b.baseName}var jd=hc?id:hd;function kd(b){return b instanceof Document}function ld(b){return ka(b)&&9==b.nodeType}var md=hc?ld:kd;function nd(b){return b instanceof Node}function od(b){return ka(b)&&void 0!==b.nodeType}var pd=hc?od:nd;function qd(b,c,d){return b.getAttributeNS(c,d)||""}function rd(b,c,d){var e="";b=sd(b,c,d);void 0!==b&&(e=b.nodeValue);return e}var td=document.implementation&&document.implementation.createDocument?qd:rd;
function ud(b,c,d){return b.getAttributeNodeNS(c,d)}function vd(b,c,d){var e=null;b=b.attributes;for(var f,g,h=0,k=b.length;h<k;++h)if(f=b[h],f.namespaceURI==c&&(g=f.prefix?f.prefix+":"+d:d,g==f.nodeName)){e=f;break}return e}var sd=document.implementation&&document.implementation.createDocument?ud:vd;function wd(b,c,d,e){b.setAttributeNS(c,d,e)}function xd(b,c,d,e){c?(c=b.ownerDocument.createNode(2,d,c),c.nodeValue=e,b.setAttributeNode(c)):b.setAttribute(d,e)}
var yd=document.implementation&&document.implementation.createDocument?wd:xd;function zd(b){return(new DOMParser).parseFromString(b,"application/xml")}function Ad(b,c){return function(d,e){var f=b.call(void 0!==c?c:this,d,e);void 0!==f&&e[e.length-1].push(f)}}function Cd(b,c){return function(d,e){var f=b.call(void 0!==c?c:this,d,e);void 0!==f&&(e[e.length-1]=f)}}
function Dd(b){return function(c,d){var e=b.call(this,c,d);if(void 0!==e){var f=d[d.length-1],g=c.localName,h;g in f?h=f[g]:h=f[g]=[];h.push(e)}}}function M(b,c){return function(d,e){var f=b.call(this,d,e);void 0!==f&&(e[e.length-1][void 0!==c?c:d.localName]=f)}}function O(b){return function(c,d,e){b.call(this,c,d,e);e[e.length-1].node.appendChild(c)}}function Ed(b){var c,d;return function(e,f,g){if(void 0===c){c={};var h={};h[e.localName]=b;c[e.namespaceURI]=h;d=Fd(e.localName)}Gd(c,d,f,g)}}
function Fd(b){return function(c,d,e){c=d[d.length-1].node;d=b;void 0===d&&(d=e);e=void 0;e=c.namespaceURI;return ed(e,d)}}var Hd=Fd();function Id(b,c){for(var d=c.length,e=Array(d),f=0;f<d;++f)e[f]=b[c[f]];return e}function P(b,c,d){d=void 0!==d?d:{};var e,f;e=0;for(f=b.length;e<f;++e)d[b[e]]=c;return d}function Jd(b,c,d,e){for(c=c.firstElementChild;c;c=c.nextElementSibling){var f=b[c.namespaceURI];void 0!==f&&(f=f[c.localName],void 0!==f&&f.call(e,c,d))}}
function Q(b,c,d,e,f){e.push(b);Jd(c,d,e,f);return e.pop()}function Gd(b,c,d,e,f,g){for(var h=(void 0!==f?f:d).length,k,l,n=0;n<h;++n)k=d[n],void 0!==k&&(l=c.call(g,k,e,void 0!==f?f[n]:void 0),void 0!==l&&b[l.namespaceURI][l.localName].call(g,l,k,e))}function Kd(b,c,d,e,f,g,h){f.push(b);Gd(c,d,e,f,g,h);f.pop()};function Ld(){}Ld.prototype.read=function(b){return md(b)?this.b(b):pd(b)?this.a(b):"string"===typeof b?(b=zd(b),this.b(b)):null};function Md(){};function Nd(b){b=fd(b);return Od(b)}function Od(b){if(b=/^\s*(true|1)|(false|0)\s*$/.exec(b))return void 0!==b[1]||!1}function Pd(b){b=fd(b);if(b=/^\s*(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(Z|(?:([+\-])(\d{2})(?::(\d{2}))?))\s*$/.exec(b)){var c=Date.UTC(parseInt(b[1],10),parseInt(b[2],10)-1,parseInt(b[3],10),parseInt(b[4],10),parseInt(b[5],10),parseInt(b[6],10))/1E3;if("Z"!=b[7]){var d="-"==b[8]?-1:1,c=c+60*d*parseInt(b[9],10);void 0!==b[10]&&(c+=3600*d*parseInt(b[10],10))}return c}}
function Qd(b){b=fd(b);return Rd(b)}function Rd(b){if(b=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(b))return parseFloat(b[1])}function Sd(b){b=fd(b);return Td(b)}function Td(b){if(b=/^\s*(\d+)\s*$/.exec(b))return parseInt(b[1],10)}function S(b){return fd(b).trim()}function Ud(b,c){Vd(b,c?"1":"0")}function Wd(b,c){b.appendChild(bd.createTextNode(c.toPrecision()))}function Xd(b,c){b.appendChild(bd.createTextNode(c.toString()))}function Vd(b,c){b.appendChild(bd.createTextNode(c))};function Yd(){}y(Yd,Ld);Yd.prototype.b=function(b){for(b=b.firstChild;b;b=b.nextSibling)if(1==b.nodeType)return this.a(b);return null};Yd.prototype.a=function(b){return(b=Q({},Zd,b,[]))?b:null};
var $d=[null,"http://www.opengis.net/ows/1.1"],Zd=P($d,{ServiceIdentification:M(function(b,c){return Q({},ae,b,c)}),ServiceProvider:M(function(b,c){return Q({},be,b,c)}),OperationsMetadata:M(function(b,c){return Q({},ce,b,c)})}),de=P($d,{DeliveryPoint:M(S),City:M(S),AdministrativeArea:M(S),PostalCode:M(S),Country:M(S),ElectronicMailAddress:M(S)}),ee=P($d,{Value:Dd(function(b){return S(b)})}),fe=P($d,{AllowedValues:M(function(b,c){return Q({},ee,b,c)})}),he=P($d,{Phone:M(function(b,c){return Q({},
ge,b,c)}),Address:M(function(b,c){return Q({},de,b,c)})}),je=P($d,{HTTP:M(function(b,c){return Q({},ie,b,c)})}),ie=P($d,{Get:Dd(function(b,c){var d=Wb(b);return d?Q({href:d},ke,b,c):void 0}),Post:void 0}),le=P($d,{DCP:M(function(b,c){return Q({},je,b,c)})}),ce=P($d,{Operation:function(b,c){var d=b.getAttribute("name"),e=Q({},le,b,c);e&&(c[c.length-1][d]=e)}}),ge=P($d,{Voice:M(S),Facsimile:M(S)}),ke=P($d,{Constraint:Dd(function(b,c){var d=b.getAttribute("name");return d?Q({name:d},fe,b,c):void 0})}),
me=P($d,{IndividualName:M(S),PositionName:M(S),ContactInfo:M(function(b,c){return Q({},he,b,c)})}),ae=P($d,{Title:M(S),ServiceTypeVersion:M(S),ServiceType:M(S)}),be=P($d,{ProviderName:M(S),ProviderSite:M(Wb),ServiceContact:M(function(b,c){return Q({},me,b,c)})});function ne(){this.f=new Yd}y(ne,Ld);ne.prototype.b=function(b){for(b=b.firstChild;b;b=b.nextSibling)if(1==b.nodeType)return this.a(b);return null};ne.prototype.a=function(b){var c=b.getAttribute("version").trim(),d=this.f.a(b);if(!d)return null;d.version=c;return(d=Q(d,oe,b,[]))?d:null};function pe(b){var c=S(b).split(" ");if(c&&2==c.length)return b=+c[0],c=+c[1],isNaN(b)||isNaN(c)?void 0:[b,c]}
var qe=[null,"http://www.opengis.net/wmts/1.0"],re=[null,"http://www.opengis.net/ows/1.1"],oe=P(qe,{Contents:M(function(b,c){return Q({},se,b,c)})}),se=P(qe,{Layer:Dd(function(b,c){return Q({},te,b,c)}),TileMatrixSet:Dd(function(b,c){return Q({},we,b,c)})}),te=P(qe,{Style:Dd(function(b,c){var d=Q({},xe,b,c);if(d){var e="true"===b.getAttribute("isDefault");d.isDefault=e;return d}}),Format:Dd(S),TileMatrixSetLink:Dd(function(b,c){return Q({},ye,b,c)}),Dimension:Dd(function(b,c){return Q({},ze,b,c)}),
ResourceURL:Dd(function(b){var c=b.getAttribute("format"),d=b.getAttribute("template");b=b.getAttribute("resourceType");var e={};c&&(e.format=c);d&&(e.template=d);b&&(e.resourceType=b);return e})},P(re,{Title:M(S),Abstract:M(S),WGS84BoundingBox:M(function(b,c){var d=Q([],Ae,b,c);return 2!=d.length?void 0:Eb(d)}),Identifier:M(S)})),xe=P(qe,{LegendURL:Dd(function(b){var c={};c.format=b.getAttribute("format");c.href=Wb(b);return c})},P(re,{Title:M(S),Identifier:M(S)})),ye=P(qe,{TileMatrixSet:M(S)}),
ze=P(qe,{Default:M(S),Value:Dd(S)},P(re,{Identifier:M(S)})),Ae=P(re,{LowerCorner:Ad(pe),UpperCorner:Ad(pe)}),we=P(qe,{WellKnownScaleSet:M(S),TileMatrix:Dd(function(b,c){return Q({},Be,b,c)})},P(re,{SupportedCRS:M(S),Identifier:M(S)})),Be=P(qe,{TopLeftCorner:M(pe),ScaleDenominator:M(Qd),TileWidth:M(Sd),TileHeight:M(Sd),MatrixWidth:M(Sd),MatrixHeight:M(Sd)},P(re,{Identifier:M(S)}));function Ce(b,c,d){return Math.min(Math.max(b,c),d)}var De=function(){var b;"cosh"in Math?b=Math.cosh:b=function(b){b=Math.exp(b);return(b+1/b)/2};return b}();function Ee(b,c,d,e){this.b=b;this.a=c;this.c=d;this.f=e}Ee.prototype.contains=function(b){return Fe(this,b[1],b[2])};function Fe(b,c,d){return b.b<=c&&c<=b.a&&b.c<=d&&d<=b.f}Ee.prototype.equals=function(b){return this.b==b.b&&this.c==b.c&&this.a==b.a&&this.f==b.f};Ee.prototype.extend=function(b){b.b<this.b&&(this.b=b.b);b.a>this.a&&(this.a=b.a);b.c<this.c&&(this.c=b.c);b.f>this.f&&(this.f=b.f)};function Ge(b,c){return b.b<=c.a&&b.a>=c.b&&b.c<=c.f&&b.f>=c.c};/*

 Latitude/longitude spherical geodesy formulae taken from
 http://www.movable-type.co.uk/scripts/latlong.html
 Licensed under CC-BY-3.0.
*/
function He(b){this.radius=b}function Ie(b,c,d){var e=c[1]*Math.PI/180,f=d[1]*Math.PI/180,g=(f-e)/2;c=(d[0]-c[0])*Math.PI/180/2;e=Math.sin(g)*Math.sin(g)+Math.sin(c)*Math.sin(c)*Math.cos(e)*Math.cos(f);return 2*b.radius*Math.atan2(Math.sqrt(e),Math.sqrt(1-e))}
He.prototype.offset=function(b,c,d){var e=b[1]*Math.PI/180;c/=this.radius;var f=Math.asin(Math.sin(e)*Math.cos(c)+Math.cos(e)*Math.sin(c)*Math.cos(d));return[180*(b[0]*Math.PI/180+Math.atan2(Math.sin(d)*Math.sin(c)*Math.cos(e),Math.cos(c)-Math.sin(e)*Math.sin(f)))/Math.PI,180*f/Math.PI]};var Je=new He(6370997);var Ke={};Ke.degrees=2*Math.PI*Je.radius/360;Ke.ft=.3048;Ke.m=1;Ke["us-ft"]=1200/3937;
function Le(b){this.a=b.code;this.c=b.units;this.i=void 0!==b.extent?b.extent:null;this.g=void 0!==b.qd?b.qd:"enu";this.f=void 0!==b.global?b.global:!1;this.b=!(!this.f||!this.i);this.l=void 0!==b.lb?b.lb:this.o;this.j=null;this.u=b.pf;var c=Me,d=b.code,e=Ne||t.proj4;if("function"==typeof e&&void 0===c[d]){var f=e.defs(d);if(void 0!==f){void 0!==f.axis&&void 0===b.qd&&(this.g=f.axis);void 0===b.pf&&(this.u=f.to_meter);void 0===b.units&&(this.c=f.units);var g,h;for(g in c)if(b=e.defs(g),void 0!==b)if(c=
Oe(g),b===f)Pe([c,this]);else{h=e(g,d);b=h.forward;h=h.inverse;var c=Oe(c),k=Oe(this);Qe(c,k,Re(b));Qe(k,c,Re(h))}}}}function Se(b){return b.a}Le.prototype.G=function(){return this.i};function Te(b){return b.u||Ke[b.c]}function Ue(b,c){b.i=c;b.b=!(!b.f||!c)}
Le.prototype.o=function(b,c){if("degrees"==this.c)return b;var d=Ve(this,Oe("EPSG:4326")),e=[c[0]-b/2,c[1],c[0]+b/2,c[1],c[0],c[1]-b/2,c[0],c[1]+b/2],e=d(e,e,2),d=Ie(Je,e.slice(0,2),e.slice(2,4)),e=Ie(Je,e.slice(4,6),e.slice(6,8)),e=(d+e)/2,d=Te(this);void 0!==d&&(e/=d);return e};Le.prototype.lb=function(b,c){return this.l(b,c)};var Me={},We={},Ne=null;function Pe(b){Xe(b);b.forEach(function(c){b.forEach(function(b){c!==b&&Qe(c,b,Ye)})})}function Ze(b){Me[b.a]=b;Qe(b,b,Ye)}
function Xe(b){var c=[];b.forEach(function(b){c.push(Ze(b))})}function $e(b){return b?"string"===typeof b?Oe(b):b:Oe("EPSG:3857")}function Qe(b,c,d){b=b.a;c=c.a;b in We||(We[b]={});We[b][c]=d}function Re(b){return function(c,d,e){var f=c.length;e=void 0!==e?e:2;d=void 0!==d?d:Array(f);var g,h;for(h=0;h<f;h+=e)for(g=b([c[h],c[h+1]]),d[h]=g[0],d[h+1]=g[1],g=e-1;2<=g;--g)d[h+g]=c[h+g];return d}}
function Oe(b){var c;if(b instanceof Le)c=b;else if("string"===typeof b){c=Me[b];var d=Ne||t.proj4;void 0===c&&"function"==typeof d&&void 0!==d.defs(b)&&(c=new Le({code:b}),Ze(c))}else c=null;return c}function af(b,c){if(b===c)return!0;var d=b.c===c.c;return b.a===c.a?d:Ve(b,c)===Ye&&d}function bf(b,c){var d=Oe(b),e=Oe(c);return Ve(d,e)}function Ve(b,c){var d=b.a,e=c.a,f;d in We&&e in We[d]&&(f=We[d][e]);void 0===f&&(f=cf);return f}
function cf(b,c){if(void 0!==c&&b!==c){for(var d=0,e=b.length;d<e;++d)c[d]=b[d];b=c}return b}function Ye(b,c){var d;if(void 0!==c){d=0;for(var e=b.length;d<e;++d)c[d]=b[d];d=c}else d=b.slice();return d}function df(b,c,d){return bf(c,d)(b,void 0,b.length)}
function ef(b,c,d){c=bf(c,d);b=[b[0],b[1],b[0],b[3],b[2],b[1],b[2],b[3]];c(b,b,2);d=[b[0],b[2],b[4],b[6]];var e=[b[1],b[3],b[5],b[7]];b=Math.min.apply(null,d);c=Math.min.apply(null,e);d=Math.max.apply(null,d);e=Math.max.apply(null,e);return Kb(b,c,d,e,void 0)};function ff(b){mb.call(this);this.La=Oe(b.projection);this.Ea=void 0!==b.ca?b.ca:null;this.qa=b.ea;this.Ma=void 0!==b.state?b.state:"ready";this.C=void 0!==b.wrapX?b.wrapX:!1}y(ff,mb);ff.prototype.o=function(){return this.Ea};ff.prototype.Y=function(){return this.La};ff.prototype.T=function(){return this.Ma};function gf(b){mb.call(this);var c=Ua({},b);c.opacity=void 0!==b.opacity?b.opacity:1;c.visible=void 0!==b.visible?b.visible:!0;c.zIndex=void 0!==b.zIndex?b.zIndex:0;c.maxResolution=void 0!==b.bb?b.bb:Infinity;c.minResolution=void 0!==b.Sa?b.Sa:0;this.ka(c)}y(gf,mb);function hf(b){var c=b.get("opacity"),d=b.Qd(),e=jf(b),f=b.G(),g=b.get("zIndex"),h=b.get("maxResolution"),k=b.get("minResolution");return{layer:b,opacity:Ce(c,0,1),uj:d,visible:e,nf:!0,extent:f,zIndex:g,bb:h,Sa:Math.max(k,0)}}
gf.prototype.G=function(){return this.get("extent")};function jf(b){return b.get("visible")}gf.prototype.Ta=function(b){this.set("visible",b)};function kf(b){var c=b||{};b=Ua({},c);delete b.layers;c=c.layers;gf.call(this,b);this.c=[];this.a={};I(this,L("layers"),this.wh,this);c?ea(c)&&(c=new pb(c.slice())):c=new pb;this.set("layers",c)}y(kf,gf);m=kf.prototype;m.Jc=function(){jf(this)&&this.b()};
m.wh=function(){this.c.forEach(G);this.c.length=0;var b=lf(this);this.c.push(I(b,"add",this.Ai,this),I(b,"remove",this.Bi,this));for(var c in this.a)this.a[c].forEach(G);Va(this.a);var b=b.a,d,e;c=0;for(d=b.length;c<d;c++)e=b[c],this.a[w(e).toString()]=[I(e,"propertychange",this.Jc,this),I(e,"change",this.Jc,this)];this.b()};m.Ai=function(b){b=b.element;var c=w(b).toString();this.a[c]=[I(b,"propertychange",this.Jc,this),I(b,"change",this.Jc,this)];this.b()};
m.Bi=function(b){b=w(b.element).toString();this.a[b].forEach(G);delete this.a[b];this.b()};function lf(b){return b.get("layers")}m.Od=function(b){var c=void 0!==b?b:[],d=c.length;lf(this).forEach(function(b){b.Od(c)});b=hf(this);var e,f;for(e=c.length;d<e;d++)f=c[d],f.opacity*=b.opacity,f.visible=f.visible&&b.visible,f.bb=Math.min(f.bb,b.bb),f.Sa=Math.max(f.Sa,b.Sa),void 0!==b.extent&&(f.extent=void 0!==f.extent?Ub(f.extent,b.extent):b.extent);return c};m.Qd=function(){return"ready"};function mf(){};function nf(b,c,d,e,f,g){Sa.call(this,b,c);this.vectorContext=d;this.frameState=e;this.context=f;this.glContext=g}y(nf,Sa);function of(b){var c=Ua({},b);delete c.source;gf.call(this,c);this.g=this.c=this.a=null;b.map&&this.setMap(b.map);I(this,L("source"),this.Hh,this);pf(this,b.source?b.source:null)}y(of,gf);m=of.prototype;m.Od=function(b){b=b?b:[];b.push(hf(this));return b};m.N=function(){return this.get("source")||null};m.Qd=function(){var b=this.N();return b?b.T():"undefined"};m.Ci=function(){this.b()};m.Hh=function(){this.g&&(G(this.g),this.g=null);var b=this.N();b&&(this.g=I(b,"change",this.Ci,this));this.b()};
m.setMap=function(b){this.a&&(G(this.a),this.a=null);b||this.b();this.c&&(G(this.c),this.c=null);b&&(this.a=I(b,"precompose",function(b){var d=hf(this);d.nf=!1;d.zIndex=Infinity;b.frameState.Vd.push(d);b.frameState.Ud[w(this)]=d},this),this.c=I(this,"change",b.render,b),this.b())};function pf(b,c){b.set("source",c)};function qf(b){of.call(this,b?b:{})}y(qf,of);function rf(b){b=b?b:{};var c=Ua({},b);delete c.Hf;delete c.Zf;of.call(this,c);this.set("preload",void 0!==b.Hf?b.Hf:0);this.set("useInterimTilesOnError",void 0!==b.Zf?b.Zf:!0)}y(rf,of);var sf=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function tf(b,c){if(b)for(var d=b.split("&"),e=0;e<d.length;e++){var f=d[e].indexOf("="),g=null,h=null;0<=f?(g=d[e].substring(0,f),h=d[e].substring(f+1)):g=d[e];c(g,h?decodeURIComponent(h.replace(/\+/g," ")):"")}}
function uf(b){if(b[1]){var c=b[0],d=c.indexOf("#");0<=d&&(b.push(c.substr(d)),b[0]=c=c.substr(0,d));d=c.indexOf("?");0>d?b[1]="?":d==c.length-1&&(b[1]=void 0)}return b.join("")}function vf(b,c,d){if(ea(c))for(var e=0;e<c.length;e++)vf(b,String(c[e]),d);else null!=c&&d.push("&",b,""===c?"":"=",encodeURIComponent(String(c)))}function yf(b,c){for(var d in c)vf(d,c[d],b);return b}
function zf(b,c,d,e){for(var f=d.length;0<=(c=b.indexOf(d,c))&&c<e;){var g=b.charCodeAt(c-1);if(38==g||63==g)if(g=b.charCodeAt(c+f),!g||61==g||38==g||35==g)return c;c+=f+1}return-1}var Af=/#|$/,Bf=/[?&]($|#)/;function Cf(b,c,d){for(var e=b.search(Af),f=0,g,h=[];0<=(g=zf(b,f,c,e));)h.push(b.substring(f,g)),f=Math.min(b.indexOf("&",g)+1||e,e);h.push(b.substr(f));b=[h.join("").replace(Bf,"$1"),"&",c];null!=d&&b.push("=",encodeURIComponent(String(d)));return uf(b)}
function Df(b,c){var d=b.length-1;0<=d&&b.indexOf("/",d)==d&&(b=b.substr(0,b.length-1));0==c.lastIndexOf("/",0)&&(c=c.substr(1));return Ha(b,"/",c)};function Ef(b,c,d,e,f){ib.call(this);this.j=f;this.extent=b;this.c=d;this.resolution=c;this.state=e}y(Ef,ib);function Ff(b){b.B("change")}Ef.prototype.o=function(){return this.j};Ef.prototype.G=function(){return this.extent};Ef.prototype.S=function(){return this.resolution};Ef.prototype.T=function(){return this.state};function Gf(b,c,d,e,f,g,h){Ef.call(this,b,c,d,0,e);this.i=f;this.a=new Image;null!==g&&(this.a.crossOrigin=g);this.f={};this.b=null;this.state=0;this.g=h}y(Gf,Ef);Gf.prototype.Pc=function(b){if(void 0!==b){var c;b=w(b);if(b in this.f)return this.f[b];Wa(this.f)?c=this.a:c=this.a.cloneNode(!1);return this.f[b]=c}return this.a};Gf.prototype.u=function(){this.state=3;this.b.forEach(G);this.b=null;Ff(this)};
Gf.prototype.l=function(){void 0===this.resolution&&(this.resolution=Rb(this.extent)/this.a.height);this.state=2;this.b.forEach(G);this.b=null;Ff(this)};Gf.prototype.load=function(){0==this.state&&(this.state=1,Ff(this),this.b=[I(this.a,"error",this.u,this,!0),I(this.a,"load",this.l,this,!0)],this.g(this,this.i))};function Hf(b,c){var d=document.createElement("CANVAS");b&&(d.width=b);c&&(d.height=c);return d.getContext("2d")};var If=!(($b("Chrome")||$b("CriOS"))&&!$b("Opera")&&!$b("OPR")&&!$b("Edge"))||$b("iPhone")&&!$b("iPod")&&!$b("iPad")||$b("iPad")||$b("iPod");function Jf(b,c,d,e){var f=df(d,c,b);d=c.lb(e,d);c=Te(c);void 0!==c&&(d*=c);c=Te(b);void 0!==c&&(d/=c);b=b.lb(d,f)/d;isFinite(b)&&0<b&&(d/=b);return d}function Kf(b,c,d,e){b=d-b;c=e-c;var f=Math.sqrt(b*b+c*c);return[Math.round(d+b/f),Math.round(e+c/f)]}
function Lf(b,c,d,e,f,g,h,k,l,n,q){var p=Hf(Math.round(d*b),Math.round(d*c));if(0===l.length)return p.canvas;p.scale(d,d);var r=Fb();l.forEach(function(b){Mb(r,b.extent)});var u=Hf(Math.round(d*Qb(r)/e),Math.round(d*Rb(r)/e)),v=d/e;l.forEach(function(b){u.drawImage(b.image,n,n,b.image.width-2*n,b.image.height-2*n,(b.extent[0]-r[0])*v,-(b.extent[3]-r[3])*v,Qb(b.extent)*v,Rb(b.extent)*v)});var A=[h[0],h[3]];k.c.forEach(function(b){var c=b.source,f=b.target,h=c[1][0],k=c[1][1],l=c[2][0],n=c[2][1];b=
(f[0][0]-A[0])/g;var q=-(f[0][1]-A[1])/g,v=(f[1][0]-A[0])/g,K=-(f[1][1]-A[1])/g,Z=(f[2][0]-A[0])/g,X=-(f[2][1]-A[1])/g,f=c[0][0],c=c[0][1],h=h-f,k=k-c,l=l-f,n=n-c;a:{h=[[h,k,0,0,v-b],[l,n,0,0,Z-b],[0,0,h,k,K-q],[0,0,l,n,X-q]];k=h.length;for(l=0;l<k;l++){for(var n=l,W=Math.abs(h[l][l]),J=l+1;J<k;J++){var aa=Math.abs(h[J][l]);aa>W&&(W=aa,n=J)}if(0===W){h=null;break a}W=h[n];h[n]=h[l];h[l]=W;for(n=l+1;n<k;n++)for(W=-h[n][l]/h[l][l],J=l;J<k+1;J++)h[n][J]=l==J?0:h[n][J]+W*h[l][J]}l=Array(k);for(n=k-1;0<=
n;n--)for(l[n]=h[n][k]/h[n][n],W=n-1;0<=W;W--)h[W][k]-=h[W][n]*l[n];h=l}h&&(p.save(),p.beginPath(),If?(l=(b+v+Z)/3,n=(q+K+X)/3,k=Kf(l,n,b,q),v=Kf(l,n,v,K),Z=Kf(l,n,Z,X),p.moveTo(k[0],k[1]),p.lineTo(v[0],v[1]),p.lineTo(Z[0],Z[1])):(p.moveTo(b,q),p.lineTo(v,K),p.lineTo(Z,X)),p.closePath(),p.clip(),p.transform(h[0],h[2],h[1],h[3],b,q),p.translate(r[0]-f,r[3]-c),p.scale(e/d,-e/d),p.drawImage(u.canvas,0,0),p.restore())});q&&(p.save(),p.strokeStyle="black",p.lineWidth=1,k.c.forEach(function(b){var c=b.target;
b=(c[0][0]-A[0])/g;var d=-(c[0][1]-A[1])/g,e=(c[1][0]-A[0])/g,f=-(c[1][1]-A[1])/g,h=(c[2][0]-A[0])/g,c=-(c[2][1]-A[1])/g;p.beginPath();p.moveTo(b,d);p.lineTo(e,f);p.lineTo(h,c);p.closePath();p.stroke()}),p.restore());return p.canvas};function Mf(b,c,d,e,f){this.f=b;this.g=c;var g={},h=bf(this.g,this.f);this.b=function(b){var c=b[0]+"/"+b[1];g[c]||(g[c]=h(b));return g[c]};this.i=e;this.o=f*f;this.c=[];this.u=!1;this.l=this.f.b&&!!e&&!!this.f.G()&&Qb(e)==Qb(this.f.G());this.a=this.f.G()?Qb(this.f.G()):null;this.j=this.g.G()?Qb(this.g.G()):null;b=[d[0],d[3]];c=[d[2],d[3]];e=[d[2],d[1]];d=[d[0],d[1]];f=this.b(b);var k=this.b(c),l=this.b(e),n=this.b(d);Nf(this,b,c,e,d,f,k,l,n,10);if(this.u){var q=Infinity;this.c.forEach(function(b){q=
Math.min(q,b.source[0][0],b.source[1][0],b.source[2][0])});this.c.forEach(function(b){if(Math.max(b.source[0][0],b.source[1][0],b.source[2][0])-q>this.a/2){var c=[[b.source[0][0],b.source[0][1]],[b.source[1][0],b.source[1][1]],[b.source[2][0],b.source[2][1]]];c[0][0]-q>this.a/2&&(c[0][0]-=this.a);c[1][0]-q>this.a/2&&(c[1][0]-=this.a);c[2][0]-q>this.a/2&&(c[2][0]-=this.a);Math.max(c[0][0],c[1][0],c[2][0])-Math.min(c[0][0],c[1][0],c[2][0])<this.a/2&&(b.source=c)}},this)}g={}}
function Nf(b,c,d,e,f,g,h,k,l,n){var q=Eb([g,h,k,l]),p=b.a?Qb(q)/b.a:null,r=b.f.b&&.5<p&&1>p,u=!1;if(0<n){if(b.g.f&&b.j)var v=Eb([c,d,e,f]),u=u|.25<Qb(v)/b.j;!r&&b.f.f&&p&&(u|=.25<p)}if(u||!b.i||Vb(q,b.i)){if(!(u||isFinite(g[0])&&isFinite(g[1])&&isFinite(h[0])&&isFinite(h[1])&&isFinite(k[0])&&isFinite(k[1])&&isFinite(l[0])&&isFinite(l[1])))if(0<n)u=!0;else return;if(0<n&&(u||(p=b.b([(c[0]+e[0])/2,(c[1]+e[1])/2]),q=r?(zb(g[0],b.a)+zb(k[0],b.a))/2-zb(p[0],b.a):(g[0]+k[0])/2-p[0],p=(g[1]+k[1])/2-p[1],
u=q*q+p*p>b.o),u)){Math.abs(c[0]-e[0])<=Math.abs(c[1]-e[1])?(r=[(d[0]+e[0])/2,(d[1]+e[1])/2],q=b.b(r),p=[(f[0]+c[0])/2,(f[1]+c[1])/2],u=b.b(p),Nf(b,c,d,r,p,g,h,q,u,n-1),Nf(b,p,r,e,f,u,q,k,l,n-1)):(r=[(c[0]+d[0])/2,(c[1]+d[1])/2],q=b.b(r),p=[(e[0]+f[0])/2,(e[1]+f[1])/2],u=b.b(p),Nf(b,c,r,p,f,g,q,u,l,n-1),Nf(b,r,d,e,p,q,h,k,u,n-1));return}if(r){if(!b.l)return;b.u=!0}b.c.push({source:[g,k,l],target:[c,e,f]});b.c.push({source:[g,h,k],target:[c,d,e]})}}
function Of(b){var c=Fb();b.c.forEach(function(b){b=b.source;Gb(c,b[0]);Gb(c,b[1]);Gb(c,b[2])});return c};function Pf(b,c,d,e,f,g){this.l=c;this.u=b.G();var h=c.G(),k=h?Ub(d,h):d,h=Jf(b,c,Sb(k),e);this.g=new Mf(b,c,k,this.u,.5*h);this.b=e;this.a=d;b=Of(this.g);this.i=(this.Da=g(b,h,f))?this.Da.c:1;this.jc=this.f=null;f=2;g=[];this.Da&&(f=0,g=this.Da.o());Ef.call(this,d,e,this.i,f,g)}y(Pf,Ef);m=Pf.prototype;m.L=function(){1==this.state&&(G(this.jc),this.jc=null);Pf.U.L.call(this)};m.Pc=function(){return this.f};m.Y=function(){return this.l};
m.hc=function(){var b=this.Da.T();2==b&&(this.f=Lf(Qb(this.a)/this.b,Rb(this.a)/this.b,this.i,this.Da.S(),0,this.b,this.a,this.g,[{extent:this.Da.G(),image:this.Da.Pc()}],0));this.state=b;Ff(this)};m.load=function(){if(0==this.state){this.state=1;Ff(this);var b=this.Da.T();2==b||3==b?this.hc():(this.jc=I(this.Da,"change",function(){var b=this.Da.T();if(2==b||3==b)G(this.jc),this.jc=null,this.hc()},this),this.Da.load())}};function Qf(b){ff.call(this,{ca:b.ca,extent:b.extent,ea:b.ea,projection:b.projection,state:b.state});this.v=void 0!==b.Ca?b.Ca:null;this.c=null;this.P=0}y(Qf,ff);function Rf(b,c,d,e,f){var g=b.Y();if(g&&f&&!af(g,f)){if(b.c){if(b.P==b.f&&af(b.c.Y(),f)&&b.c.S()==d&&b.c.c==e&&Lb(b.c.G(),c))return b.c;b.c.Db();b.c=null}b.c=new Pf(g,f,c,d,e,function(b,c,d){return Sf(this,b,c,d,g)}.bind(b));b.P=b.f;return b.c}g&&(f=g);return Sf(b,c,d,e,f)}
Qf.prototype.X=function(b){b=b.target;switch(b.T()){case 1:this.B(new Tf(Uf,b));break;case 2:this.B(new Tf(Vf,b));break;case 3:this.B(new Tf(Wf,b))}};function Xf(b,c){b.Pc().src=c}function Tf(b,c){Sa.call(this,b);this.image=c}y(Tf,Sa);var Uf="imageloadstart",Vf="imageloadend",Wf="imageloaderror";function Yf(b){b=b||{};Qf.call(this,{ca:b.ca,ea:b.ea,projection:b.projection,Ca:b.Ca});this.ha=void 0!==b.crossOrigin?b.crossOrigin:null;this.l=b.url;this.sa=void 0!==b.Sh?b.Sh:Xf;this.a=b.params||{};this.j=!0;Zf(this);this.I=b.serverType;this.ra=void 0!==b.Oh?b.Oh:!0;this.i=null;this.A=[0,0];this.D=0;this.g=void 0!==b.ratio?b.ratio:1.5}y(Yf,Qf);var $f=[101,101];
function ag(b,c,d,e,f){if(void 0!==b.l){var g=Tb(c,d,0,$f),h={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:b.a.LAYERS};Ua(h,b.a,f);f=Math.floor((g[3]-c[1])/d);h[b.j?"I":"X"]=Math.floor((c[0]-g[0])/d);h[b.j?"J":"Y"]=f;return bg(b,g,$f,1,Oe(e),h)}}
function Sf(b,c,d,e,f){if(void 0===b.l)return null;b.v&&(d=Sc(b.v,d,0),d=b.v[d]);1==e||b.ra&&void 0!==b.I||(e=1);c=c.slice();var g=(c[0]+c[2])/2,h=(c[1]+c[3])/2,k=d/e,l=Qb(c)/k,k=Rb(c)/k,n=b.i;if(n&&b.D==b.f&&n.S()==d&&n.c==e&&Jb(n.G(),c))return n;if(1!=b.g){var n=b.g*Qb(c)/2,q=b.g*Rb(c)/2;c[0]=g-n;c[1]=h-q;c[2]=g+n;c[3]=h+q}g={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};Ua(g,b.a);b.A[0]=Math.ceil(l*b.g);b.A[1]=Math.ceil(k*b.g);f=bg(b,c,b.A,e,f,g);b.i=new Gf(c,
d,e,b.o(),f,b.ha,b.sa);b.D=b.f;I(b.i,"change",b.X,b);return b.i}
function bg(b,c,d,e,f,g){g[b.j?"CRS":"SRS"]=f.a;"STYLES"in b.a||(g.STYLES=new String(""));if(1!=e)switch(b.I){case "geoserver":e=90*e+.5|0;g.FORMAT_OPTIONS="FORMAT_OPTIONS"in g?g.FORMAT_OPTIONS+(";dpi:"+e):"dpi:"+e;break;case "mapserver":g.MAP_RESOLUTION=90*e;break;case "carmentaserver":case "qgis":g.DPI=90*e}g.WIDTH=d[0];g.HEIGHT=d[1];d=f.g;var h;b.j&&"ne"==d.substr(0,2)?h=[c[1],c[0],c[3],c[2]]:h=c;g.BBOX=h.join(",");return uf(yf([b.l],g))}function Zf(b){b.j=0<=Ia(b.a.VERSION||"1.3.0","1.3")};function cg(b,c){var d=/\{z\}/g,e=/\{x\}/g,f=/\{y\}/g,g=/\{-y\}/g;return function(h){if(h)return b.replace(d,h[0].toString()).replace(e,h[1].toString()).replace(f,function(){return(-h[2]-1).toString()}).replace(g,function(){var b=c.a?c.a[h[0]]:null;return(b.f-b.c+1+h[2]).toString()})}}function dg(b,c){for(var d=b.length,e=Array(d),f=0;f<d;++f)e[f]=cg(b[f],c);return eg(e)}function eg(b){return 1===b.length?b[0]:function(c,d,e){if(c)return b[zb((c[1]<<c[0])+c[2],b.length)](c,d,e)}}function fg(){}
function gg(b){var c=[],d=/\{(\d)-(\d)\}/.exec(b)||/\{([a-z])-([a-z])\}/.exec(b);if(d){var e=d[2].charCodeAt(0),f;for(f=d[1].charCodeAt(0);f<=e;++f)c.push(b.replace(d[0],String.fromCharCode(f)))}else c.push(b);return c};function hg(b,c){ib.call(this);this.oa=b;this.state=c;this.a=null;this.key=""}y(hg,ib);function ig(b){b.B("change")}hg.prototype.cc=function(){return w(this).toString()};hg.prototype.T=function(){return this.state};function jg(b,c,d,e,f){hg.call(this,b,c);this.g=d;this.b=new Image;null!==e&&(this.b.crossOrigin=e);this.f={};this.c=null;this.i=f}y(jg,hg);m=jg.prototype;m.L=function(){1==this.state&&kg(this);this.a&&hb(this.a);jg.U.L.call(this)};m.Qc=function(b){if(void 0!==b){var c=w(b);if(c in this.f)return this.f[c];b=Wa(this.f)?this.b:this.b.cloneNode(!1);return this.f[c]=b}return this.b};m.cc=function(){return this.g};m.xi=function(){this.state=3;kg(this);ig(this)};
m.yi=function(){this.state=this.b.naturalWidth&&this.b.naturalHeight?2:4;kg(this);ig(this)};m.load=function(){0==this.state&&(this.state=1,ig(this),this.c=[I(this.b,"error",this.xi,this,!0),I(this.b,"load",this.yi,this,!0)],this.i(this,this.g))};function kg(b){b.c.forEach(G);b.c=null};function lg(){this.c=0;this.f={};this.a=this.b=null}m=lg.prototype;m.clear=function(){this.c=0;this.f={};this.a=this.b=null};m.forEach=function(b,c){for(var d=this.b;d;)b.call(c,d.wb,d.Sd,this),d=d.Ha};m.get=function(b){b=this.f[b];if(b===this.a)return b.wb;b===this.b?(this.b=this.b.Ha,this.b.cb=null):(b.Ha.cb=b.cb,b.cb.Ha=b.Ha);b.Ha=null;b.cb=this.a;this.a=this.a.Ha=b;return b.wb};m.Pa=function(){return this.c};m.ya=function(){var b=Array(this.c),c=0,d;for(d=this.a;d;d=d.cb)b[c++]=d.Sd;return b};
m.za=function(){var b=Array(this.c),c=0,d;for(d=this.a;d;d=d.cb)b[c++]=d.wb;return b};m.pop=function(){var b=this.b;delete this.f[b.Sd];b.Ha&&(b.Ha.cb=null);this.b=b.Ha;this.b||(this.a=null);--this.c;return b.wb};m.replace=function(b,c){this.get(b);this.f[b].wb=c};m.set=function(b,c){var d={Sd:b,Ha:null,cb:this.a,wb:c};this.a?this.a.Ha=d:this.b=d;this.a=d;this.f[b]=d;++this.c};function mg(b){lg.call(this);this.g=void 0!==b?b:2048}y(mg,lg);function ng(b){return b.Pa()>b.g}function og(b,c){for(var d,e;ng(b)&&!(d=b.b.wb,e=d.oa[0].toString(),e in c&&c[e].contains(d.oa));)b.pop().Db()};function pg(b,c,d,e,f,g,h,k,l,n,q){hg.call(this,f,0);this.A=void 0!==q?q:!1;this.v=h;this.o=k;this.c=null;this.f={};this.g=c;this.j=e;this.u=g?g:f;this.b=[];this.Pb=null;this.i=0;g=qg(e,this.u);k=this.j.G();f=this.g.G();g=k?Ub(g,k):g;if(0===Ob(g))this.state=4;else if((k=b.G())&&(f?f=Ub(f,k):f=k),e=e.S(this.u[0]),e=Jf(b,d,Sb(g),e),!isFinite(e)||0>=e)this.state=4;else if(this.l=new Mf(b,d,g,f,e*(void 0!==n?n:.5)),0===this.l.c.length)this.state=4;else if(this.i=rg(c,e),d=Of(this.l),f&&(b.b?(d[1]=Ce(d[1],
f[1],f[3]),d[3]=Ce(d[3],f[1],f[3])):d=Ub(d,f)),Ob(d))if(b=sg(c,d,this.i),100>(b.a-b.b+1)*(b.f-b.c+1)){for(c=b.b;c<=b.a;c++)for(d=b.c;d<=b.f;d++)(n=l(this.i,c,d,h))&&this.b.push(n);0===this.b.length&&(this.state=4)}else this.state=3;else this.state=4}y(pg,hg);pg.prototype.L=function(){1==this.state&&(this.Pb.forEach(G),this.Pb=null);pg.U.L.call(this)};pg.prototype.Qc=function(b){if(void 0!==b){var c=w(b);if(c in this.f)return this.f[c];b=Wa(this.f)?this.c:this.c.cloneNode(!1);return this.f[c]=b}return this.c};
pg.prototype.hc=function(){var b=[];this.b.forEach(function(c){c&&2==c.T()&&b.push({extent:qg(this.g,c.oa),image:c.Qc()})},this);this.b.length=0;if(0===b.length)this.state=3;else{var c=this.u[0],d=tg(this.j,c),e=ha(d)?d:d[0],d=ha(d)?d:d[1],c=this.j.S(c),f=this.g.S(this.i),g=qg(this.j,this.u);this.c=Lf(e,d,this.v,f,this.g.G(),c,g,this.l,b,this.o,this.A);this.state=2}ig(this)};
pg.prototype.load=function(){if(0==this.state){this.state=1;ig(this);var b=0;this.Pb=[];this.b.forEach(function(c){var d=c.T();if(0==d||1==d){b++;var e;e=I(c,"change",function(){var d=c.T();if(2==d||3==d||4==d)G(e),b--,0===b&&(this.Pb.forEach(G),this.Pb=null,this.hc())},this);this.Pb.push(e)}},this);this.b.forEach(function(b){0==b.T()&&b.load()});0===b&&t.setTimeout(this.hc.bind(this),0)}};function ug(b){this.Ga=void 0!==b.Ga?b.Ga:0;this.f=b.Ca;this.Ra=this.f.length-1;this.b=void 0!==b.origin?b.origin:null;this.g=null;void 0!==b.Sc&&(this.g=b.Sc);var c=b.extent;void 0===c||this.b||this.g||(this.b=[c[0],c[3]]);this.i=null;void 0!==b.bd&&(this.i=b.bd);this.j=void 0!==b.tileSize?b.tileSize:this.i?null:256;this.l=void 0!==c?c:null;this.a=null;void 0!==b.sizes?this.a=b.sizes.map(function(b){return new Ee(Math.min(0,b[0]),Math.max(b[0]-1,-1),Math.min(0,b[1]),Math.max(b[1]-1,-1))},this):c&&
vg(this,c);this.c=[0,0]}var wg=[0,0,0];function xg(b,c,d,e,f,g){g=qg(b,c,g);for(c=c[0]-1;c>=b.Ga;){if(d.call(e,c,sg(b,g,c,f)))return!0;--c}return!1}ug.prototype.G=function(){return this.l};ug.prototype.Qa=function(b){return this.b?this.b:this.g[b]};ug.prototype.S=function(b){return this.f[b]};function yg(b,c,d,e){return c[0]<b.Ra?(e=qg(b,c,e),sg(b,e,c[0]+1,d)):null}
function zg(b,c,d,e){Ag(b,c[0],c[1],d,!1,wg);var f=wg[1],g=wg[2];Ag(b,c[2],c[3],d,!0,wg);b=wg[1];c=wg[2];void 0!==e?(e.b=f,e.a=b,e.c=g,e.f=c):e=new Ee(f,b,g,c);return e}function sg(b,c,d,e){d=b.S(d);return zg(b,c,d,e)}function Bg(b,c){var d=b.Qa(c[0]),e=b.S(c[0]),f=Db(tg(b,c[0]),b.c);return[d[0]+(c[1]+.5)*f[0]*e,d[1]+(c[2]+.5)*f[1]*e]}function qg(b,c,d){var e=b.Qa(c[0]),f=b.S(c[0]);b=Db(tg(b,c[0]),b.c);var g=e[0]+c[1]*b[0]*f;c=e[1]+c[2]*b[1]*f;return Kb(g,c,g+b[0]*f,c+b[1]*f,d)}
function Ag(b,c,d,e,f,g){var h=rg(b,e),k=e/b.S(h),l=b.Qa(h);b=Db(tg(b,h),b.c);c=k*Math.floor((c-l[0])/e+(f?.5:0))/b[0];d=k*Math.floor((d-l[1])/e+(f?0:.5))/b[1];f?(c=Math.ceil(c)-1,d=Math.ceil(d)-1):(c=Math.floor(c),d=Math.floor(d));f=c;void 0!==g?(g[0]=h,g[1]=f,g[2]=d):g=[h,f,d];return g}function Cg(b,c,d){d=b.S(d);return Ag(b,c[0],c[1],d,!1,void 0)}function tg(b,c){return b.j?b.j:b.i[c]}function rg(b,c){var d=Sc(b.f,c,0);return Ce(d,b.Ga,b.Ra)}
function vg(b,c){for(var d=b.f.length,e=Array(d),f=b.Ga;f<d;++f)e[f]=sg(b,c,f);b.a=e}function Dg(b){var c=b.j;if(!c){for(var c=Eg(b),d=Rb(c),e=Qb(c),f=Db(256),d=Math.max(e/f[0],d/f[1]),e=Array(43),f=0;43>f;++f)e[f]=d/Math.pow(2,f);c=new ug({extent:c,origin:[c[0],c[3]],Ca:e,tileSize:void 0});b.j=c}return c}function Eg(b){b=Oe(b);var c=b.G();c||(b=180*Ke.degrees/Te(b),c=Kb(-b,-b,b,b));return c};function Fg(b){ff.call(this,{ca:b.ca,extent:b.extent,ea:b.ea,projection:b.projection,state:b.state,wrapX:b.wrapX});this.Na=void 0!==b.ec?b.ec:!1;this.D=void 0!==b.ub?b.ub:1;this.pa=void 0!==b.pa?b.pa:null;this.c=new mg(b.Oe);this.I=[0,0]}y(Fg,ff);m=Fg.prototype;m.vf=function(){return ng(this.c)};m.wf=function(b,c){var d=this.ac(b);d&&og(d,c)};
function Gg(b,c,d,e,f){c=b.ac(c);if(!c)return!1;for(var g=!0,h,k,l=e.b;l<=e.a;++l)for(var n=e.c;n<=e.f;++n)h=b.Fc(d,l,n),k=!1,c.f.hasOwnProperty(h)&&(h=c.get(h),(k=2===h.T())&&(k=!1!==f(h))),k||(g=!1);return g}m.Xe=function(){return 0};m.$e=function(){return""};m.Fc=function(b,c,d){return b+"/"+c+"/"+d};m.Gc=function(){return this.Na};m.Za=function(b){return this.pa?this.pa:Dg(b)};m.ac=function(b){var c=this.Y();return c&&!af(c,b)?null:this.c};
function Hg(b,c,d){var e=void 0!==d?d:b.Y();d=b.Za(e);if(b.C&&e.f){var f=c;c=f[0];b=Bg(d,f);var e=Eg(e),g=b[0],h=b[1];e[0]<=g&&g<=e[2]&&e[1]<=h&&h<=e[3]?c=f:(f=Qb(e),b[0]+=f*Math.ceil((e[0]-b[0])/f),c=Cg(d,b,c))}e=c[0];b=c[1];f=c[2];d=d.Ga>e||e>d.Ra?!1:(d=(g=d.G())?sg(d,g,e):d.a?d.a[e]:null)?Fe(d,b,f):!0;return d?c:null}m.$f=Md;function Kg(b,c){Sa.call(this,b);this.tile=c}y(Kg,Sa);function Lg(b){Fg.call(this,{ca:b.ca,Oe:b.Oe,extent:b.extent,ea:b.ea,ec:b.ec,projection:b.projection,state:b.state,pa:b.pa,ub:b.ub,wrapX:b.wrapX});this.tb=b.tb;this.vb=this.j?this.j.bind(this):fg;this.Va=null;if(b.Va){var c=b.Va;this.Va=c;Mg(this,this.j?this.j.bind(this):dg(c,this.pa))}else b.url&&(c=this.Va=gg(b.url),Mg(this,this.j?this.j.bind(this):dg(c,this.pa)));b.vb&&Mg(this,b.vb)}y(Lg,Fg);
Lg.prototype.X=function(b){b=b.target;switch(b.T()){case 1:this.B(new Kg("tileloadstart",b));break;case 2:this.B(new Kg("tileloadend",b));break;case 3:this.B(new Kg("tileloaderror",b))}};function Mg(b,c){b.c.clear();b.vb=c;b.b()}Lg.prototype.$f=function(b,c,d){b=this.Fc(b,c,d);this.c.f.hasOwnProperty(b)&&this.c.get(b)};function Ng(b){Lg.call(this,{ca:b.ca,extent:b.extent,ea:b.ea,ec:b.ec,projection:b.projection,state:b.state,pa:b.pa,tb:b.tb?b.tb:Og,ub:b.ub,vb:b.vb,url:b.url,Va:b.Va,wrapX:b.wrapX});this.crossOrigin=void 0!==b.crossOrigin?b.crossOrigin:null;this.lc=void 0!==b.lc?b.lc:jg;this.g={};this.v={};this.Wa=b.Pf}y(Ng,Lg);m=Ng.prototype;m.vf=function(){if(ng(this.c))return!0;for(var b in this.g)if(ng(this.g[b]))return!0;return!1};
m.wf=function(b,c){var d=this.ac(b);og(this.c,this.c==d?c:{});for(var e in this.g){var f=this.g[e];og(f,f==d?c:{})}};m.Xe=function(b){return this.Y()&&b&&this.Y(),0};m.Gc=function(b){return this.Y()&&b&&!af(this.Y(),b)?!1:Ng.U.Gc.call(this,b)};m.Za=function(b){var c=this.Y();return!this.pa||c&&!af(c,b)?(c=w(b).toString(),c in this.v||(this.v[c]=Dg(b)),this.v[c]):this.pa};m.ac=function(b){var c=this.Y();if(!c||af(c,b))return this.c;b=w(b).toString();b in this.g||(this.g[b]=new mg);return this.g[b]};
function Pg(b,c,d,e,f,g,h){c=[c,d,e];f=(d=Hg(b,c,g))?b.vb(d,f,g):void 0;f=new b.lc(c,void 0!==f?0:4,void 0!==f?f:"",b.crossOrigin,b.tb);f.key=h;I(f,"change",b.X,b);return f}function Qg(b,c,d,e,f,g){if(b.Y()&&g&&!af(b.Y(),g)){f=b.ac(g);d=[c,d,e];c=b.Fc.apply(b,d);if(f.f.hasOwnProperty(c))return f.get(c);var h=b.Y();e=b.Za(h);var k=b.Za(g),l=Hg(b,d,g);b=new pg(h,e,g,k,d,l,b.D,0,function(b,c,d,e){return Rg(this,b,c,d,e,h)}.bind(b),b.Wa,!1);f.set(c,b);return b}return Rg(b,c,d,e,f,g)}
function Rg(b,c,d,e,f,g){var h=null,k=b.Fc(c,d,e),l=b.$e();if(b.c.f.hasOwnProperty(k)){if(h=b.c.get(k),h.key!=l){var n=h;h.a&&h.a.key==l?(h=h.a,2==n.T()&&(h.a=n)):(h=Pg(b,c,d,e,f,g,l),2==n.T()?h.a=n:n.a&&2==n.a.T()&&(h.a=n.a,n.a=null));h.a&&(h.a.a=null);b.c.replace(k,h)}}else h=Pg(b,c,d,e,f,g,l),b.c.set(k,h);return h}function Og(b,c){b.Qc().src=c};function Sg(b){this.u=b.Xd;ug.call(this,{extent:b.extent,origin:b.origin,Sc:b.Sc,Ca:b.Ca,tileSize:b.tileSize,bd:b.bd,sizes:b.sizes})}y(Sg,ug);
function Tg(b,c){var d=[],e=[],f=[],g=[],h=[],k;k=Oe(b.SupportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"));var l=Te(k),n="ne"==k.g.substr(0,2);b.TileMatrix.sort(function(b,c){return c.ScaleDenominator-b.ScaleDenominator});b.TileMatrix.forEach(function(b){e.push(b.Identifier);var c=2.8E-4*b.ScaleDenominator/l,k=b.TileWidth,u=b.TileHeight;n?f.push([b.TopLeftCorner[1],b.TopLeftCorner[0]]):f.push(b.TopLeftCorner);d.push(c);g.push(k==u?k:[k,u]);h.push([b.MatrixWidth,-b.MatrixHeight])});
return new Sg({extent:c,Sc:f,Ca:d,Xd:e,bd:g,sizes:h})};function Ug(b){function c(b){b="KVP"==e?uf(yf([b],g)):b.replace(/\{(\w+?)\}/g,function(b,c){return c.toLowerCase()in g?g[c.toLowerCase()]:b});return function(c){if(c){var d={TileMatrix:f.u[c[0]],TileCol:c[1],TileRow:-c[2]-1};Ua(d,h);c=b;return c="KVP"==e?uf(yf([c],d)):c.replace(/\{(\w+?)\}/g,function(b,c){return d[c]})}}}this.sa=void 0!==b.version?b.version:"1.0.0";this.ha=void 0!==b.format?b.format:"image/jpeg";this.i=void 0!==b.dimensions?b.dimensions:{};this.l="";Vg(this);this.A=b.layer;this.P=
b.matrixSet;this.ra=b.style;var d=b.Va;void 0===d&&void 0!==b.url&&(d=gg(b.url));var e=this.Xa=void 0!==b.requestEncoding?b.requestEncoding:"KVP",f=b.pa,g={layer:this.A,style:this.ra,tilematrixset:this.P};"KVP"==e&&Ua(g,{Service:"WMTS",Request:"GetTile",Version:this.sa,Format:this.ha});var h=this.i,k=d&&0<d.length?eg(d.map(c)):fg;Ng.call(this,{ca:b.ca,crossOrigin:b.crossOrigin,ea:b.ea,projection:b.projection,Pf:b.Pf,lc:b.lc,pa:f,tb:b.tb,ub:b.ub,vb:k,Va:d,wrapX:void 0!==b.wrapX?b.wrapX:!1})}y(Ug,Ng);
Ug.prototype.$e=function(){return this.l};Ug.prototype.ma=function(){return this.A};function Vg(b){var c=0,d=[],e;for(e in b.i)d[c++]=e+"-"+b.i[e];b.l=d.join("/")}
function Wg(b,c){var d=Vc(b.Contents.Layer,function(b){return b.Identifier==c.layer}),e=b.Contents.TileMatrixSet,f,g;f=1<d.TileMatrixSetLink.length?"projection"in c?Zc(d.TileMatrixSetLink,function(b){return Vc(e,function(c){return c.Identifier==b.TileMatrixSet}).SupportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3")==c.projection}):Zc(d.TileMatrixSetLink,function(b){return b.TileMatrixSet==c.matrixSet}):0;0>f&&(f=0);g=d.TileMatrixSetLink[f].TileMatrixSet;var h=d.Format[0];"format"in c&&
(h=c.format);f=Zc(d.Style,function(b){return"style"in c?b.Title==c.style:b.isDefault});0>f&&(f=0);f=d.Style[f].Identifier;var k={};"Dimension"in d&&d.Dimension.forEach(function(b){var c=b.Identifier,d=b.Default;void 0===d&&(d=b.Value[0]);k[c]=d});var l=Vc(b.Contents.TileMatrixSet,function(b){return b.Identifier==g}),n;n="projection"in c?Oe(c.projection):Oe(l.SupportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"));var q=d.WGS84BoundingBox,p,r;void 0!==q&&(r=Oe("EPSG:4326").G(),r=q[0]==
r[0]&&q[2]==r[2],p=ef(q,"EPSG:4326",n),(q=n.G())&&(Jb(q,p)||(p=void 0)));var l=Tg(l,p),u=[];p=c.requestEncoding;p=void 0!==p?p:"";if(b.hasOwnProperty("OperationsMetadata")&&b.OperationsMetadata.hasOwnProperty("GetTile")&&0!==p.indexOf("REST"))for(var d=b.OperationsMetadata.GetTile.DCP.HTTP.Get,q=0,v=d.length;q<v;++q){var A=Vc(d[q].Constraint,function(b){return"GetEncoding"==b.name}).AllowedValues.Value;0<A.length&&0<=A.indexOf("KVP")&&(p="KVP",u.push(d[q].href))}else p="REST",d.ResourceURL.forEach(function(b){"tile"==
b.resourceType&&(h=b.format,u.push(b.template))});return{Va:u,layer:c.layer,matrixSet:g,format:h,projection:n,requestEncoding:p,pa:l,style:f,dimensions:k,wrapX:r}};function Xg(b,c){this.b=b;this.a=c}Xg.$inject=["$q","$http"];Xg.prototype.yd=function(b,c){return new qf({source:new Yf({url:b,params:{LAYERS:c}})})};Xg.prototype.createBasicWMSLayer=Xg.prototype.yd;
Xg.prototype.zd=function(b,c){var d=new ne,e=new rf,f=this.b;return this.a.get(b).then(function(g){var h;g.data&&(h=d.read(g.data));return void 0!==h?(g=Wg(h,{layer:c,requestEncoding:"REST"}),pf(e,new Ug(g)),h=Ma(h.Contents.Layer,function(b){return b.Identifier==c}),e.set("capabilitiesStyles",h.Style),f.resolve(e)):f.reject("Failed to get WMTS capabilities from "+b)})};Xg.prototype.createWMTSLayerFromCapabilitites=Xg.prototype.zd;
Xg.prototype.xd=function(b){var c=new kf;null!=b&&c.set("layers",b);return c};Xg.prototype.createBasicGroup=Xg.prototype.xd;Xg.prototype.Ld=function(b,c){var d;rb(lf(Yg(b))).some(function(b){return b.get("groupName")===c?(d=b,!0):!1});d||(d=this.xd(),d.set("groupName",c),Zg(b,d));return d};Xg.prototype.getGroupFromMap=Xg.prototype.Ld;Xg.prototype.Ec=function(b){return $g(this,b,[])};Xg.prototype.getFlatLayers=Xg.prototype.Ec;
function $g(b,c,d){c instanceof kf?lf(c).forEach(function(b){$g(this,b,d)},b):0>d.indexOf(c)&&d.push(c);return d}Xg.prototype.Nd=function(b,c){var d=null;c.some(function(c){c instanceof kf?(c=rb(lf(c)),d=this.Nd(b,c)):c.get("layerName")===b&&(d=c);return d?!0:!1},this);return d};Xg.prototype.getLayerByName=Xg.prototype.Nd;z.service("ngeoLayerHelper",Xg);function ah(b,c,d,e,f){ib.call(this);this.f=d;this.b=b;this.g=c;this.Aa=e;this.c=f;this.a=null}y(ah,ib);ah.$inject=["$http","gmfTreeUrl","$q","ngeoLayerHelper","gettextCatalog"];function bh(b,c){return Ma(b,function(b){return b.name===c})}
function ch(b){var c=b.f,d=function(b){b=b.background_layers.map(function(b){function d(b,c){c.set("label",b.name);c.set("metadata",b.metadata);return c}if("WMTS"===b.type)return this.Aa.zd(b.url,b.name).then(d.bind(this,b)).then(null,function(b){console.error(b||"unknown error");return c.resolve(void 0)})},this);return c.all(b)}.bind(b);return b.a.then(d).then(function(b){var c=[];c.push(new rf({label:this.c.getString("blank"),metadata:{thumbnail:""}}));b.forEach(function(b){b&&c.push(b)});return c}.bind(b))}
ah.prototype.dh=function(b){return this.a.then(function(c){return bh(c.themes,b)})};ah.prototype.getThemeObject=ah.prototype.dh;ah.prototype.$b=function(){return this.a.then(function(b){return b.themes})};ah.prototype.getThemesObject=ah.prototype.$b;ah.prototype.mf=function(b){var c=function(b){this.B("load");return b.data}.bind(this);this.a=this.b.get(this.g,{params:void 0!==b?{role:b}:{},cache:!1,withCredentials:!0}).then(c)};ah.prototype.loadThemes=ah.prototype.mf;B.service("gmfThemes",ah);function dh(b){return function(){return b}}var eh=dh(!1),fh=dh(!0);function gh(b){var c;c=c||0;return function(){return b.apply(this,Array.prototype.slice.call(arguments,0,c))}}function hh(b){var c=arguments,d=c.length;return function(){for(var b=0;b<d;b++)if(!c[b].apply(this,arguments))return!1;return!0}};function ih(){mb.call(this);this.o=Fb();this.v=-1;this.i={};this.l=this.j=0}y(ih,mb);ih.prototype.G=function(b){this.v!=this.f&&(this.o=this.zc(this.o),this.v=this.f);var c=this.o;b?(b[0]=c[0],b[1]=c[1],b[2]=c[2],b[3]=c[3]):b=c;return b};ih.prototype.transform=function(b,c){this.uc(bf(b,c));return this};var jh=/^#(?:[0-9a-f]{3}){1,2}$/i,kh=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i,lh=/^(?:rgba)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|1|0\.\d{0,10})\)$/i;function mh(b){return ea(b)?b:nh(b)}function oh(b){if("string"!==typeof b){var c=b[0];c!=(c|0)&&(c=c+.5|0);var d=b[1];d!=(d|0)&&(d=d+.5|0);var e=b[2];e!=(e|0)&&(e=e+.5|0);b="rgba("+c+","+d+","+e+","+b[3]+")"}return b}
var nh=function(){var b={},c=0;return function(d){var e;if(b.hasOwnProperty(d))e=b[d];else{if(1024<=c){e=0;for(var f in b)0===(e++&3)&&(delete b[f],--c)}var g,h;jh.exec(d)?(h=3==d.length-1?1:2,e=parseInt(d.substr(1+0*h,h),16),f=parseInt(d.substr(1+1*h,h),16),g=parseInt(d.substr(1+2*h,h),16),1==h&&(e=(e<<4)+e,f=(f<<4)+f,g=(g<<4)+g),e=[e,f,g,1]):(h=lh.exec(d))?(e=Number(h[1]),f=Number(h[2]),g=Number(h[3]),h=Number(h[4]),e=[e,f,g,h],e=ph(e,e)):(h=kh.exec(d))?(e=Number(h[1]),f=Number(h[2]),g=Number(h[3]),
e=[e,f,g,1],e=ph(e,e)):e=void 0;b[d]=e;++c}return e}}();function ph(b,c){var d=c||[];d[0]=Ce(b[0]+.5|0,0,255);d[1]=Ce(b[1]+.5|0,0,255);d[2]=Ce(b[2]+.5|0,0,255);d[3]=Ce(b[3],0,1);return d};function qh(b){return"string"===typeof b||b instanceof CanvasPattern||b instanceof CanvasGradient?b:oh(b)};var rh="undefined"!==typeof navigator?navigator.userAgent.toLowerCase():"",sh=-1!==rh.indexOf("firefox"),th=-1!==rh.indexOf("safari")&&-1===rh.indexOf("chrom"),uh=-1!==rh.indexOf("macintosh"),vh=t.devicePixelRatio||1,wh=!1,xh=function(){if(!("HTMLCanvasElement"in t))return!1;try{var b=Hf();return b?(void 0!==b.setLineDash&&(wh=!0),!0):!1}catch(c){return!1}}(),yh="geolocation"in t.navigator,zh="ontouchstart"in t,Ah="PointerEvent"in t,Bh=!!t.navigator.msPointerEnabled;var Ch=[0,0,0,1],Dh=[],Eh=[0,0,0,1];function Fh(b,c,d,e){0!==c&&(b.translate(d,e),b.rotate(c),b.translate(-d,-e))};function Gh(b){b=b||{};this.a=void 0!==b.color?b.color:null;this.b=void 0}function Hh(b){void 0===b.b&&(b.b=b.a instanceof CanvasPattern||b.a instanceof CanvasGradient?w(b.a).toString():"f"+(b.a?oh(b.a):"-"));return b.b};function Ih(b){this.M=b.opacity;this.V=b.qb;this.o=b.rotation;this.I=b.scale;this.W=b.Ua}Ih.prototype.Ia=function(){return this.I};function Jh(){this.b=-1};function Kh(){this.b=-1;this.b=64;this.a=Array(4);this.g=Array(this.b);this.c=this.f=0;this.a[0]=1732584193;this.a[1]=4023233417;this.a[2]=2562383102;this.a[3]=271733878;this.c=this.f=0}y(Kh,Jh);
function Lh(b,c,d){d||(d=0);var e=Array(16);if(ga(c))for(var f=0;16>f;++f)e[f]=c.charCodeAt(d++)|c.charCodeAt(d++)<<8|c.charCodeAt(d++)<<16|c.charCodeAt(d++)<<24;else for(f=0;16>f;++f)e[f]=c[d++]|c[d++]<<8|c[d++]<<16|c[d++]<<24;c=b.a[0];d=b.a[1];var f=b.a[2],g=b.a[3],h=0,h=c+(g^d&(f^g))+e[0]+3614090360&4294967295;c=d+(h<<7&4294967295|h>>>25);h=g+(f^c&(d^f))+e[1]+3905402710&4294967295;g=c+(h<<12&4294967295|h>>>20);h=f+(d^g&(c^d))+e[2]+606105819&4294967295;f=g+(h<<17&4294967295|h>>>15);h=d+(c^f&(g^
c))+e[3]+3250441966&4294967295;d=f+(h<<22&4294967295|h>>>10);h=c+(g^d&(f^g))+e[4]+4118548399&4294967295;c=d+(h<<7&4294967295|h>>>25);h=g+(f^c&(d^f))+e[5]+1200080426&4294967295;g=c+(h<<12&4294967295|h>>>20);h=f+(d^g&(c^d))+e[6]+2821735955&4294967295;f=g+(h<<17&4294967295|h>>>15);h=d+(c^f&(g^c))+e[7]+4249261313&4294967295;d=f+(h<<22&4294967295|h>>>10);h=c+(g^d&(f^g))+e[8]+1770035416&4294967295;c=d+(h<<7&4294967295|h>>>25);h=g+(f^c&(d^f))+e[9]+2336552879&4294967295;g=c+(h<<12&4294967295|h>>>20);h=f+
(d^g&(c^d))+e[10]+4294925233&4294967295;f=g+(h<<17&4294967295|h>>>15);h=d+(c^f&(g^c))+e[11]+2304563134&4294967295;d=f+(h<<22&4294967295|h>>>10);h=c+(g^d&(f^g))+e[12]+1804603682&4294967295;c=d+(h<<7&4294967295|h>>>25);h=g+(f^c&(d^f))+e[13]+4254626195&4294967295;g=c+(h<<12&4294967295|h>>>20);h=f+(d^g&(c^d))+e[14]+2792965006&4294967295;f=g+(h<<17&4294967295|h>>>15);h=d+(c^f&(g^c))+e[15]+1236535329&4294967295;d=f+(h<<22&4294967295|h>>>10);h=c+(f^g&(d^f))+e[1]+4129170786&4294967295;c=d+(h<<5&4294967295|
h>>>27);h=g+(d^f&(c^d))+e[6]+3225465664&4294967295;g=c+(h<<9&4294967295|h>>>23);h=f+(c^d&(g^c))+e[11]+643717713&4294967295;f=g+(h<<14&4294967295|h>>>18);h=d+(g^c&(f^g))+e[0]+3921069994&4294967295;d=f+(h<<20&4294967295|h>>>12);h=c+(f^g&(d^f))+e[5]+3593408605&4294967295;c=d+(h<<5&4294967295|h>>>27);h=g+(d^f&(c^d))+e[10]+38016083&4294967295;g=c+(h<<9&4294967295|h>>>23);h=f+(c^d&(g^c))+e[15]+3634488961&4294967295;f=g+(h<<14&4294967295|h>>>18);h=d+(g^c&(f^g))+e[4]+3889429448&4294967295;d=f+(h<<20&4294967295|
h>>>12);h=c+(f^g&(d^f))+e[9]+568446438&4294967295;c=d+(h<<5&4294967295|h>>>27);h=g+(d^f&(c^d))+e[14]+3275163606&4294967295;g=c+(h<<9&4294967295|h>>>23);h=f+(c^d&(g^c))+e[3]+4107603335&4294967295;f=g+(h<<14&4294967295|h>>>18);h=d+(g^c&(f^g))+e[8]+1163531501&4294967295;d=f+(h<<20&4294967295|h>>>12);h=c+(f^g&(d^f))+e[13]+2850285829&4294967295;c=d+(h<<5&4294967295|h>>>27);h=g+(d^f&(c^d))+e[2]+4243563512&4294967295;g=c+(h<<9&4294967295|h>>>23);h=f+(c^d&(g^c))+e[7]+1735328473&4294967295;f=g+(h<<14&4294967295|
h>>>18);h=d+(g^c&(f^g))+e[12]+2368359562&4294967295;d=f+(h<<20&4294967295|h>>>12);h=c+(d^f^g)+e[5]+4294588738&4294967295;c=d+(h<<4&4294967295|h>>>28);h=g+(c^d^f)+e[8]+2272392833&4294967295;g=c+(h<<11&4294967295|h>>>21);h=f+(g^c^d)+e[11]+1839030562&4294967295;f=g+(h<<16&4294967295|h>>>16);h=d+(f^g^c)+e[14]+4259657740&4294967295;d=f+(h<<23&4294967295|h>>>9);h=c+(d^f^g)+e[1]+2763975236&4294967295;c=d+(h<<4&4294967295|h>>>28);h=g+(c^d^f)+e[4]+1272893353&4294967295;g=c+(h<<11&4294967295|h>>>21);h=f+(g^
c^d)+e[7]+4139469664&4294967295;f=g+(h<<16&4294967295|h>>>16);h=d+(f^g^c)+e[10]+3200236656&4294967295;d=f+(h<<23&4294967295|h>>>9);h=c+(d^f^g)+e[13]+681279174&4294967295;c=d+(h<<4&4294967295|h>>>28);h=g+(c^d^f)+e[0]+3936430074&4294967295;g=c+(h<<11&4294967295|h>>>21);h=f+(g^c^d)+e[3]+3572445317&4294967295;f=g+(h<<16&4294967295|h>>>16);h=d+(f^g^c)+e[6]+76029189&4294967295;d=f+(h<<23&4294967295|h>>>9);h=c+(d^f^g)+e[9]+3654602809&4294967295;c=d+(h<<4&4294967295|h>>>28);h=g+(c^d^f)+e[12]+3873151461&4294967295;
g=c+(h<<11&4294967295|h>>>21);h=f+(g^c^d)+e[15]+530742520&4294967295;f=g+(h<<16&4294967295|h>>>16);h=d+(f^g^c)+e[2]+3299628645&4294967295;d=f+(h<<23&4294967295|h>>>9);h=c+(f^(d|~g))+e[0]+4096336452&4294967295;c=d+(h<<6&4294967295|h>>>26);h=g+(d^(c|~f))+e[7]+1126891415&4294967295;g=c+(h<<10&4294967295|h>>>22);h=f+(c^(g|~d))+e[14]+2878612391&4294967295;f=g+(h<<15&4294967295|h>>>17);h=d+(g^(f|~c))+e[5]+4237533241&4294967295;d=f+(h<<21&4294967295|h>>>11);h=c+(f^(d|~g))+e[12]+1700485571&4294967295;c=d+
(h<<6&4294967295|h>>>26);h=g+(d^(c|~f))+e[3]+2399980690&4294967295;g=c+(h<<10&4294967295|h>>>22);h=f+(c^(g|~d))+e[10]+4293915773&4294967295;f=g+(h<<15&4294967295|h>>>17);h=d+(g^(f|~c))+e[1]+2240044497&4294967295;d=f+(h<<21&4294967295|h>>>11);h=c+(f^(d|~g))+e[8]+1873313359&4294967295;c=d+(h<<6&4294967295|h>>>26);h=g+(d^(c|~f))+e[15]+4264355552&4294967295;g=c+(h<<10&4294967295|h>>>22);h=f+(c^(g|~d))+e[6]+2734768916&4294967295;f=g+(h<<15&4294967295|h>>>17);h=d+(g^(f|~c))+e[13]+1309151649&4294967295;
d=f+(h<<21&4294967295|h>>>11);h=c+(f^(d|~g))+e[4]+4149444226&4294967295;c=d+(h<<6&4294967295|h>>>26);h=g+(d^(c|~f))+e[11]+3174756917&4294967295;g=c+(h<<10&4294967295|h>>>22);h=f+(c^(g|~d))+e[2]+718787259&4294967295;f=g+(h<<15&4294967295|h>>>17);h=d+(g^(f|~c))+e[9]+3951481745&4294967295;b.a[0]=b.a[0]+c&4294967295;b.a[1]=b.a[1]+(f+(h<<21&4294967295|h>>>11))&4294967295;b.a[2]=b.a[2]+f&4294967295;b.a[3]=b.a[3]+g&4294967295}
function Mh(b,c){var d;ba(d)||(d=c.length);for(var e=d-b.b,f=b.g,g=b.f,h=0;h<d;){if(0==g)for(;h<=e;)Lh(b,c,h),h+=b.b;if(ga(c))for(;h<d;){if(f[g++]=c.charCodeAt(h++),g==b.b){Lh(b,f);g=0;break}}else for(;h<d;)if(f[g++]=c[h++],g==b.b){Lh(b,f);g=0;break}}b.f=g;b.c+=d};function Nh(b){b=b||{};this.a=void 0!==b.color?b.color:null;this.c=b.lineCap;this.f=void 0!==b.H?b.H:null;this.g=b.lineJoin;this.i=b.miterLimit;this.b=b.width;this.j=void 0}
function Oh(b){if(void 0===b.j){var c="s"+(b.a?oh(b.a):"-")+","+(void 0!==b.c?b.c.toString():"-")+","+(b.f?b.f.toString():"-")+","+(void 0!==b.g?b.g:"-")+","+(void 0!==b.i?b.i.toString():"-")+","+(void 0!==b.b?b.b.toString():"-"),d=new Kh;Mh(d,c);c=Array((56>d.f?d.b:2*d.b)-d.f);c[0]=128;for(var e=1;e<c.length-8;++e)c[e]=0;for(var f=8*d.c,e=c.length-8;e<c.length;++e)c[e]=f&255,f/=256;Mh(d,c);c=Array(16);for(e=f=0;4>e;++e)for(var g=0;32>g;g+=8)c[f++]=d.a[e]>>>g&255;if(8192>=c.length)d=String.fromCharCode.apply(null,
c);else for(d="",e=0;e<c.length;e+=8192)f=Ra(c,e,e+8192),d+=String.fromCharCode.apply(null,f);b.j=d}return b.j};function Ph(b){b=b||{};this.i=this.a=this.c=null;this.g=void 0!==b.fill?b.fill:null;this.b=void 0!==b.stroke?b.stroke:null;this.f=b.radius;this.l=[0,0];this.u=this.v=this.j=null;var c=b.Dg,d,e=null,f,g=0;this.b&&(f=oh(this.b.a),g=this.b.b,void 0===g&&(g=1),e=this.b.f,wh||(e=null));var h=2*(this.f+g)+1;f={strokeStyle:f,strokeWidth:g,size:h,H:e};if(void 0===c)this.a=document.createElement("CANVAS"),this.a.height=h,this.a.width=h,d=h=this.a.width,c=this.a.getContext("2d"),this.zf(f,c,0,0),this.g?this.i=
this.a:(c=this.i=document.createElement("CANVAS"),c.height=f.size,c.width=f.size,c=c.getContext("2d"),this.yf(f,c,0,0));else{h=Math.round(h);(e=!this.g)&&(d=this.yf.bind(this,f));var g=this.b?Oh(this.b):"-",k=this.g?Hh(this.g):"-";this.c&&g==this.c[1]&&k==this.c[2]&&this.f==this.c[3]||(this.c=["c"+g+k+(void 0!==this.f?this.f.toString():"-"),g,k,this.f]);f=c.a(this.c[0],h,h,this.zf.bind(this,f),d);this.a=f.image;this.l=[f.offsetX,f.offsetY];d=f.image.width;this.i=e?f.Ph:this.a}this.j=[h/2,h/2];this.v=
[h,h];this.u=[d,d];Ih.call(this,{opacity:1,qb:!1,rotation:0,scale:1,Ua:void 0!==b.Ua?b.Ua:!0})}y(Ph,Ih);m=Ph.prototype;m.Yb=function(){return this.j};m.$d=function(){return this.i};m.Rc=function(){return this.a};m.dc=function(){return 2};m.Md=function(){return this.u};m.Qa=function(){return this.l};m.ob=function(){return this.v};m.Wd=Md;m.load=Md;m.qe=Md;
m.zf=function(b,c,d,e){c.setTransform(1,0,0,1,0,0);c.translate(d,e);c.beginPath();c.arc(b.size/2,b.size/2,this.f,0,2*Math.PI,!0);this.g&&(c.fillStyle=qh(this.g.a),c.fill());this.b&&(c.strokeStyle=b.strokeStyle,c.lineWidth=b.strokeWidth,b.H&&c.setLineDash(b.H),c.stroke());c.closePath()};
m.yf=function(b,c,d,e){c.setTransform(1,0,0,1,0,0);c.translate(d,e);c.beginPath();c.arc(b.size/2,b.size/2,this.f,0,2*Math.PI,!0);c.fillStyle=oh(Ch);c.fill();this.b&&(c.strokeStyle=b.strokeStyle,c.lineWidth=b.strokeWidth,b.H&&c.setLineDash(b.H),c.stroke());c.closePath()};function Qh(b){b=b||{};this.i=null;this.f=Rh;void 0!==b.geometry&&Sh(this,b.geometry);this.c=void 0!==b.fill?b.fill:null;this.g=void 0!==b.image?b.image:null;this.b=void 0!==b.stroke?b.stroke:null;this.j=void 0!==b.text?b.text:null;this.a=b.zIndex}Qh.prototype.J=function(){return this.i};Qh.prototype.va=function(){return this.j};function Sh(b,c){ia(c)?b.f=c:"string"===typeof c?b.f=function(b){return b.get(c)}:c?void 0!==c&&(b.f=function(){return c}):b.f=Rh;b.i=c}
function Th(b){if(!ia(b)){var c;c=ea(b)?b:[b];b=function(){return c}}return b}var Uh=null;function Vh(){if(!Uh){var b=new Gh({color:"rgba(255,255,255,0.4)"}),c=new Nh({color:"#3399CC",width:1.25});Uh=[new Qh({image:new Ph({fill:b,stroke:c,radius:5}),fill:b,stroke:c})]}return Uh}
function Wh(){var b={},c=[255,255,255,1],d=[0,153,255,1];b.Polygon=[new Qh({fill:new Gh({color:[255,255,255,.5]})})];b.MultiPolygon=b.Polygon;b.LineString=[new Qh({stroke:new Nh({color:c,width:5})}),new Qh({stroke:new Nh({color:d,width:3})})];b.MultiLineString=b.LineString;b.Circle=b.Polygon.concat(b.LineString);b.Point=[new Qh({image:new Ph({radius:6,fill:new Gh({color:d}),stroke:new Nh({color:c,width:1.5})}),zIndex:Infinity})];b.MultiPoint=b.Point;b.GeometryCollection=b.Polygon.concat(b.LineString,
b.Point);return b}function Rh(b){return b.J()};function Xh(b){mb.call(this);this.c=void 0;this.a="geometry";this.j=null;this.i=void 0;this.g=null;I(this,L(this.a),this.Ic,this);void 0!==b&&(b instanceof ih||!b?Yh(this,b):this.ka(b))}y(Xh,mb);m=Xh.prototype;m.clone=function(){var b=new Xh(Ua({},this.u));Zh(b,this.a);var c=this.J();c&&Yh(b,c.clone());(c=this.j)&&$h(b,c);return b};m.J=function(){return this.get(this.a)};m.Ya=function(){return this.c};m.ui=function(){this.b()};
m.Ic=function(){this.g&&(G(this.g),this.g=null);var b=this.J();b&&(this.g=I(b,"change",this.ui,this));this.b()};function Yh(b,c){b.set(b.a,c)}function $h(b,c){b.j=c;b.i=c?ai(c):void 0;b.b()}function Zh(b,c){cb(b,L(b.a),b.Ic,b);b.a=c;I(b,L(b.a),b.Ic,b);b.Ic()}function ai(b){if(!ia(b)){var c;c=ea(b)?b:[b];b=function(){return c}}return b};function bi(){this.ua=null}function ci(b,c,d){var e;d&&(e={ib:d.ib?d.ib:b.f(c),Fb:d.Fb});var f;e&&(f={Fb:e.Fb,ib:e.ib?e.ib:b.ua,oj:e.oj});return f}function di(b,c,d){var e=d?Oe(d.Fb):null;d=d?Oe(d.ib):null;return e&&d&&!af(e,d)?b instanceof ih?(c?b.clone():b).transform(c?e:d,c?d:e):ef(c?b.slice():b,c?e:d,c?d:e):b};function ei(){this.ua=null}y(ei,bi);ei.prototype.aa=function(){return"xml"};ei.prototype.Uc=function(b,c){if(md(b))return fi(this,b,c);if(pd(b))return this.ee(b,c);if("string"===typeof b){var d=zd(b);return fi(this,d,c)}return[]};function fi(b,c,d){var e=[];for(c=c.firstChild;c;c=c.nextSibling)1==c.nodeType&&Tc(e,b.ee(c,d));return e}ei.prototype.f=function(b){return md(b)?this.ua:pd(b)?this.Mf(b):"string"===typeof b?(zd(b),this.ua):null};ei.prototype.Mf=function(){return this.ua};function gi(b,c,d,e,f,g){var h=f[0],k=f[1],l=f[4],n=f[5],q=f[12];f=f[13];for(var p=g?g:[],r=0;c<d;c+=e){var u=b[c],v=b[c+1];p[r++]=h*u+l*v+q;p[r++]=k*u+n*v+f}g&&p.length!=r&&(p.length=r);return p};function hi(){ih.call(this);this.layout="XY";this.a=2;this.s=null}y(hi,ih);function ii(b){if("XY"==b)return 2;if("XYZ"==b||"XYM"==b)return 3;if("XYZM"==b)return 4}m=hi.prototype;m.zc=function(b){var c=this.s,d=this.s.length,e=this.a;b=Kb(Infinity,Infinity,-Infinity,-Infinity,b);return Nb(b,c,0,d,e)};
m.Pd=function(b){this.l!=this.f&&(Va(this.i),this.j=0,this.l=this.f);if(0>b||0!==this.j&&b<=this.j)return this;var c=b.toString();if(this.i.hasOwnProperty(c))return this.i[c];var d=this.Ib(b);if(d.s.length<this.s.length)return this.i[c]=d;this.j=b;return this};m.Ib=function(){return this};function ji(b,c,d){b.a=ii(c);b.layout=c;b.s=d}
function ki(b,c,d,e){if(c)d=ii(c);else{for(c=0;c<e;++c){if(0===d.length){b.layout="XY";b.a=2;return}d=d[0]}d=d.length;c=2==d?"XY":3==d?"XYZ":4==d?"XYZM":void 0}b.layout=c;b.a=d}m.uc=function(b){this.s&&(b(this.s,this.s,this.a),this.b())};m.translate=function(b,c){var d=this.s;if(d){var e=d.length,f=this.a,g=d?d:[],h=0,k,l;for(k=0;k<e;k+=f)for(g[h++]=d[k]+b,g[h++]=d[k+1]+c,l=k+2;l<k+f;++l)g[h++]=d[l];d&&g.length!=h&&(g.length=h);this.b()}};function li(b,c){var d=0,e,f;e=0;for(f=c.length;e<f;++e)b[d++]=c[e];return d}function mi(b,c,d,e){var f,g;f=0;for(g=d.length;f<g;++f){var h=d[f],k;for(k=0;k<e;++k)b[c++]=h[k]}return c}function ni(b,c,d,e,f){f=f?f:[];var g=0,h,k;h=0;for(k=d.length;h<k;++h)c=mi(b,c,d[h],e),f[g++]=c;f.length=g;return f};function oi(b,c,d,e,f){f=void 0!==f?f:[];for(var g=0;c<d;c+=e)f[g++]=b.slice(c,c+e);f.length=g;return f}function pi(b,c,d,e,f){f=void 0!==f?f:[];var g=0,h,k;h=0;for(k=d.length;h<k;++h){var l=d[h];f[g++]=oi(b,c,l,e,f[g]);c=l}f.length=g;return f};function qi(b,c,d,e,f){var g=NaN,h=NaN,k=(d-c)/e;if(0!==k)if(1==k)g=b[c],h=b[c+1];else if(2==k)g=.5*b[c]+.5*b[c+e],h=.5*b[c+1]+.5*b[c+e+1];else{var h=b[c],k=b[c+1],l=0,g=[0],n;for(n=c+e;n<d;n+=e){var q=b[n],p=b[n+1],l=l+Math.sqrt((q-h)*(q-h)+(p-k)*(p-k));g.push(l);h=q;k=p}d=.5*l;l=0;n=g.length;for(q=!1;l<n;)h=l+(n-l>>1),k=+Qc(g[h],d),0>k?l=h+1:(n=h,q=!k);h=q?l:~l;0>h?(d=(d-g[-h-2])/(g[-h-1]-g[-h-2]),c+=(-h-2)*e,g=b[c],g=g+d*(b[c+e]-g),h=b[c+1],h=h+d*(b[c+e+1]-h)):(g=b[c+h*e],h=b[c+h*e+1])}return f?
(f[0]=g,f[1]=h,f):[g,h]};function ri(b,c,d,e,f,g){for(var h=!1,k=b[d-e],l=b[d-e+1];c<d;c+=e){var n=b[c],q=b[c+1];l>g!=q>g&&f<(n-k)*(g-l)/(q-l)+k&&(h=!h);k=n;l=q}return h};function si(b,c,d,e,f,g,h){var k=(d-c)/e;if(3>k){for(;c<d;c+=e)g[h++]=b[c],g[h++]=b[c+1];return h}var l=Array(k);l[0]=1;l[k-1]=1;d=[c,d-e];for(var n=0,q;0<d.length;){var p=d.pop(),r=d.pop(),u=0,v=b[r],A=b[r+1],x=b[p],C=b[p+1];for(q=r+e;q<p;q+=e){var H,E=b[q];H=b[q+1];var D=v,R=A,F=x-D,N=C-R;if(0!==F||0!==N){var T=((E-D)*F+(H-R)*N)/(F*F+N*N);1<T?(D=x,R=C):0<T&&(D+=F*T,R+=N*T)}E=D-E;H=R-H;H=E*E+H*H;H>u&&(n=q,u=H)}u>f&&(l[(n-c)/e]=1,r+e<n&&d.push(r,n),n+e<p&&d.push(n,p))}for(q=0;q<k;++q)l[q]&&(g[h++]=
b[c+q*e],g[h++]=b[c+q*e+1]);return h}
function ti(b,c,d,e,f,g,h,k){var l,n;l=0;for(n=d.length;l<n;++l){var q=d[l];a:{var p=b,r=q,u=e,v=f,A=g;if(c!=r){var x=v*Math.round(p[c]/v),C=v*Math.round(p[c+1]/v);c+=u;A[h++]=x;A[h++]=C;var H=void 0,E=void 0;do if(H=v*Math.round(p[c]/v),E=v*Math.round(p[c+1]/v),c+=u,c==r){A[h++]=H;A[h++]=E;break a}while(H==x&&E==C);for(;c<r;){var D,R;D=v*Math.round(p[c]/v);R=v*Math.round(p[c+1]/v);c+=u;if(D!=H||R!=E){var F=H-x,N=E-C,T=D-x,K=R-C;F*K==N*T&&(0>F&&T<F||F==T||0<F&&T>F)&&(0>N&&K<N||N==K||0<N&&K>N)||(A[h++]=
H,A[h++]=E,x=H,C=E);H=D;E=R}}A[h++]=H;A[h++]=E}}k.push(h);c=q}return h};function ui(b,c){hi.call(this);this.c=null;this.g=-1;this.Z(b,c)}y(ui,hi);m=ui.prototype;m.clone=function(){var b=new ui(null);b.K(this.layout,this.s.slice());return b};m.ja=function(){return oi(this.s,0,this.s.length,this.a)};function vi(b){if(b.g!=b.f){var c;c=qi(b.s,0,b.s.length,b.a,b.c);b.c=c;b.g=b.f}return b.c}m.Ib=function(b){var c=[];c.length=si(this.s,0,this.s.length,this.a,b,c,0);b=new ui(null);b.K("XY",c);return b};m.aa=function(){return"LineString"};
m.Z=function(b,c){b?(ki(this,c,b,1),this.s||(this.s=[]),this.s.length=mi(this.s,0,b,this.a),this.b()):this.K("XY",null)};m.K=function(b,c){ji(this,b,c);this.b()};function wi(b,c){hi.call(this);this.Z(b,c)}y(wi,hi);m=wi.prototype;m.clone=function(){var b=new wi(null);xi(b,this.layout,this.s.slice());return b};m.ja=function(){return oi(this.s,0,this.s.length,this.a)};m.Ib=function(b){var c=[];c.length=si(this.s,0,this.s.length,this.a,b,c,0);b=new wi(null);xi(b,"XY",c);return b};m.aa=function(){return"LinearRing"};m.Z=function(b,c){b?(ki(this,c,b,1),this.s||(this.s=[]),this.s.length=mi(this.s,0,b,this.a),this.b()):xi(this,"XY",null)};
function xi(b,c,d){ji(b,c,d);b.b()};function yi(b,c){hi.call(this);this.g=[];this.Z(b,c)}y(yi,hi);m=yi.prototype;m.clone=function(){var b=new yi(null);b.K(this.layout,this.s.slice(),this.g.slice());return b};m.ja=function(){return pi(this.s,0,this.g,this.a)};m.Hb=function(){return this.g};function zi(b){var c=b.s,d=b.g;b=b.layout;var e=[],f=0,g,h;g=0;for(h=d.length;g<h;++g){var k=d[g],l=new ui(null);l.K(b,c.slice(f,k));e.push(l);f=k}return e}
function Ai(b){var c=[],d=b.s,e=0,f=b.g;b=b.a;var g,h;g=0;for(h=f.length;g<h;++g){var k=f[g],e=qi(d,e,k,b);Tc(c,e);e=k}return c}m.Ib=function(b){var c=[],d=[],e=this.s,f=this.g,g=this.a,h=0,k=0,l,n;l=0;for(n=f.length;l<n;++l){var q=f[l],k=si(e,h,q,g,b,c,k);d.push(k);h=q}c.length=k;b=new yi(null);b.K("XY",c,d);return b};m.aa=function(){return"MultiLineString"};
m.Z=function(b,c){if(b){ki(this,c,b,2);this.s||(this.s=[]);var d=ni(this.s,0,b,this.a,this.g);this.s.length=0===d.length?0:d[d.length-1];this.b()}else this.K("XY",null,this.g)};m.K=function(b,c,d){ji(this,b,c);this.g=d;this.b()};function Bi(b,c){var d=b.layout,e=[],f=[],g,h;g=0;for(h=c.length;g<h;++g){var k=c[g];0===g&&(d=k.layout);Tc(e,k.s);f.push(e.length)}b.K(d,e,f)};function Ci(b,c){hi.call(this);this.Z(b,c)}y(Ci,hi);m=Ci.prototype;m.clone=function(){var b=new Ci(null);b.K(this.layout,this.s.slice());return b};m.ja=function(){return this.s?this.s.slice():[]};m.zc=function(b){var c=this.s,d=c[0],c=c[1];return Kb(d,c,d,c,b)};m.aa=function(){return"Point"};m.Z=function(b,c){b?(ki(this,c,b,0),this.s||(this.s=[]),this.s.length=li(this.s,b),this.b()):this.K("XY",null)};m.K=function(b,c){ji(this,b,c);this.b()};function Di(b,c){hi.call(this);this.Z(b,c)}y(Di,hi);m=Di.prototype;m.clone=function(){var b=new Di(null);b.K(this.layout,this.s.slice());return b};m.ja=function(){return oi(this.s,0,this.s.length,this.a)};m.aa=function(){return"MultiPoint"};m.Z=function(b,c){b?(ki(this,c,b,1),this.s||(this.s=[]),this.s.length=mi(this.s,0,b,this.a),this.b()):this.K("XY",null)};m.K=function(b,c){ji(this,b,c);this.b()};function Ei(b,c,d,e,f,g,h){var k,l,n,q,p,r=f[g+1],u=[],v=d[0];n=b[v-e];p=b[v-e+1];for(k=c;k<v;k+=e){q=b[k];l=b[k+1];if(r<=p&&l<=r||p<=r&&r<=l)n=(r-p)/(l-p)*(q-n)+n,u.push(n);n=q;p=l}v=NaN;p=-Infinity;u.sort(Qc);n=u[0];k=1;for(l=u.length;k<l;++k){q=u[k];var A=Math.abs(q-n);if(A>p){n=(n+q)/2;var x;a:if(0!==d.length&&ri(b,c,d[0],e,n,r)){var C=x=void 0;x=1;for(C=d.length;x<C;++x)if(ri(b,d[x-1],d[x],e,n,r)){x=!1;break a}x=!0}else x=!1;x&&(v=n,p=A)}n=q}isNaN(v)&&(v=f[g]);return h?(h.push(v,r),h):[v,r]}
;function Fi(b,c,d,e){for(var f=0,g=b[d-e],h=b[d-e+1];c<d;c+=e)var k=b[c],l=b[c+1],f=f+(k-g)*(l+h),g=k,h=l;return 0<f}function Gi(b,c,d,e){var f=0;e=void 0!==e?e:!1;var g,h;g=0;for(h=c.length;g<h;++g){var k=c[g],f=Fi(b,f,k,d);if(0===g){if(e&&f||!e&&!f)return!1}else if(e&&!f||!e&&f)return!1;f=k}return!0}
function Hi(b,c,d,e,f){f=void 0!==f?f:!1;var g,h;g=0;for(h=d.length;g<h;++g){var k=d[g],l=Fi(b,c,k,e);if(0===g?f&&l||!f&&!l:f&&!l||!f&&l)for(var l=b,n=k,q=e;c<n-q;){var p;for(p=0;p<q;++p){var r=l[c+p];l[c+p]=l[n-q+p];l[n-q+p]=r}c+=q;n-=q}c=k}return c}function Ii(b,c,d,e){var f=0,g,h;g=0;for(h=c.length;g<h;++g)f=Hi(b,f,c[g],d,e);return f};function Ji(b,c){hi.call(this);this.c=[];this.A=-1;this.C=null;this.D=-1;this.g=null;this.Z(b,c)}y(Ji,hi);m=Ji.prototype;m.clone=function(){var b=new Ji(null);b.K(this.layout,this.s.slice(),this.c.slice());return b};m.ja=function(b){var c;void 0!==b?(c=Ki(this).slice(),Hi(c,0,this.c,this.a,b)):c=this.s;return pi(c,0,this.c,this.a)};m.Hb=function(){return this.c};function Li(b){if(b.A!=b.f){var c=Sb(b.G());b.C=Ei(Ki(b),0,b.c,b.a,c,0);b.A=b.f}return b.C}
function Ki(b){if(b.D!=b.f){var c=b.s;Gi(c,b.c,b.a)?b.g=c:(b.g=c.slice(),b.g.length=Hi(b.g,0,b.c,b.a));b.D=b.f}return b.g}m.Ib=function(b){var c=[],d=[];c.length=ti(this.s,0,this.c,this.a,Math.sqrt(b),c,0,d);b=new Ji(null);b.K("XY",c,d);return b};m.aa=function(){return"Polygon"};m.Z=function(b,c){if(b){ki(this,c,b,2);this.s||(this.s=[]);var d=ni(this.s,0,b,this.a,this.c);this.s.length=0===d.length?0:d[d.length-1];this.b()}else this.K("XY",null,this.c)};m.K=function(b,c,d){ji(this,b,c);this.c=d;this.b()};function Mi(b,c){hi.call(this);this.c=[];this.A=-1;this.C=null;this.D=-1;this.g=null;this.Z(b,c)}y(Mi,hi);m=Mi.prototype;m.clone=function(){for(var b=new Mi(null),c=this.c.length,d=Array(c),e=0;e<c;++e)d[e]=this.c[e].slice();Ni(b,this.layout,this.s.slice(),d);return b};m.ja=function(b){var c;void 0!==b?(c=Oi(this).slice(),Ii(c,this.c,this.a,b)):c=this.s;b=c;c=this.c;var d=this.a,e=0,f=[],g=0,h,k;h=0;for(k=c.length;h<k;++h){var l=c[h];f[g++]=pi(b,e,l,d,f[g]);e=l[l.length-1]}f.length=g;return f};
function Pi(b){if(b.A!=b.f){var c=b.s,d=b.c,e=b.a,f=0,g=[],h,k,l=Fb();h=0;for(k=d.length;h<k;++h){var n=d[h],l=Nb(Kb(Infinity,Infinity,-Infinity,-Infinity,void 0),c,f,n[0],e);g.push((l[0]+l[2])/2,(l[1]+l[3])/2);f=n[n.length-1]}c=Oi(b);d=b.c;e=b.a;f=0;h=[];k=0;for(l=d.length;k<l;++k)n=d[k],h=Ei(c,f,n,e,g,2*k,h),f=n[n.length-1];b.C=h;b.A=b.f}return b.C}
function Oi(b){if(b.D!=b.f){var c=b.s,d;a:{d=b.c;var e,f;e=0;for(f=d.length;e<f;++e)if(!Gi(c,d[e],b.a,void 0)){d=!1;break a}d=!0}d?b.g=c:(b.g=c.slice(),b.g.length=Ii(b.g,b.c,b.a));b.D=b.f}return b.g}m.Ib=function(b){var c=[],d=[],e=this.s,f=this.c,g=this.a;b=Math.sqrt(b);var h=0,k=0,l,n;l=0;for(n=f.length;l<n;++l){var q=f[l],p=[],k=ti(e,h,q,g,b,c,k,p);d.push(p);h=q[q.length-1]}c.length=k;e=new Mi(null);Ni(e,"XY",c,d);return e};m.aa=function(){return"MultiPolygon"};
m.Z=function(b,c){if(b){ki(this,c,b,3);this.s||(this.s=[]);var d=this.s,e=this.a,f=this.c,g=0,f=f?f:[],h=0,k,l;k=0;for(l=b.length;k<l;++k)g=ni(d,g,b[k],e,f[h]),f[h++]=g,g=g[g.length-1];f.length=h;0===f.length?this.s.length=0:(d=f[f.length-1],this.s.length=0===d.length?0:d[d.length-1]);this.b()}else Ni(this,"XY",null,this.c)};function Ni(b,c,d,e){ji(b,c,d);b.c=e;b.b()}
function Qi(b,c){var d=b.layout,e=[],f=[],g,h,k;g=0;for(h=c.length;g<h;++g){var l=c[g];0===g&&(d=l.layout);var n=e.length;k=l.Hb();var q,p;q=0;for(p=k.length;q<p;++q)k[q]+=n;Tc(e,l.s);f.push(k)}Ni(b,d,e,f)};function Ri(b){b=b?b:{};this.Cc=b.Cc;this.Bc=b.Bc;this.ne=b.ne;this.ke="";this.a={};this.a["http://www.opengis.net/gml"]={featureMember:Cd(Ri.prototype.Vc),featureMembers:Cd(Ri.prototype.Vc)};this.ua=null}y(Ri,ei);var Si=/^[\s\xa0]*$/;m=Ri.prototype;
m.Vc=function(b,c){var d=jd(b),e;if("FeatureCollection"==d)"http://www.opengis.net/wfs"===b.namespaceURI?e=Q([],this.a,b,c,this):e=Q(null,this.a,b,c,this);else if("featureMembers"==d||"featureMember"==d){var f=c[0],g=f.featureType;e=f.featureNS;var h,k;if(!g&&b.childNodes){g=[];e={};h=0;for(k=b.childNodes.length;h<k;++h){var l=b.childNodes[h];if(1===l.nodeType){var n=l.nodeName.split(":").pop();if(-1===g.indexOf(n)){var q="",p=0,l=l.namespaceURI,r;for(r in e){if(e[r]===l){q=r;break}++p}q||(q="p"+
p,e[q]=l);g.push(q+":"+n)}}}f.featureType=g;f.featureNS=e}"string"===typeof e&&(h=e,e={},e.p0=h);r={};var g=ea(g)?g:[g],u;for(u in e){f={};h=0;for(k=g.length;h<k;++h)(-1===g[h].indexOf(":")?"p0":g[h].split(":")[0])===u&&(f[g[h].split(":").pop()]="featureMembers"==d?Ad(this.de,this):Cd(this.de,this));r[e[u]]=f}e=Q([],r,b,c)}e||(e=[]);return e};
m.de=function(b,c){var d,e=b.getAttribute("fid")||td(b,"http://www.opengis.net/gml","id"),f={},g;for(d=b.firstElementChild;d;d=d.nextElementSibling){var h=jd(d);if(0===d.childNodes.length||1===d.childNodes.length&&(3===d.firstChild.nodeType||4===d.firstChild.nodeType)){var k=fd(d);Si.test(k)&&(k=void 0);f[h]=k}else{"boundedBy"!==h&&(g=h);var l=d,n=c,k=n[0];k.srsName=l.firstElementChild.getAttribute("srsName");k=(l=Q(null,this.gg,l,n,this))?di(l,!1,k):void 0;f[h]=k}}d=new Xh(f);g&&Zh(d,g);e&&(d.c=
e,d.b());return d};m.ij=function(b,c){var d=this.Wc(b,c);if(d){var e=new Ci(null);e.K("XYZ",d);return e}};m.gj=function(b,c){var d=Q([],this.jg,b,c,this);if(d)return new Di(d)};m.fj=function(b,c){var d=Q([],this.ig,b,c,this);if(d){var e=new yi(null);Bi(e,d);return e}};m.hj=function(b,c){var d=Q([],this.kg,b,c,this);if(d){var e=new Mi(null);Qi(e,d);return e}};m.Ff=function(b,c){Jd(this.lg,b,c,this)};m.lf=function(b,c){Jd(this.hg,b,c,this)};m.Gf=function(b,c){Jd(this.mg,b,c,this)};
m.Kf=function(b,c){var d=this.Wc(b,c);if(d){var e=new ui(null);e.K("XYZ",d);return e}};m.cj=function(b,c){var d=Q(null,this.we,b,c,this);if(d)return d};m.ej=function(b,c){var d=this.Wc(b,c);if(d){var e=new wi(null);xi(e,"XYZ",d);return e}};m.Lf=function(b,c){var d=Q([null],this.fg,b,c,this);if(d&&d[0]){var e=new Ji(null),f=d[0],g=[f.length],h,k;h=1;for(k=d.length;h<k;++h)Tc(f,d[h]),g.push(f.length);e.K("XYZ",f,g);return e}};m.Wc=function(b,c){return Q(null,this.we,b,c,this)};
m.jg={"http://www.opengis.net/gml":{pointMember:Ad(Ri.prototype.Ff),pointMembers:Ad(Ri.prototype.Ff)}};m.ig={"http://www.opengis.net/gml":{lineStringMember:Ad(Ri.prototype.lf),lineStringMembers:Ad(Ri.prototype.lf)}};m.kg={"http://www.opengis.net/gml":{polygonMember:Ad(Ri.prototype.Gf),polygonMembers:Ad(Ri.prototype.Gf)}};m.lg={"http://www.opengis.net/gml":{Point:Ad(Ri.prototype.Wc)}};m.hg={"http://www.opengis.net/gml":{LineString:Ad(Ri.prototype.Kf)}};m.mg={"http://www.opengis.net/gml":{Polygon:Ad(Ri.prototype.Lf)}};
m.xe={"http://www.opengis.net/gml":{LinearRing:Cd(Ri.prototype.cj)}};m.ee=function(b,c){var d={Cc:this.Cc,Bc:this.Bc};c&&Ua(d,ci(this,b,c));return this.Vc(b,[d])};m.Mf=function(b){return Oe(this.ne?this.ne:b.firstElementChild.getAttribute("srsName"))};function Ti(b){b=b?b:{};Ri.call(this,b);this.a["http://www.opengis.net/gml"].featureMember=Ad(Ri.prototype.Vc);this.ke=b.ke?b.ke:"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd"}y(Ti,Ri);m=Ti.prototype;
m.If=function(b,c){var d=fd(b).replace(/^\s*|\s*$/g,""),e=c[0].srsName,f=b.parentNode.getAttribute("srsDimension"),g="enu";e&&(e=Oe(e))&&(g=e.g);d=d.split(/[\s,]+/);e=2;b.getAttribute("srsDimension")?e=Td(b.getAttribute("srsDimension")):b.getAttribute("dimension")?e=Td(b.getAttribute("dimension")):f&&(e=Td(f));for(var h,k,l=[],n=0,q=d.length;n<q;n+=e)f=parseFloat(d[n]),h=parseFloat(d[n+1]),k=3===e?parseFloat(d[n+2]):0,"en"===g.substr(0,2)?l.push(f,h,k):l.push(h,f,k);return l};
m.aj=function(b,c){var d=Q([null],this.eg,b,c,this);return Kb(d[1][0],d[1][1],d[1][3],d[1][4])};m.Vh=function(b,c){var d=Q(void 0,this.xe,b,c,this);d&&c[c.length-1].push(d)};m.Ni=function(b,c){var d=Q(void 0,this.xe,b,c,this);d&&(c[c.length-1][0]=d)};m.we={"http://www.opengis.net/gml":{coordinates:Cd(Ti.prototype.If)}};m.fg={"http://www.opengis.net/gml":{innerBoundaryIs:Ti.prototype.Vh,outerBoundaryIs:Ti.prototype.Ni}};m.eg={"http://www.opengis.net/gml":{coordinates:Ad(Ti.prototype.If)}};
m.gg={"http://www.opengis.net/gml":{Point:Cd(Ri.prototype.ij),MultiPoint:Cd(Ri.prototype.gj),LineString:Cd(Ri.prototype.Kf),MultiLineString:Cd(Ri.prototype.fj),LinearRing:Cd(Ri.prototype.ej),Polygon:Cd(Ri.prototype.Lf),MultiPolygon:Cd(Ri.prototype.hj),Box:Cd(Ti.prototype.aj)}};function Ui(b){b=b?b:{};this.b="http://mapserver.gis.umn.edu/mapserver";this.a=new Ti;this.c=b.layers?b.layers:null;this.ua=null}y(Ui,ei);
Ui.prototype.ee=function(b,c){var d={featureType:this.Cc,featureNS:this.Bc};c&&Ua(d,ci(this,b,c));var e=[d];b.setAttribute("namespaceURI",this.b);var f=jd(b),d=[];if(0!==b.childNodes.length){if("msGMLOutput"==f)for(var g=0,h=b.childNodes.length;g<h;g++){var k=b.childNodes[g];if(1===k.nodeType){var l=e[0],n=k.localName.replace("_layer","");if(!this.c||0<=this.c.indexOf(n)){n+="_feature";l.featureType=n;l.featureNS=this.b;var q={};q[n]=Ad(this.a.de,this.a);l=P([l.featureNS,null],q);k.setAttribute("namespaceURI",
this.b);(k=Q([],l,k,e,this.a))&&Tc(d,k)}}}"FeatureCollection"==f&&(e=Q([],this.a.a,b,[{}],this.a))&&(d=e)}return d};z.value("ngeoQueryResult",{$c:[],total:0});function Vi(b,c,d,e){d=void 0!==d?d:{};this.b=void 0!==d.limit?d.limit:50;this.i=void 0!==d.sourceIdProperty?d.sourceIdProperty:"querySourceId";this.j=void 0!==d.sourceIdsProperty?d.sourceIdsProperty:"querySourceIds";this.f=e;this.c=b;this.ic=c;this.g=[];this.a={}}Vi.$inject=["$http","ngeoQueryResult","ngeoQueryOptions","ngeoLayerHelper"];
Vi.prototype.Ie=function(b){var c=b.id;if(!b.wmsSource)if(b.layer&&(b.layer instanceof qf||b.layer instanceof rf)){var d=b.layer.N();d&&d instanceof Yf&&(b.wmsSource=d)}else b.wmsSource=new Yf({url:b.url,params:b.params});b.format?!b.infoFormat&&b.format instanceof Ui&&(b.infoFormat="application/vnd.ogc.gml"):(b.infoFormat||(b.infoFormat="application/vnd.ogc.gml"),d=b.wmsSource.a.LAYERS.split(","),"application/vnd.ogc.gml"===b.infoFormat&&(b.format=new Ui({layers:d})));this.g.push(b);d={features:[],
id:c,identifierAttributeField:void 0!==b.identifierAttributeField?b.identifierAttributeField:c,label:void 0!==b.label?b.label:c,pending:!1};this.ic.$c.push(d);this.a[c]={source:b,resultSource:d}};Vi.prototype.addSource=Vi.prototype.Ie;Vi.prototype.Je=function(b){b.forEach(this.Ie,this)};Vi.prototype.addSources=Vi.prototype.Je;Vi.prototype.clear=function(){Wi(this)};Vi.prototype.clear=Vi.prototype.clear;Vi.prototype.kf=function(b,c){Wi(this);2===c.length&&Xi(this,b,c)};Vi.prototype.issue=Vi.prototype.kf;
function Xi(b,c,d){var e=U(c),f=Se(e.Y()),g,h,k,l,n,q,p={},r=e.S();b.f.Ec(Yg(c)).forEach(function(b){if(jf(b)){var c=b.get(this.i);g=c=ha(c)||ga(c)?c:"";h=(b.get(this.j)||[]).slice();if(g&&this.a[g]||h.length){g&&h.push(g);for(var c=0,d=h.length;c<d;c++){g=h[c];n=this.a[g];var e;(e=!n.source.validateLayerParams)||(e=-1!==b.N().a.LAYERS.split(",").indexOf(n.source.wmsSource.a.LAYERS));e&&(n.resultSource.pending=!0,k=n.source.infoFormat,"application/vnd.ogc.gml"===k?(l=n.source.wmsSource.l,p[l]||(p[l]=
[]),p[l].push(n)):n.resultSource.pending=!1)}}}},b);ac(p,function(b){k=b[0].source.infoFormat;var c=b[0].source.wmsSource.a.LAYERS.split(",");q=ag(b[0].source.wmsSource,d,r,f,{INFO_FORMAT:k,FEATURE_COUNT:this.b});for(var e=1,g=b.length;e<g;e++)c=c.concat(b[e].source.wmsSource.a.LAYERS.split(","));c=c.join(",");q=Cf(q,"LAYERS",c);q=Cf(q,"QUERY_LAYERS",c);this.c.get(q).then(function(b,c){b.forEach(function(b){var d=b.source.format.Uc(c.data);b.resultSource.pending=!1;b.resultSource.features=d;this.ic.total+=
d.length},this)}.bind(this,b))},b)}function Wi(b){b.ic.total=0;b.ic.$c.forEach(function(b){b.features.length=0},b)}z.service("ngeoQuery",Vi);function Yi(b,c,d){this.i=b;this.f=c;this.c=d;this.b=[];this.a={};I(c,"load",this.g,this,!0)}Yi.$inject=["ngeoQuery","gmfThemes","gmfWmsUrl"];Yi.prototype.g=function(){this.f.$b().then(function(b){for(var c=0,d=b.length;c<d;c++)Zi(this,b[c]);this.i.Je(this.b)}.bind(this))};
function Zi(b,c){var d=c.metadata,e=c.children,f=c.id,g=d.identifierAttributeField,h=d.wmsLayers||d.queryLayers||c.layers,k=c.name,d=d.wmsUrl||c.url||b.c,l=!1;if(e)for(f=0,g=e.length;f<g;f++)Zi(b,e[f]);else if(!b.a[f]){if(c.childLayers&&c.childLayers.length){var n=[];c.childLayers.forEach(function(b){n.push(b.name)},b);h=n.join(",")}else"WMS"===c.type&&(l=!0);e={id:f,identifierAttributeField:g,label:k,params:{LAYERS:h},url:d,validateLayerParams:l};b.a[f]=e;b.b.push(e)}}
B.service("gmfQueryManager",Yi);function $i(b,c){Sa.call(this,b);this.previous=c}y($i,Sa);function aj(){kb.call(this);this.a={}}y(aj,kb);aj.prototype.get=function(b){return w(b).toString()in this.a?lf(Yg(b)).item(0):null};
aj.prototype.set=function(b,c){var d=w(b).toString(),e=this.get(b);if(null!==e)if(null!==c){var d=lf(Yg(b)),f=d.get("length");if(0<f)f=d.a[0],d.a[0]=c,d.B(new ob("remove",f,d)),d.B(new ob("add",c,d));else{for(;0>f;++f)sb(d,f,void 0);sb(d,0,c)}}else tb(lf(Yg(b)),0),delete this.a[d];else null!==c&&(sb(lf(Yg(b)),0,c),this.a[d]=!0);this.B(new $i("change",e));return e};z.service("ngeoBackgroundLayerMgr",aj);function bj(b){return function(c,d,e){var f=null;return function(){var g=this,h=arguments;null!==f&&b.cancel(f);f=b(function(){f=null;c.apply(g,h)},d,e)}}}bj.$inject=["$timeout"];z.factory("ngeoDebounce",bj);function cj(b){b=b?b:{};var c=Ua({},b);delete c.style;delete c.Of;delete c.dd;delete c.ed;of.call(this,c);this.l=void 0!==b.Of?b.Of:100;this.j=null;this.i=void 0;c=b.style;this.j=void 0!==c?c:Vh;this.i=null===c?void 0:Th(this.j);this.b();this.o=void 0!==b.dd?b.dd:!1;this.v=void 0!==b.ed?b.ed:!1}y(cj,of);function dj(b,c,d){return function(e,f,g){var h=new XMLHttpRequest;h.open("GET",ia(b)?b(e,f,g):b,!0);"arraybuffer"==c.aa()&&(h.responseType="arraybuffer");h.onload=function(){if(200<=h.status&&300>h.status){var b=c.aa(),e;"json"==b||"text"==b?e=h.responseText:"xml"==b?(e=h.responseXML)||(e=zd(h.responseText)):"arraybuffer"==b&&(e=h.response);e&&d.call(this,c.Uc(e,{Fb:g}),c.f(e))}}.bind(this);h.send()}}function ej(b,c){return dj(b,c,function(b){fj(this,b)})};function gj(){return[[-Infinity,-Infinity,Infinity,Infinity]]};var hj;
(function(){var b={R:{}};(function(){function c(b,d){if(!(this instanceof c))return new c(b,d);this.kd=Math.max(4,b||9);this.De=Math.max(2,Math.ceil(.4*this.kd));d&&this.vg(d);this.clear()}function d(b,c){b.bbox=e(b,0,b.children.length,c)}function e(b,c,d,e){for(var g=[Infinity,Infinity,-Infinity,-Infinity],h;c<d;c++)h=b.children[c],f(g,b.ga?e(h):h.bbox);return g}function f(b,c){b[0]=Math.min(b[0],c[0]);b[1]=Math.min(b[1],c[1]);b[2]=Math.max(b[2],c[2]);b[3]=Math.max(b[3],c[3])}function g(b,c){return b.bbox[0]-
c.bbox[0]}function h(b,c){return b.bbox[1]-c.bbox[1]}function k(b){return(b[2]-b[0])*(b[3]-b[1])}function l(b){return b[2]-b[0]+(b[3]-b[1])}function n(b,c){return b[0]<=c[0]&&b[1]<=c[1]&&c[2]<=b[2]&&c[3]<=b[3]}function q(b,c){return c[0]<=b[2]&&c[1]<=b[3]&&c[2]>=b[0]&&c[3]>=b[1]}function p(b,c,d,e,f){for(var g=[c,d],h;g.length;)d=g.pop(),c=g.pop(),d-c<=e||(h=c+Math.ceil((d-c)/e/2)*e,r(b,c,d,h,f),g.push(c,h,h,d))}function r(b,c,d,e,f){for(var g,h,k,l,n;d>c;){600<d-c&&(g=d-c+1,h=e-c+1,k=Math.log(g),
l=.5*Math.exp(2*k/3),n=.5*Math.sqrt(k*l*(g-l)/g)*(0>h-g/2?-1:1),k=Math.max(c,Math.floor(e-h*l/g+n)),h=Math.min(d,Math.floor(e+(g-h)*l/g+n)),r(b,k,h,e,f));g=b[e];h=c;l=d;u(b,c,e);for(0<f(b[d],g)&&u(b,c,d);h<l;){u(b,h,l);h++;for(l--;0>f(b[h],g);)h++;for(;0<f(b[l],g);)l--}0===f(b[c],g)?u(b,c,l):(l++,u(b,l,d));l<=e&&(c=l+1);e<=l&&(d=l-1)}}function u(b,c,d){var e=b[c];b[c]=b[d];b[d]=e}c.prototype={all:function(){return this.ye(this.data,[])},search:function(b){var c=this.data,d=[],e=this.wa;if(!q(b,c.bbox))return d;
for(var f=[],g,h,k,l;c;){g=0;for(h=c.children.length;g<h;g++)k=c.children[g],l=c.ga?e(k):k.bbox,q(b,l)&&(c.ga?d.push(k):n(b,l)?this.ye(k,d):f.push(k));c=f.pop()}return d},load:function(b){if(!b||!b.length)return this;if(b.length<this.De){for(var c=0,d=b.length;c<d;c++)this.insert(b[c]);return this}b=this.Ae(b.slice(),0,b.length-1,0);this.data.children.length?this.data.height===b.height?this.Ge(this.data,b):(this.data.height<b.height&&(c=this.data,this.data=b,b=c),this.Ce(b,this.data.height-b.height-
1,!0)):this.data=b;return this},insert:function(b){b&&this.Ce(b,this.data.height-1);return this},clear:function(){this.data={children:[],height:1,bbox:[Infinity,Infinity,-Infinity,-Infinity],ga:!0};return this},remove:function(b){if(!b)return this;for(var c=this.data,d=this.wa(b),e=[],f=[],g,h,k,l;c||e.length;){c||(c=e.pop(),h=e[e.length-1],g=f.pop(),l=!0);if(c.ga&&(k=c.children.indexOf(b),-1!==k)){c.children.splice(k,1);e.push(c);this.tg(e);break}l||c.ga||!n(c.bbox,d)?h?(g++,c=h.children[g],l=!1):
c=null:(e.push(c),f.push(g),g=0,h=c,c=c.children[0])}return this},wa:function(b){return b},ud:function(b,c){return b[0]-c[0]},vd:function(b,c){return b[1]-c[1]},toJSON:function(){return this.data},ye:function(b,c){for(var d=[];b;)b.ga?c.push.apply(c,b.children):d.push.apply(d,b.children),b=d.pop();return c},Ae:function(b,c,e,f){var g=e-c+1,h=this.kd,k;if(g<=h)return k={children:b.slice(c,e+1),height:1,bbox:null,ga:!0},d(k,this.wa),k;f||(f=Math.ceil(Math.log(g)/Math.log(h)),h=Math.ceil(g/Math.pow(h,
f-1)));k={children:[],height:f,bbox:null,ga:!1};var g=Math.ceil(g/h),h=g*Math.ceil(Math.sqrt(h)),l,n,q;for(p(b,c,e,h,this.ud);c<=e;c+=h)for(n=Math.min(c+h-1,e),p(b,c,n,g,this.vd),l=c;l<=n;l+=g)q=Math.min(l+g-1,n),k.children.push(this.Ae(b,l,q,f-1));d(k,this.wa);return k},sg:function(b,c,d,e){for(var f,g,h,l,n,p,q,r;;){e.push(c);if(c.ga||e.length-1===d)break;q=r=Infinity;f=0;for(g=c.children.length;f<g;f++)h=c.children[f],n=k(h.bbox),p=h.bbox,p=(Math.max(p[2],b[2])-Math.min(p[0],b[0]))*(Math.max(p[3],
b[3])-Math.min(p[1],b[1]))-n,p<r?(r=p,q=n<q?n:q,l=h):p===r&&n<q&&(q=n,l=h);c=l}return c},Ce:function(b,c,d){var e=this.wa;d=d?b.bbox:e(b);var e=[],g=this.sg(d,this.data,c,e);g.children.push(b);for(f(g.bbox,d);0<=c;)if(e[c].children.length>this.kd)this.Ag(e,c),c--;else break;this.pg(d,e,c)},Ag:function(b,c){var e=b[c],f=e.children.length,g=this.De;this.qg(e,g,f);f=this.rg(e,g,f);f={children:e.children.splice(f,e.children.length-f),height:e.height,bbox:null,ga:!1};e.ga&&(f.ga=!0);d(e,this.wa);d(f,this.wa);
c?b[c-1].children.push(f):this.Ge(e,f)},Ge:function(b,c){this.data={children:[b,c],height:b.height+1,bbox:null,ga:!1};d(this.data,this.wa)},rg:function(b,c,d){var f,g,h,l,n,p,q;n=p=Infinity;for(f=c;f<=d-c;f++)g=e(b,0,f,this.wa),h=e(b,f,d,this.wa),l=Math.max(0,Math.min(g[2],h[2])-Math.max(g[0],h[0]))*Math.max(0,Math.min(g[3],h[3])-Math.max(g[1],h[1])),g=k(g)+k(h),l<n?(n=l,q=f,p=g<p?g:p):l===n&&g<p&&(p=g,q=f);return q},qg:function(b,c,d){var e=b.ga?this.ud:g,f=b.ga?this.vd:h,k=this.ze(b,c,d,e);c=this.ze(b,
c,d,f);k<c&&b.children.sort(e)},ze:function(b,c,d,g){b.children.sort(g);g=this.wa;var h=e(b,0,c,g),k=e(b,d-c,d,g),n=l(h)+l(k),p,q;for(p=c;p<d-c;p++)q=b.children[p],f(h,b.ga?g(q):q.bbox),n+=l(h);for(p=d-c-1;p>=c;p--)q=b.children[p],f(k,b.ga?g(q):q.bbox),n+=l(k);return n},pg:function(b,c,d){for(;0<=d;d--)f(c[d].bbox,b)},tg:function(b){for(var c=b.length-1,e;0<=c;c--)0===b[c].children.length?0<c?(e=b[c-1].children,e.splice(e.indexOf(b[c]),1)):this.clear():d(b[c],this.wa)},vg:function(b){var c=["return a",
" - b",";"];this.ud=new Function("a","b",c.join(b[0]));this.vd=new Function("a","b",c.join(b[1]));this.wa=new Function("a","return [a"+b.join(", a")+"];")}};"undefined"!==typeof b?b.R=c:"undefined"!==typeof self?self.a=c:window.a=c})();hj=b.R})();function ij(b){this.b=hj(b);this.a={}}m=ij.prototype;m.insert=function(b,c){var d=[b[0],b[1],b[2],b[3],c];this.b.insert(d);this.a[w(c)]=d};m.load=function(b,c){for(var d=Array(c.length),e=0,f=c.length;e<f;e++){var g=b[e],h=c[e],g=[g[0],g[1],g[2],g[3],h];d[e]=g;this.a[w(h)]=g}this.b.load(d)};m.remove=function(b){b=w(b);var c=this.a[b];delete this.a[b];return null!==this.b.remove(c)};function jj(b){return b.b.all().map(function(b){return b[4]})}
function kj(b,c){return b.b.search(c).map(function(b){return b[4]})}m.forEach=function(b,c){return lj(jj(this),b,c)};function mj(b,c,d,e){return lj(kj(b,c),d,e)}function lj(b,c,d){for(var e,f=0,g=b.length;f<g&&!(e=c.call(d,b[f]));f++);return e}m.Ja=function(){return Wa(this.a)};m.clear=function(){this.b.clear();this.a={}};m.G=function(){return this.b.data.bbox};function nj(b){b=b||{};ff.call(this,{ca:b.ca,ea:b.ea,projection:void 0,state:"ready",wrapX:void 0!==b.wrapX?b.wrapX:!0});this.v=Md;void 0!==b.ci?this.v=b.ci:void 0!==b.url&&(this.v=ej(b.url,b.format));this.D=void 0!==b.vj?b.vj:gj;var c=void 0!==b.nc?b.nc:!0;this.a=c?new ij:null;this.A=new ij;this.c={};this.g={};this.i={};this.j={};this.l=null;var d,e;b.features instanceof pb?(d=b.features,e=d.a):ea(b.features)&&(e=b.features);c||void 0!==d||(d=new pb(e));void 0!==e&&oj(this,e);void 0!==d&&pj(this,
d)}y(nj,ff);m=nj.prototype;m.ia=function(b){var c=w(b).toString();if(qj(this,c,b)){rj(this,c,b);var d=b.J();d?(c=d.G(),this.a&&this.a.insert(c,b)):this.c[c]=b;this.B(new sj("addfeature",b))}this.b()};function rj(b,c,d){b.j[c]=[I(d,"change",b.xf,b),I(d,"propertychange",b.xf,b)]}function qj(b,c,d){var e=!0,f=d.Ya();void 0!==f?f.toString()in b.g?e=!1:b.g[f.toString()]=d:b.i[c]=d;return e}function fj(b,c){oj(b,c);b.b()}
function oj(b,c){var d,e,f,g,h=[],k=[],l=[];e=0;for(f=c.length;e<f;e++)g=c[e],d=w(g).toString(),qj(b,d,g)&&k.push(g);e=0;for(f=k.length;e<f;e++){g=k[e];d=w(g).toString();rj(b,d,g);var n=g.J();n?(d=n.G(),h.push(d),l.push(g)):b.c[d]=g}b.a&&b.a.load(h,l);e=0;for(f=k.length;e<f;e++)b.B(new sj("addfeature",k[e]))}
function pj(b,c){var d=!1;I(b,"addfeature",function(b){d||(d=!0,c.push(b.feature),d=!1)});I(b,"removefeature",function(b){d||(d=!0,c.remove(b.feature),d=!1)});I(c,"add",function(b){d||(b=b.element,d=!0,this.ia(b),d=!1)},b);I(c,"remove",function(b){d||(b=b.element,d=!0,this.pb(b),d=!1)},b);b.l=c}
m.clear=function(b){if(b){for(var c in this.j)this.j[c].forEach(G);this.l||(this.j={},this.g={},this.i={})}else if(this.a){this.a.forEach(this.je,this);for(var d in this.c)this.je(this.c[d])}this.l&&this.l.clear();this.a&&this.a.clear();this.A.clear();this.c={};this.B(new sj("clear"));this.b()};function tj(b,c,d,e){b.a?mj(b.a,c,d,e):b.l&&b.l.forEach(d,e)}m.G=function(){return this.a.G()};
m.xf=function(b){b=b.target;var c=w(b).toString(),d=b.J();if(d)if(d=d.G(),c in this.c)delete this.c[c],this.a&&this.a.insert(d,b);else{if(this.a){var e=this.a,f=w(b);Lb(e.a[f].slice(0,4),d)||(e.remove(b),e.insert(d,b))}}else c in this.c||(this.a&&this.a.remove(b),this.c[c]=b);d=b.Ya();void 0!==d?(d=d.toString(),c in this.i?(delete this.i[c],this.g[d]=b):this.g[d]!==b&&(uj(this,b),this.g[d]=b)):c in this.i||(uj(this,b),this.i[c]=b);this.b();this.B(new sj("changefeature",b))};
m.Ja=function(){return this.a.Ja()&&Wa(this.c)};function vj(b,c,d,e){var f=b.A;c=b.D(c,d);var g,h;g=0;for(h=c.length;g<h;++g){var k=c[g];mj(f,k,function(b){return Jb(b.extent,k)})||(b.v.call(b,k,d,e),f.insert(k,{extent:k.slice()}))}}m.pb=function(b){var c=w(b).toString();c in this.c?delete this.c[c]:this.a&&this.a.remove(b);this.je(b);this.b()};
m.je=function(b){var c=w(b).toString();this.j[c].forEach(G);delete this.j[c];var d=b.Ya();void 0!==d?delete this.g[d.toString()]:delete this.i[c];this.B(new sj("removefeature",b))};function uj(b,c){for(var d in b.g)if(b.g[d]===c){delete b.g[d];break}}function sj(b,c){Sa.call(this,b);this.feature=c}y(sj,Sa);function wj(){this.b={};this.a=[];this.f=new nj({nc:!1});this.Zd=new cj({source:this.f,style:this.si.bind(this),dd:!0,ed:!0})}m=wj.prototype;m.ia=function(b,c){var d=w(b).toString();this.b[d]=c;this.a[c].features[d]=b;this.f.ia(b)};m.pb=function(b,c){var d=w(b).toString();delete this.b[d];delete this.a[c].features[d];this.f.pb(b)};m.clear=function(b){var c=this.a[b],d;for(d in c.features)this.pb(c.features[d],b)};m.ma=function(){return this.Zd};
function xj(b){var c=b.a.length;b.a.push({Wf:Vh,features:{}});return new yj(b,c)}m.si=function(b,c){var d=w(b).toString();return this.a[this.b[d]].Wf(b,c)};function yj(b,c){this.b=b;this.a=null;this.f=c}m=yj.prototype;m.ia=function(b){this.b.ia(b,this.f)};m.pb=function(b){this.b.pb(b,this.f)};m.clear=function(){this.b.clear(this.f)};
function zj(b,c){null!==b.a&&(b.a.clear(),cb(b.a,"add",b.qf,b),cb(b.a,"remove",b.rf,b));null!==c&&(c.forEach(function(b){this.ia(b)},b),I(c,"add",b.qf,b),I(c,"remove",b.rf,b));b.a=c}function Aj(b,c){b.b.a[b.f].Wf=null===c?Vh:Th(c)}m.qf=function(b){this.ia(b.element)};m.rf=function(b){this.pb(b.element)};z.service("ngeoFeatureOverlayMgr",wj);function Bj(b,c,d,e){this.top=b;this.right=c;this.bottom=d;this.left=e}m=Bj.prototype;m.clone=function(){return new Bj(this.top,this.right,this.bottom,this.left)};m.contains=function(b){return this&&b?b instanceof Bj?b.left>=this.left&&b.right<=this.right&&b.top>=this.top&&b.bottom<=this.bottom:b.x>=this.left&&b.x<=this.right&&b.y>=this.top&&b.y<=this.bottom:!1};
m.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};m.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};m.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};
m.translate=function(b,c){b instanceof vc?(this.left+=b.x,this.right+=b.x,this.top+=b.y,this.bottom+=b.y):(this.left+=b,this.right+=b,ha(c)&&(this.top+=c,this.bottom+=c));return this};m.scale=function(b,c){var d=ha(c)?c:b;this.left*=b;this.right*=b;this.top*=d;this.bottom*=d;return this};function Cj(b,c,d,e){this.left=b;this.top=c;this.width=d;this.height=e}m=Cj.prototype;m.clone=function(){return new Cj(this.left,this.top,this.width,this.height)};m.contains=function(b){return b instanceof Cj?this.left<=b.left&&this.left+this.width>=b.left+b.width&&this.top<=b.top&&this.top+this.height>=b.top+b.height:b.x>=this.left&&b.x<=this.left+this.width&&b.y>=this.top&&b.y<=this.top+this.height};
m.ceil=function(){this.left=Math.ceil(this.left);this.top=Math.ceil(this.top);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};m.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};m.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};
m.translate=function(b,c){b instanceof vc?(this.left+=b.x,this.top+=b.y):(this.left+=b,ha(c)&&(this.top+=c));return this};m.scale=function(b,c){var d=ha(c)?c:b;this.left*=b;this.width*=b;this.top*=d;this.height*=d;return this};function Dj(b){Dj[" "](b);return b}Dj[" "]=ca;function Ej(b,c){var d=zc(b);return d.defaultView&&d.defaultView.getComputedStyle&&(d=d.defaultView.getComputedStyle(b,null))?d[c]||d.getPropertyValue(c)||"":""}function Fj(b){var c;try{c=b.getBoundingClientRect()}catch(d){return{left:0,top:0,right:0,bottom:0}}hc&&b.ownerDocument.body&&(b=b.ownerDocument,c.left-=b.documentElement.clientLeft+b.body.clientLeft,c.top-=b.documentElement.clientTop+b.body.clientTop);return c}
function Gj(b){var c=zc(b),d=new vc(0,0),e;e=c?zc(c):document;var f;(f=!hc||9<=Number(sc))||(xc(e),f=!0);if(b==(f?e.documentElement:e.body))return d;b=Fj(b);c=Nc(xc(c));d.x=b.left+c.x;d.y=b.top+c.y;return d}function Hj(b){"number"==typeof b&&(b=b+"px");return b}
function Ij(b){var c=Jj;if("none"!=(Ej(b,"display")||(b.currentStyle?b.currentStyle.display:null)||b.style&&b.style.display))return c(b);var d=b.style,e=d.display,f=d.visibility,g=d.position;d.visibility="hidden";d.position="absolute";d.display="inline";b=c(b);d.display=e;d.position=g;d.visibility=f;return b}function Jj(b){var c=b.offsetWidth,d=b.offsetHeight,e=kc&&!c&&!d;return ba(c)&&!e||!b.getBoundingClientRect?new wc(c,d):(b=Fj(b),new wc(b.right-b.left,b.bottom-b.top))}
function Kj(b){var c=Gj(b);b=Ij(b);return new Cj(c.x,c.y,b.width,b.height)}function Lj(b,c){b.style.display=c?"":"none"}function Mj(b,c,d,e){if(/^\d+px?$/.test(c))return parseInt(c,10);var f=b.style[d],g=b.runtimeStyle[d];b.runtimeStyle[d]=b.currentStyle[d];b.style[d]=c;c=b.style[e];b.style[d]=f;b.runtimeStyle[d]=g;return c}function Nj(b,c){var d=b.currentStyle?b.currentStyle[c]:null;return d?Mj(b,d,"left","pixelLeft"):0}var Oj={thin:2,medium:4,thick:6};
function Pj(b,c){if("none"==(b.currentStyle?b.currentStyle[c+"Style"]:null))return 0;var d=b.currentStyle?b.currentStyle[c+"Width"]:null;return d in Oj?Oj[d]:Mj(b,d,"left","pixelLeft")};var Qj;
function Rj(){var b=t.MessageChannel;"undefined"===typeof b&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!$b("Presto")&&(b=function(){var b=document.createElement("IFRAME");b.style.display="none";b.src="";document.documentElement.appendChild(b);var c=b.contentWindow,b=c.document;b.open();b.write("");b.close();var d="callImmediate"+Math.random(),e="file:"==c.location.protocol?"*":c.location.protocol+"//"+c.location.host,b=pa(function(b){if(("*"==e||b.origin==e)&&b.data==
d)this.port1.onmessage()},this);c.addEventListener("message",b,!1);this.port1={};this.port2={postMessage:function(){c.postMessage(d,e)}}});if("undefined"!==typeof b&&!$b("Trident")&&!$b("MSIE")){var c=new b,d={},e=d;c.port1.onmessage=function(){if(ba(d.next)){d=d.next;var b=d.Pe;d.Pe=null;b()}};return function(b){e.next={Pe:b};e=e.next;c.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(b){var c=document.createElement("SCRIPT");
c.onreadystatechange=function(){c.onreadystatechange=null;c.parentNode.removeChild(c);c=null;b();b=null};document.documentElement.appendChild(c)}:function(b){t.setTimeout(b,0)}};function Sj(b){if(b.za&&"function"==typeof b.za)return b.za();if(ga(b))return b.split("");if(fa(b)){for(var c=[],d=b.length,e=0;e<d;e++)c.push(b[e]);return c}return bc(b)}
function Tj(b,c,d){if(b.forEach&&"function"==typeof b.forEach)b.forEach(c,d);else if(fa(b)||ga(b))Ka(b,c,d);else{var e;if(b.ya&&"function"==typeof b.ya)e=b.ya();else if(b.za&&"function"==typeof b.za)e=void 0;else if(fa(b)||ga(b)){e=[];for(var f=b.length,g=0;g<f;g++)e.push(g)}else e=cc(b);for(var f=Sj(b),g=f.length,h=0;h<g;h++)c.call(d,f[h],e&&e[h],b)}};var Uj="StopIteration"in t?t.StopIteration:{message:"StopIteration",stack:""};function Vj(){}Vj.prototype.next=function(){throw Uj;};Vj.prototype.zb=function(){return this};function Wj(b){if(b instanceof Vj)return b;if("function"==typeof b.zb)return b.zb(!1);if(fa(b)){var c=0,d=new Vj;d.next=function(){for(;;){if(c>=b.length)throw Uj;if(c in b)return b[c++];c++}};return d}throw Error("Not implemented");}
function Xj(b,c){if(fa(b))try{Ka(b,c,void 0)}catch(d){if(d!==Uj)throw d;}else{b=Wj(b);try{for(;;)c.call(void 0,b.next(),void 0,b)}catch(d){if(d!==Uj)throw d;}}}function Yj(b){if(fa(b))return Qa(b);b=Wj(b);var c=[];Xj(b,function(b){c.push(b)});return c};function Zj(b,c){this.b={};this.a=[];this.c=this.f=0;var d=arguments.length;if(1<d){if(d%2)throw Error("Uneven number of arguments");for(var e=0;e<d;e+=2)this.set(arguments[e],arguments[e+1])}else if(b){b instanceof Zj?(d=b.ya(),e=b.za()):(d=cc(b),e=bc(b));for(var f=0;f<d.length;f++)this.set(d[f],e[f])}}m=Zj.prototype;m.Pa=function(){return this.f};m.za=function(){ak(this);for(var b=[],c=0;c<this.a.length;c++)b.push(this.b[this.a[c]]);return b};m.ya=function(){ak(this);return this.a.concat()};
m.equals=function(b,c){if(this===b)return!0;if(this.f!=b.Pa())return!1;var d=c||bk;ak(this);for(var e,f=0;e=this.a[f];f++)if(!d(this.get(e),b.get(e)))return!1;return!0};function bk(b,c){return b===c}m.Ja=function(){return 0==this.f};m.clear=function(){this.b={};this.c=this.f=this.a.length=0};m.remove=function(b){return ck(this.b,b)?(delete this.b[b],this.f--,this.c++,this.a.length>2*this.f&&ak(this),!0):!1};
function ak(b){if(b.f!=b.a.length){for(var c=0,d=0;c<b.a.length;){var e=b.a[c];ck(b.b,e)&&(b.a[d++]=e);c++}b.a.length=d}if(b.f!=b.a.length){for(var f={},d=c=0;c<b.a.length;)e=b.a[c],ck(f,e)||(b.a[d++]=e,f[e]=1),c++;b.a.length=d}}m.get=function(b,c){return ck(this.b,b)?this.b[b]:c};m.set=function(b,c){ck(this.b,b)||(this.f++,this.a.push(b),this.c++);this.b[b]=c};m.forEach=function(b,c){for(var d=this.ya(),e=0;e<d.length;e++){var f=d[e],g=this.get(f);b.call(c,g,f,this)}};m.clone=function(){return new Zj(this)};
m.transpose=function(){for(var b=new Zj,c=0;c<this.a.length;c++){var d=this.a[c];b.set(this.b[d],d)}return b};m.zb=function(b){ak(this);var c=0,d=this.c,e=this,f=new Vj;f.next=function(){if(d!=e.c)throw Error("The map has changed since the iterator was created");if(c>=e.a.length)throw Uj;var f=e.a[c++];return b?f:e.b[f]};return f};function ck(b,c){return Object.prototype.hasOwnProperty.call(b,c)};function dk(){this.a=ra()}new dk;dk.prototype.set=function(b){this.a=b};dk.prototype.get=function(){return this.a};function ek(b){if(b.classList)return b.classList;b=b.className;return ga(b)&&b.match(/\S+/g)||[]}function fk(b,c){return b.classList?b.classList.contains(c):Na(ek(b),c)}function gk(b,c){b.classList?b.classList.add(c):fk(b,c)||(b.className+=0<b.className.length?" "+c:c)}function hk(b,c){if(b.classList)Ka(c,function(c){gk(b,c)});else{var d={};Ka(ek(b),function(b){d[b]=!0});Ka(c,function(b){d[b]=!0});b.className="";for(var e in d)b.className+=0<b.className.length?" "+e:e}}
function ik(b,c){b.classList?b.classList.remove(c):fk(b,c)&&(b.className=La(ek(b),function(b){return b!=c}).join(" "))}function jk(b,c){b.classList?Ka(c,function(c){ik(b,c)}):b.className=La(ek(b),function(b){return!Na(c,b)}).join(" ")};function kk(b,c,d){Sa.call(this,b);this.map=c;this.frameState=void 0!==d?d:null}y(kk,Sa);function lk(b,c,d){Sa.call(this,b);this.a=c;b=d?d:{};this.buttons=mk(b);this.pressure=nk(b,this.buttons);this.bubbles="bubbles"in b?b.bubbles:!1;this.cancelable="cancelable"in b?b.cancelable:!1;this.view="view"in b?b.view:null;this.detail="detail"in b?b.detail:null;this.screenX="screenX"in b?b.screenX:0;this.screenY="screenY"in b?b.screenY:0;this.clientX="clientX"in b?b.clientX:0;this.clientY="clientY"in b?b.clientY:0;this.button="button"in b?b.button:0;this.relatedTarget="relatedTarget"in b?b.relatedTarget:
null;this.pointerId="pointerId"in b?b.pointerId:0;this.width="width"in b?b.width:0;this.height="height"in b?b.height:0;this.pointerType="pointerType"in b?b.pointerType:"";this.isPrimary="isPrimary"in b?b.isPrimary:!1;c.preventDefault&&(this.preventDefault=function(){c.preventDefault()})}y(lk,Sa);function mk(b){if(b.buttons||ok)b=b.buttons;else switch(b.which){case 1:b=1;break;case 2:b=4;break;case 3:b=2;break;default:b=0}return b}
function nk(b,c){var d=0;b.pressure?d=b.pressure:d=c?.5:0;return d}var ok=!1;try{ok=1===(new MouseEvent("click",{buttons:1})).buttons}catch(b){};function pk(b,c){this.a=b;this.g=c};function qk(b){pk.call(this,b,{mousedown:this.Di,mousemove:this.Ei,mouseup:this.Hi,mouseover:this.Gi,mouseout:this.Fi});this.b=b.b;this.f=[]}y(qk,pk);function rk(b,c){for(var d=b.f,e=c.clientX,f=c.clientY,g=0,h=d.length,k;g<h&&(k=d[g]);g++){var l=Math.abs(f-k[1]);if(25>=Math.abs(e-k[0])&&25>=l)return!0}return!1}function sk(b){var c=tk(b,b),d=c.preventDefault;c.preventDefault=function(){b.preventDefault();d()};c.pointerId=1;c.isPrimary=!0;c.pointerType="mouse";return c}m=qk.prototype;
m.Di=function(b){if(!rk(this,b)){(1).toString()in this.b&&this.cancel(b);var c=sk(b);this.b[(1).toString()]=b;uk(this.a,vk,c,b)}};m.Ei=function(b){if(!rk(this,b)){var c=sk(b);this.a.move(c,b)}};m.Hi=function(b){if(!rk(this,b)){var c=this.b[(1).toString()];c&&c.button===b.button&&(c=sk(b),uk(this.a,wk,c,b),delete this.b[(1).toString()])}};m.Gi=function(b){if(!rk(this,b)){var c=sk(b);xk(this.a,c,b)}};m.Fi=function(b){if(!rk(this,b)){var c=sk(b);yk(this.a,c,b)}};
m.cancel=function(b){var c=sk(b);this.a.cancel(c,b);delete this.b[(1).toString()]};function zk(b){pk.call(this,b,{MSPointerDown:this.ki,MSPointerMove:this.li,MSPointerUp:this.oi,MSPointerOut:this.mi,MSPointerOver:this.ni,MSPointerCancel:this.ji,MSGotPointerCapture:this.hi,MSLostPointerCapture:this.ii});this.b=b.b;this.f=["","unavailable","touch","pen","mouse"]}y(zk,pk);function Ak(b,c){var d=c;ha(c.pointerType)&&(d=tk(c,c),d.pointerType=b.f[c.pointerType]);return d}m=zk.prototype;m.ki=function(b){this.b[b.pointerId.toString()]=b;var c=Ak(this,b);uk(this.a,vk,c,b)};
m.li=function(b){var c=Ak(this,b);this.a.move(c,b)};m.oi=function(b){var c=Ak(this,b);uk(this.a,wk,c,b);delete this.b[b.pointerId.toString()]};m.mi=function(b){var c=Ak(this,b);yk(this.a,c,b)};m.ni=function(b){var c=Ak(this,b);xk(this.a,c,b)};m.ji=function(b){var c=Ak(this,b);this.a.cancel(c,b);delete this.b[b.pointerId.toString()]};m.ii=function(b){this.a.B(new lk("lostpointercapture",b,b))};m.hi=function(b){this.a.B(new lk("gotpointercapture",b,b))};function Bk(b){pk.call(this,b,{pointerdown:this.Si,pointermove:this.Ti,pointerup:this.Wi,pointerout:this.Ui,pointerover:this.Vi,pointercancel:this.Ri,gotpointercapture:this.ih,lostpointercapture:this.di})}y(Bk,pk);m=Bk.prototype;m.Si=function(b){Ck(this.a,b)};m.Ti=function(b){Ck(this.a,b)};m.Wi=function(b){Ck(this.a,b)};m.Ui=function(b){Ck(this.a,b)};m.Vi=function(b){Ck(this.a,b)};m.Ri=function(b){Ck(this.a,b)};m.di=function(b){Ck(this.a,b)};m.ih=function(b){Ck(this.a,b)};function Dk(b,c){pk.call(this,b,{touchstart:this.Ej,touchmove:this.Dj,touchend:this.Cj,touchcancel:this.Bj});this.b=b.b;this.j=c;this.f=void 0;this.i=0;this.c=void 0}y(Dk,pk);m=Dk.prototype;m.Qf=function(){this.i=0;this.c=void 0};
function Ek(b,c,d){c=tk(c,d);c.pointerId=d.identifier+2;c.bubbles=!0;c.cancelable=!0;c.detail=b.i;c.button=0;c.buttons=1;c.width=d.webkitRadiusX||d.radiusX||0;c.height=d.webkitRadiusY||d.radiusY||0;c.pressure=d.webkitForce||d.force||.5;c.isPrimary=b.f===d.identifier;c.pointerType="touch";c.clientX=d.clientX;c.clientY=d.clientY;c.screenX=d.screenX;c.screenY=d.screenY;return c}
function Fk(b,c,d){function e(){c.preventDefault()}var f=Array.prototype.slice.call(c.changedTouches),g=f.length,h,k;for(h=0;h<g;++h)k=Ek(b,c,f[h]),k.preventDefault=e,d.call(b,c,k)}
m.Ej=function(b){var c=b.touches,d=Object.keys(this.b),e=d.length;if(e>=c.length){var f=[],g,h,k;for(g=0;g<e;++g){h=d[g];k=this.b[h];var l;if(!(l=1==h))a:{l=c.length;for(var n=void 0,q=0;q<l;q++)if(n=c[q],n.identifier===h-2){l=!0;break a}l=!1}l||f.push(k.out)}for(g=0;g<f.length;++g)this.sd(b,f[g])}c=b.changedTouches[0];d=Object.keys(this.b).length;if(0===d||1===d&&(1).toString()in this.b)this.f=c.identifier,void 0!==this.c&&t.clearTimeout(this.c);Gk(this,b);this.i++;Fk(this,b,this.Oi)};
m.Oi=function(b,c){this.b[c.pointerId]={target:c.target,out:c,Cf:c.target};var d=this.a;c.bubbles=!0;uk(d,Hk,c,b);this.a.enter(c,b);uk(this.a,vk,c,b)};m.Dj=function(b){b.preventDefault();Fk(this,b,this.gi)};m.gi=function(b,c){var d=this.b[c.pointerId];if(d){var e=d.out,f=d.Cf;this.a.move(c,b);e&&f!==c.target&&(e.relatedTarget=c.target,c.relatedTarget=f,e.target=f,c.target?(yk(this.a,e,b),xk(this.a,c,b)):(c.target=f,c.relatedTarget=null,this.sd(b,c)));d.out=c;d.Cf=c.target}};
m.Cj=function(b){Gk(this,b);Fk(this,b,this.Jj)};m.Jj=function(b,c){uk(this.a,wk,c,b);this.a.out(c,b);this.a.leave(c,b);delete this.b[c.pointerId];c.isPrimary&&(this.f=void 0,this.c=t.setTimeout(this.Qf.bind(this),200))};m.Bj=function(b){Fk(this,b,this.sd)};m.sd=function(b,c){this.a.cancel(c,b);this.a.out(c,b);this.a.leave(c,b);delete this.b[c.pointerId];c.isPrimary&&(this.f=void 0,this.c=t.setTimeout(this.Qf.bind(this),200))};
function Gk(b,c){var d=b.j.f,e=c.changedTouches[0];if(b.f===e.identifier){var f=[e.clientX,e.clientY];d.push(f);t.setTimeout(function(){Uc(d,f)},2500)}};function Ik(b){ib.call(this);this.c=b;this.b={};this.f={};this.a=[];Ah?Jk(this,new Bk(this)):Bh?Jk(this,new zk(this)):(b=new qk(this),Jk(this,b),zh&&Jk(this,new Dk(this,b)));b=this.a.length;for(var c,d=0;d<b;d++)c=this.a[d],Kk(this,Object.keys(c.g))}y(Ik,ib);function Jk(b,c){var d=Object.keys(c.g);d&&(d.forEach(function(b){var d=c.g[b];d&&(this.f[b]=d.bind(c))},b),b.a.push(c))}m=Ik.prototype;m.uf=function(b){var c=this.f[b.type];c&&c(b)};
function Kk(b,c){c.forEach(function(b){I(this.c,b,this.uf,this)},b)}function Lk(b,c){c.forEach(function(b){cb(this.c,b,this.uf,this)},b)}function tk(b,c){for(var d={},e,f=0,g=Mk.length;f<g;f++)e=Mk[f][0],d[e]=b[e]||c[e]||Mk[f][1];return d}m.move=function(b,c){uk(this,Nk,b,c)};m.enter=function(b,c){b.bubbles=!1;uk(this,Ok,b,c)};m.leave=function(b,c){b.bubbles=!1;uk(this,Pk,b,c)};m.out=function(b,c){b.bubbles=!0;uk(this,Qk,b,c)};m.cancel=function(b,c){uk(this,Rk,b,c)};
function yk(b,c,d){b.out(c,d);var e=c.relatedTarget;e&&Mc(c.target,e)||b.leave(c,d)}function xk(b,c,d){c.bubbles=!0;uk(b,Hk,c,d);var e=c.relatedTarget;e&&Mc(c.target,e)||b.enter(c,d)}function uk(b,c,d,e){b.B(new lk(c,e,d))}function Ck(b,c){b.B(new lk(c.type,c,c))}m.L=function(){for(var b=this.a.length,c,d=0;d<b;d++)c=this.a[d],Lk(this,Object.keys(c.g));Ik.U.L.call(this)};
var Nk="pointermove",vk="pointerdown",wk="pointerup",Hk="pointerover",Qk="pointerout",Ok="pointerenter",Pk="pointerleave",Rk="pointercancel",Mk=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",
!1],["type",""],["target",null],["currentTarget",null],["which",0]];function Sk(b,c,d,e,f){kk.call(this,b,c,f);this.originalEvent=d;b=c.a.getBoundingClientRect();d=d.changedTouches?d.changedTouches[0]:d;this.pixel=[d.clientX-b.left,d.clientY-b.top];this.coordinate=c.Gb(this.pixel);this.dragging=void 0!==e?e:!1}y(Sk,kk);Sk.prototype.preventDefault=function(){Sk.U.preventDefault.call(this);this.originalEvent.preventDefault()};Sk.prototype.stopPropagation=function(){Sk.U.stopPropagation.call(this);this.originalEvent.stopPropagation()};
function Tk(b,c,d,e,f){Sk.call(this,b,c,d.a,e,f);this.a=d}y(Tk,Sk);function Uk(b){ib.call(this);this.f=b;this.i=0;this.j=!1;this.c=[];this.b=null;b=this.f.a;this.v=0;this.o={};this.g=new Ik(b);this.a=null;this.u=I(this.g,vk,this.Bh,this);this.l=I(this.g,Nk,this.kj,this)}y(Uk,ib);function Vk(b,c){var d;d=new Tk(Wk,b.f,c);b.B(d);0!==b.i?(t.clearTimeout(b.i),b.i=0,d=new Tk(Xk,b.f,c),b.B(d)):b.i=t.setTimeout(function(){this.i=0;var b=new Tk(Yk,this.f,c);this.B(b)}.bind(b),250)}
function Zk(b,c){c.type==$k||c.type==al?delete b.o[c.pointerId]:c.type==bl&&(b.o[c.pointerId]=!0);b.v=Object.keys(b.o).length}m=Uk.prototype;m.hf=function(b){Zk(this,b);var c=new Tk($k,this.f,b);this.B(c);!this.j&&0===b.button&&Vk(this,this.b);0===this.v&&(this.c.forEach(G),this.c.length=0,this.j=!1,this.b=null,hb(this.a),this.a=null)};
m.Bh=function(b){Zk(this,b);var c=new Tk(bl,this.f,b);this.B(c);this.b=b;0===this.c.length&&(this.a=new Ik(document),this.c.push(I(this.a,cl,this.zi,this),I(this.a,$k,this.hf,this),I(this.g,al,this.hf,this)))};m.zi=function(b){if(b.clientX!=this.b.clientX||b.clientY!=this.b.clientY){this.j=!0;var c=new Tk(dl,this.f,b,this.j);this.B(c)}b.preventDefault()};m.kj=function(b){this.B(new Tk(b.type,this.f,b,!(!this.b||b.clientX==this.b.clientX&&b.clientY==this.b.clientY)))};
m.L=function(){this.l&&(G(this.l),this.l=null);this.u&&(G(this.u),this.u=null);this.c.forEach(G);this.c.length=0;this.a&&(hb(this.a),this.a=null);this.g&&(hb(this.g),this.g=null);Uk.U.L.call(this)};var Yk="singleclick",Wk="click",Xk="dblclick",dl="pointerdrag",cl="pointermove",bl="pointerdown",$k="pointerup",al="pointercancel",el={ek:Yk,Tj:Wk,Uj:Xk,Xj:dl,$j:cl,Wj:bl,ck:$k,bk:"pointerover",ak:"pointerout",Yj:"pointerenter",Zj:"pointerleave",Vj:al};function fl(b,c,d,e,f,g,h,k){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;0===c&&0===d||yb(b,c,d);if(1!=e||1!=f){c=b[1]*e;d=b[2]*e;var l=b[3]*e,n=b[4]*f,q=b[5]*f,p=b[6]*f;f=b[7]*f;var r=1*b[8],u=1*b[9],v=1*b[10],A=1*b[11],x=b[12],C=b[13],H=b[14],E=b[15];b[0]*=e;b[1]=c;b[2]=d;b[3]=l;b[4]=n;b[5]=q;b[6]=p;b[7]=f;b[8]=r;b[9]=u;b[10]=v;b[11]=A;b[12]=x;b[13]=C;b[14]=H;b[15]=E}0!==g&&(e=b[0],c=b[1],d=b[2],l=b[3],n=b[4],q=b[5],p=b[6],
f=b[7],r=Math.cos(g),g=Math.sin(g),b[0]=e*r+n*g,b[1]=c*r+q*g,b[2]=d*r+p*g,b[3]=l*r+f*g,b[4]=e*-g+n*r,b[5]=c*-g+q*r,b[6]=d*-g+p*r,b[7]=l*-g+f*r);0===h&&0===k||yb(b,h,k);return b}function gl(b,c,d){var e=b[1],f=b[5],g=b[13],h=c[0];c=c[1];d[0]=b[0]*h+b[4]*c+b[12];d[1]=e*h+f*c+g;return d};function hl(b){kb.call(this);this.I=b}y(hl,kb);function il(b,c,d){return function(e,f){return Gg(b,c,e,f,function(b){d[e]||(d[e]={});d[e][b.oa.toString()]=b})}}hl.prototype.ma=function(){return this.I};hl.prototype.P=function(b){2===b.target.T()&&jl(this)};function jl(b){var c=b.ma();jf(c)&&"ready"==c.Qd()&&b.b()}function kl(b,c){c.vf()&&b.Tc.push(qa(function(b,c,f){c=w(b).toString();b.wf(f.O.projection,f.se[c])},c))}
function ll(b,c){if(c){var d,e,f;e=0;for(f=c.length;e<f;++e)d=c[e],b[w(d).toString()]=d}}function ml(b,c){var d=c.qa;void 0!==d&&("string"===typeof d?b.Mb[d]="":ka(d)&&(b.Mb[d.src]=d.href))}function nl(b,c,d,e){c=w(c).toString();d=d.toString();c in b?d in b[c]?b[c][d].extend(e):b[c][d]=e:(b[c]={},b[c][d]=e)}function ol(b,c,d){return[c*(Math.round(b[0]/c)+d[0]%2/2),c*(Math.round(b[1]/c)+d[1]%2/2)]}
function pl(b,c,d,e,f,g,h,k){var l=w(c).toString();l in b.oc||(b.oc[l]={});var n=b.oc[l];b=b.xj;var q=d.Ga,p,r,u,v,A,x;for(x=h;x>=q;--x)for(r=sg(d,g,x,r),u=d.S(x),v=r.b;v<=r.a;++v)for(A=r.c;A<=r.f;++A)h-x<=k?(p=Qg(c,x,v,A,e,f),0==p.T()&&(n[p.oa.toString()]=!0,p.cc()in b.f||b.i([p,l,Bg(d,p.oa),u]))):c.$f(x,v,A,f)};function ql(b){b=b||{};this.g=void 0!==b.anchor?b.anchor:[.5,.5];this.c=null;this.b=void 0!==b.ld?b.ld:"top-left";this.j=void 0!==b.md?b.md:"fraction";this.u=void 0!==b.od?b.od:"fraction";var c=void 0!==b.crossOrigin?b.crossOrigin:null,d=void 0!==b.Th?b.Th:null,e=void 0!==b.Uh?b.Uh:null,f=b.src;void 0!==f&&0!==f.length||!d||(f=d.src||w(d).toString());var g=void 0!==b.src?0:2,h=void 0!==b.color?mh(b.color):null,k=rl.Ze(),l=k.get(f,c,h);l||(l=new sl(d,f,e,c,g,h),k.set(f,c,h,l));this.a=l;this.v=void 0!==
b.offset?b.offset:[0,0];this.f=void 0!==b.sf?b.sf:"top-left";this.i=null;this.l=void 0!==b.size?b.size:null;Ih.call(this,{opacity:void 0!==b.opacity?b.opacity:1,rotation:void 0!==b.rotation?b.rotation:0,scale:void 0!==b.scale?b.scale:1,Ua:void 0!==b.Ua?b.Ua:!0,qb:void 0!==b.qb?b.qb:!1})}y(ql,Ih);m=ql.prototype;
m.Yb=function(){if(this.c)return this.c;var b=this.g,c=this.ob();if("fraction"==this.j||"fraction"==this.u){if(!c)return null;b=this.g.slice();"fraction"==this.j&&(b[0]*=c[0]);"fraction"==this.u&&(b[1]*=c[1])}if("top-left"!=this.b){if(!c)return null;b===this.g&&(b=this.g.slice());if("top-right"==this.b||"bottom-right"==this.b)b[0]=-b[0]+c[0];if("bottom-left"==this.b||"bottom-right"==this.b)b[1]=-b[1]+c[1]}return this.c=b};m.Rc=function(){var b=this.a;return b.c?b.c:b.a};m.Md=function(){return this.a.f};
m.dc=function(){return this.a.b};m.$d=function(){var b=this.a;if(!b.j)if(b.u){var c=b.f[0],d=b.f[1],e=Hf(c,d);e.fillRect(0,0,c,d);b.j=e.canvas}else b.j=b.a;return b.j};m.Qa=function(){if(this.i)return this.i;var b=this.v;if("top-left"!=this.f){var c=this.ob(),d=this.a.f;if(!c||!d)return null;b=b.slice();if("top-right"==this.f||"bottom-right"==this.f)b[0]=d[0]-c[0]-b[0];if("bottom-left"==this.f||"bottom-right"==this.f)b[1]=d[1]-c[1]-b[1]}return this.i=b};m.ob=function(){return this.l?this.l:this.a.f};
m.Wd=function(b,c){return I(this.a,"change",b,c)};m.load=function(){this.a.load()};m.qe=function(b,c){cb(this.a,"change",b,c)};function sl(b,c,d,e,f,g){ib.call(this);this.j=null;this.a=b?b:new Image;null!==e&&(this.a.crossOrigin=e);this.c=g?document.createElement("CANVAS"):null;this.i=g;this.g=null;this.b=f;this.f=d;this.l=c;this.u=!1;2==this.b&&tl(this)}y(sl,ib);function tl(b){var c=Hf(1,1);try{c.drawImage(b.a,0,0),c.getImageData(0,0,1,1)}catch(d){b.u=!0}}
sl.prototype.o=function(){this.b=3;this.g.forEach(G);this.g=null;this.B("change")};
sl.prototype.v=function(){this.b=2;this.f=[this.a.width,this.a.height];this.g.forEach(G);this.g=null;tl(this);if(!this.u&&null!==this.i){this.c.width=this.a.width;this.c.height=this.a.height;var b=this.c.getContext("2d");b.drawImage(this.a,0,0);for(var c=b.getImageData(0,0,this.a.width,this.a.height),d=c.data,e=this.i[0]/255,f=this.i[1]/255,g=this.i[2]/255,h=0,k=d.length;h<k;h+=4)d[h]*=e,d[h+1]*=f,d[h+2]*=g;b.putImageData(c,0,0)}this.B("change")};
sl.prototype.load=function(){if(0==this.b){this.b=1;this.g=[I(this.a,"error",this.o,this,!0),I(this.a,"load",this.v,this,!0)];try{this.a.src=this.l}catch(b){this.o()}}};function rl(){this.a={};this.b=0}(function(){var b=rl;b.Ze=function(){return b.jf?b.jf:b.jf=new b}})();rl.prototype.clear=function(){this.a={};this.b=0};rl.prototype.get=function(b,c,d){b=c+":"+b+":"+(d?oh(d):"null");return b in this.a?this.a[b]:null};rl.prototype.set=function(b,c,d,e){this.a[c+":"+b+":"+(d?oh(d):"null")]=e;++this.b};function ul(b,c){db.call(this);this.u=c;this.b={};this.g={}}y(ul,db);ul.prototype.L=function(){for(var b in this.b)hb(this.b[b]);ul.U.L.call(this)};function vl(){var b=rl.Ze();if(32<b.b){var c=0,d,e;for(d in b.a)e=b.a[d],0!==(c++&3)||jb(e)||(delete b.a[d],--b.b)}}ul.prototype.o=function(){this.u.render()};ul.prototype.l=Md;ul.prototype.C=function(b,c){for(var d in this.b)if(!(c&&d in c.Ud)){var e=d,f=this.b[e];delete this.b[e];G(this.g[e]);delete this.g[e];hb(f)}};
function Yc(b,c){return b.zIndex-c.zIndex};function wl(b,c){this.l=b;this.g=c;this.a=[];this.b=[];this.f={}}wl.prototype.clear=function(){this.a.length=0;this.b.length=0;Va(this.f)};wl.prototype.i=function(b){var c=this.l(b);return Infinity!=c?(this.a.push(b),this.b.push(c),this.f[this.g(b)]=!0,xl(this,0,this.a.length-1),!0):!1};wl.prototype.Pa=function(){return this.a.length};wl.prototype.Ja=function(){return 0===this.a.length};
function yl(b,c){for(var d=b.a,e=b.b,f=d.length,g=d[c],h=e[c],k=c;c<f>>1;){var l=2*c+1,n=2*c+2,l=n<f&&e[n]<e[l]?n:l;d[c]=d[l];e[c]=e[l];c=l}d[c]=g;e[c]=h;xl(b,k,c)}function xl(b,c,d){var e=b.a;b=b.b;for(var f=e[d],g=b[d];d>c;){var h=d-1>>1;if(b[h]>g)e[d]=e[h],b[d]=b[h],d=h;else break}e[d]=f;b[d]=g};function zl(b,c){wl.call(this,function(c){return b.apply(null,c)},function(b){return b[0].cc()});this.o=c;this.c=0;this.j={}}y(zl,wl);zl.prototype.i=function(b){var c=zl.U.i.call(this,b);c&&I(b[0],"change",this.u,this);return c};zl.prototype.u=function(b){b=b.target;var c=b.T();if(2===c||3===c||4===c)cb(b,"change",this.u,this),b=b.cc(),b in this.j&&(delete this.j[b],--this.c),this.o()};function Al(b){return function(c){if(c)return[Ce(c[0],b[0],b[2]),Ce(c[1],b[1],b[3])]}}function Bl(b){return b};function Cl(b){return function(c,d,e){if(void 0!==c)return c=Sc(b,c,e),c=Ce(c+d,0,b.length-1),b[c]}}function Dl(b,c,d){return function(e,f,g){if(void 0!==e)return e=Math.max(Math.floor(Math.log(c/e)/Math.log(b)+(0<g?0:0>g?1:.5))+f,0),void 0!==d&&(e=Math.min(e,d)),c/Math.pow(b,e)}};function El(b){if(void 0!==b)return 0}function Fl(b,c){if(void 0!==b)return b+c}function Gl(b){var c=2*Math.PI/b;return function(b,e){if(void 0!==b)return b=Math.floor((b+e)/c+.5)*c}}function Hl(){var b=5*Math.PI/180;return function(c,d){if(void 0!==c)return Math.abs(c+d)<=b?0:c+d}};function Il(b,c,d){this.center=b;this.resolution=c;this.rotation=d};function Jl(b){mb.call(this);b=b||{};this.i=[0,0];var c={};c.center=void 0!==b.center?b.center:null;this.l=$e(b.projection);var d,e,f,g=void 0!==b.Ga?b.Ga:0;d=void 0!==b.Ra?b.Ra:28;var h=void 0!==b.b?b.b:2;if(void 0!==b.Ca)d=b.Ca,e=d[0],f=d[d.length-1],d=Cl(d);else{e=$e(b.projection);f=e.G();var k=(f?Math.max(Qb(f),Rb(f)):360*Ke.degrees/Te(e))/256/Math.pow(2,0),l=k/Math.pow(2,28);e=b.bb;void 0!==e?g=0:e=k/Math.pow(h,g);f=b.Sa;void 0===f&&(f=void 0!==b.Ra?void 0!==b.bb?e/Math.pow(h,d):k/Math.pow(h,
d):l);d=g+Math.floor(Math.log(e/f)/Math.log(h));f=e/Math.pow(h,d-g);d=Dl(h,e,d-g)}this.c=e;this.j=f;this.g=g;g=void 0!==b.extent?Al(b.extent):Bl;(void 0!==b.a?b.a:1)?(e=b.wd,e=void 0===e||!0===e?Hl():!1===e?Fl:ha(e)?Gl(e):Fl):e=El;this.a=new Il(g,d,e);void 0!==b.resolution?c.resolution=b.resolution:void 0!==b.zoom&&(c.resolution=this.xa(this.c,b.zoom-this.g));c.rotation=void 0!==b.rotation?b.rotation:0;this.ka(c)}y(Jl,mb);m=Jl.prototype;m.xa=function(b,c,d){return this.a.resolution(b,c||0,d||0)};
m.wd=function(b,c){return this.a.rotation(b,c||0)};function Kl(b){return b.get("center")}m.Y=function(){return this.l};m.S=function(){return this.get("resolution")};function Ll(b){return b.get("rotation")}m.T=function(){var b=Kl(this),c=this.Y(),d=this.S(),e=Ll(this);return{center:[Math.round(b[0]/d)*d,Math.round(b[1]/d)*d],projection:void 0!==c?c:null,resolution:d,rotation:e}};
function Ml(b){var c,d=b.S();if(void 0!==d){var e,f=0;do{e=b.xa(b.c,f);if(e==d){c=f;break}++f}while(e>b.j)}return void 0!==c?b.g+c:c}
function Nl(b,c,d,e){if(!(c instanceof hi)){var f=c[0],g=c[1],h=c[2],k=c[3],f=[f,g,f,k,h,k,h,g,f,g],g=new Ji(null);g.K("XY",f,[f.length]);c=g}f=e||{};e=void 0!==f.padding?f.padding:[0,0,0,0];var k=void 0!==f.xa?f.xa:!0,g=void 0!==f.ri?f.ri:!1,l;void 0!==f.Sa?l=f.Sa:void 0!==f.Ra?l=b.xa(b.c,f.Ra-b.g,0):l=0;var n=c.s,h=Ll(b),f=Math.cos(-h),h=Math.sin(-h),q=Infinity,p=Infinity,r=-Infinity,u=-Infinity;c=c.a;for(var v=0,A=n.length;v<A;v+=c)var x=n[v]*f-n[v+1]*h,C=n[v]*h+n[v+1]*f,q=Math.min(q,x),p=Math.min(p,
C),r=Math.max(r,x),u=Math.max(u,C);c=[q,p,r,u];d=[d[0]-e[1]-e[3],d[1]-e[0]-e[2]];d=Math.max(Qb(c)/d[0],Rb(c)/d[1]);d=isNaN(d)?l:Math.max(d,l);k&&(l=b.xa(d,0,0),!g&&l<d&&(l=b.xa(l,-1,0)),d=l);Ol(b,d);h=-h;l=(q+r)/2+(e[1]-e[3])/2*d;d=(p+u)/2+(e[0]-e[2])/2*d;Pl(b,[l*f-d*h,d*f+l*h])}function Ql(b){return!!Kl(b)&&void 0!==b.S()}m.rotate=function(b,c){if(void 0!==c){var d,e=Kl(this);void 0!==e&&(d=[e[0]-c[0],e[1]-c[1]],Bb(d,b-Ll(this)),Ab(d,c));Pl(this,d)}this.set("rotation",b)};
function Pl(b,c){b.set("center",c)}function Rl(b,c){b.i[1]+=c}function Ol(b,c){b.set("resolution",c)}function Sl(b,c){var d=b.xa(b.c,c-b.g,0);Ol(b,d)};function Tl(b){mb.call(this);this.element=b.element?b.element:null;this.i=this.A=null;this.j=[];this.render=b.render?b.render:Md;b.target&&(this.A=Ac(b.target))}y(Tl,mb);Tl.prototype.L=function(){Jc(this.element);Tl.U.L.call(this)};Tl.prototype.setMap=function(b){this.i&&Jc(this.element);for(var c=0,d=this.j.length;c<d;++c)G(this.j[c]);this.j.length=0;if(this.i=b)(this.A?this.A:b.o).appendChild(this.element),this.render!==Md&&this.j.push(I(b,"postrender",this.render,this)),b.render()};function Ul(b){b=b?b:{};this.C=document.createElement("UL");this.l=document.createElement("LI");this.C.appendChild(this.l);Lj(this.l,!1);this.g=void 0!==b.collapsed?b.collapsed:!0;this.o=void 0!==b.Kg?b.Kg:!0;this.o||(this.g=!1);var c=void 0!==b.className?b.className:"ol-attribution",d=void 0!==b.pe?b.pe:"Attributions",e=void 0!==b.Jg?b.Jg:"\u00bb";this.D="string"===typeof e?Fc("SPAN",{},e):e;e=void 0!==b.label?b.label:"i";this.I="string"===typeof e?Fc("SPAN",{},e):e;d=Fc("BUTTON",{type:"button",
title:d},this.o&&!this.g?this.D:this.I);I(d,"click",this.X,this);c=Fc("DIV",c+" ol-unselectable ol-control"+(this.g&&this.o?" ol-collapsed":"")+(this.o?"":" ol-uncollapsible"),this.C,d);Tl.call(this,{element:c,render:b.render?b.render:Vl,target:b.target});this.v=!0;this.c={};this.a={};this.P={}}y(Ul,Tl);
function Vl(b){if(b=b.frameState){var c,d,e,f,g,h,k,l,n,q,p,r=b.Vd,u=Ua({},b.ca),v={},A=b.O.projection;d=0;for(c=r.length;d<c;d++)if(h=r[d].layer.N())if(q=w(h).toString(),n=h.o())for(e=0,f=n.length;e<f;e++)if(k=n[e],l=w(k).toString(),!(l in u)){if(g=b.se[q]){var x=h.Za(A);a:{p=k;var C=A;if(p.a){var H=void 0,E=void 0,D=void 0,R=void 0;for(R in g)if(R in p.a)for(var D=g[R],F,H=0,E=p.a[R].length;H<E;++H){F=p.a[R][H];if(Ge(F,D)){p=!0;break a}var N=sg(x,Eg(C),parseInt(R,10)),T=N.a-N.b+1;if(D.b<N.b||D.a>
N.a)if(Ge(F,new Ee(zb(D.b,T),zb(D.a,T),D.c,D.f))||D.a-D.b+1>T&&Ge(F,N)){p=!0;break a}}p=!1}else p=!0}}else p=!1;p?(l in v&&delete v[l],u[l]=k):v[l]=k}c=[u,v];d=c[0];c=c[1];for(var K in this.c)K in d?(this.a[K]||(Lj(this.c[K],!0),this.a[K]=!0),delete d[K]):K in c?(this.a[K]&&(Lj(this.c[K],!1),delete this.a[K]),delete c[K]):(Jc(this.c[K]),delete this.c[K],delete this.a[K]);for(K in d)e=document.createElement("LI"),e.innerHTML=d[K].b,this.C.appendChild(e),this.c[K]=e,this.a[K]=!0;for(K in c)e=document.createElement("LI"),
e.innerHTML=c[K].b,Lj(e,!1),this.C.appendChild(e),this.c[K]=e;K=!Wa(this.a)||!Wa(b.Mb);this.v!=K&&(Lj(this.element,K),this.v=K);K&&Wa(this.a)?gk(this.element,"ol-logo-only"):ik(this.element,"ol-logo-only");var Z;b=b.Mb;K=this.P;for(Z in K)Z in b||(Jc(K[Z]),delete K[Z]);for(var X in b)X in K||(Z=new Image,Z.src=X,d=b[X],""===d?d=Z:(d=Fc("A",{href:d}),d.appendChild(Z)),this.l.appendChild(d),K[X]=d);Lj(this.l,!Wa(b))}else this.v&&(Lj(this.element,!1),this.v=!1)}
Ul.prototype.X=function(b){b.preventDefault();b=this.element;fk(b,"ol-collapsed")?ik(b,"ol-collapsed"):gk(b,"ol-collapsed");if(this.g){b=this.I;var c=b.parentNode;c&&c.replaceChild(this.D,b)}else b=this.D,(c=b.parentNode)&&c.replaceChild(this.I,b);this.g=!this.g};function Wl(b){return 1-Math.pow(1-b,3)}function Xl(b){return 3*b*b-2*b*b*b}function Yl(b){return b};function Zl(b){var c=b.source,d=b.start?b.start:Date.now(),e=c[0],f=c[1],g=void 0!==b.duration?b.duration:1E3,h=b.la?b.la:Xl;return function(b,c){if(c.time<d)return c.animate=!0,c.fa[0]+=1,!0;if(c.time<d+g){var n=1-h((c.time-d)/g),q=e-c.O.center[0],p=f-c.O.center[1];c.animate=!0;c.O.center[0]+=n*q;c.O.center[1]+=n*p;c.fa[0]+=1;return!0}return!1}}
function $l(b){var c=b.rotation?b.rotation:0,d=b.start?b.start:Date.now(),e=void 0!==b.duration?b.duration:1E3,f=b.la?b.la:Xl,g=b.anchor?b.anchor:null;return function(b,k){if(k.time<d)return k.animate=!0,k.fa[0]+=1,!0;if(k.time<d+e){var l=1-f((k.time-d)/e),l=(c-k.O.rotation)*l;k.animate=!0;k.O.rotation+=l;if(g){var n=k.O.center;n[0]-=g[0];n[1]-=g[1];Bb(n,l);Ab(n,g)}k.fa[0]+=1;return!0}return!1}}
function am(b){var c=b.resolution,d=b.start?b.start:Date.now(),e=void 0!==b.duration?b.duration:1E3,f=b.la?b.la:Xl;return function(b,h){if(h.time<d)return h.animate=!0,h.fa[0]+=1,!0;if(h.time<d+e){var k=1-f((h.time-d)/e),l=c-h.O.resolution;h.animate=!0;h.O.resolution+=k*l;h.fa[0]+=1;return!0}return!1}};function bm(b){b=b?b:{};var c=void 0!==b.className?b.className:"ol-rotate",d=void 0!==b.label?b.label:"\u21e7";this.a=null;"string"===typeof d?this.a=Fc("SPAN","ol-compass",d):(this.a=d,gk(this.a,"ol-compass"));d=Fc("BUTTON",{"class":c+"-reset",type:"button",title:b.pe?b.pe:"Reset rotation"},this.a);I(d,"click",bm.prototype.v,this);c=Fc("DIV",c+" ol-unselectable ol-control",d);d=b.render?b.render:cm;this.g=b.nj?b.nj:void 0;Tl.call(this,{element:c,render:d,target:b.target});this.l=void 0!==b.duration?
b.duration:250;this.c=void 0!==b.Eg?b.Eg:!0;this.o=void 0;this.c&&gk(this.element,"ol-hidden")}y(bm,Tl);bm.prototype.v=function(b){b.preventDefault();if(void 0!==this.g)this.g();else{b=this.i;var c=U(b);if(c){var d=Ll(c);void 0!==d&&(0<this.l&&(d%=2*Math.PI,d<-Math.PI&&(d+=2*Math.PI),d>Math.PI&&(d-=2*Math.PI),b.Fa($l({rotation:d,duration:this.l,la:Wl}))),c.set("rotation",0))}}};
function cm(b){if(b=b.frameState){b=b.O.rotation;if(b!=this.o){var c="rotate("+b+"rad)";if(this.c){var d=this.element;0===b?gk(d,"ol-hidden"):ik(d,"ol-hidden")}this.a.style.msTransform=c;this.a.style.webkitTransform=c;this.a.style.transform=c}this.o=b}};function dm(b){b=b?b:{};var c=void 0!==b.className?b.className:"ol-zoom",d=void 0!==b.jb?b.jb:1,e=void 0!==b.Pj?b.Pj:"\u2212",f=void 0!==b.Qj?b.Qj:"Zoom out",g=Fc("BUTTON",{"class":c+"-in",type:"button",title:void 0!==b.Oj?b.Oj:"Zoom in"},void 0!==b.Nj?b.Nj:"+");I(g,"click",qa(dm.prototype.c,d),this);e=Fc("BUTTON",{"class":c+"-out",type:"button",title:f},e);I(e,"click",qa(dm.prototype.c,-d),this);c=Fc("DIV",c+" ol-unselectable ol-control",g,e);Tl.call(this,{element:c,target:b.target});this.a=void 0!==
b.duration?b.duration:250}y(dm,Tl);dm.prototype.c=function(b,c){c.preventDefault();var d=this.i,e=U(d);if(e){var f=e.S();f&&(0<this.a&&d.Fa(am({resolution:f,duration:this.a,la:Wl})),d=e.xa(f,b),Ol(e,d))}};function em(){this.a=[];this.b=this.f=0}function fm(b,c){var d=b.b,e=.05-d,f=Math.log(.05/b.b)/-.005;return Zl({source:c,duration:f,la:function(b){return d*(Math.exp(-.005*b*f)-1)/e}})};function gm(b){mb.call(this);this.g=null;this.setActive(!0);this.handleEvent=b.handleEvent}y(gm,mb);gm.prototype.getActive=function(){return this.get("active")};gm.prototype.setActive=function(b){this.set("active",b)};gm.prototype.setMap=function(b){this.g=b};function hm(b,c,d,e,f){if(void 0!==d){var g=Ll(c),h=Kl(c);void 0!==g&&h&&f&&0<f&&(b.Fa($l({rotation:g,duration:f,la:Wl})),e&&b.Fa(Zl({source:h,duration:f,la:Wl})));c.rotate(d,e)}}
function im(b,c,d,e,f){var g=c.S();d=c.xa(g,d,0);jm(b,c,d,e,f)}function jm(b,c,d,e,f){if(d){var g=c.S(),h=Kl(c);void 0!==g&&h&&d!==g&&f&&0<f&&(b.Fa(am({resolution:g,duration:f,la:Wl})),e&&b.Fa(Zl({source:h,duration:f,la:Wl})));if(e){var k;b=Kl(c);f=c.S();void 0!==b&&void 0!==f&&(k=[e[0]-d*(e[0]-b[0])/f,e[1]-d*(e[1]-b[1])/f]);Pl(c,k)}Ol(c,d)}};function km(b){b=b?b:{};this.a=b.jb?b.jb:1;gm.call(this,{handleEvent:lm});this.c=void 0!==b.duration?b.duration:250}y(km,gm);function lm(b){var c=!1,d=b.originalEvent;if(b.type==Xk){var c=b.map,e=b.coordinate,d=d.shiftKey?-this.a:this.a,f=U(c);im(c,f,d,e,this.c);b.preventDefault();c=!0}return!c};function mm(b){b=b.originalEvent;return b.altKey&&!(b.metaKey||b.ctrlKey)&&b.shiftKey}function nm(b){b=b.originalEvent;return 0==b.button&&!(kc&&uh&&b.ctrlKey)}function om(b){b=b.originalEvent;return!b.altKey&&!(b.metaKey||b.ctrlKey)&&!b.shiftKey}function pm(b){b=b.originalEvent;return!b.altKey&&!(b.metaKey||b.ctrlKey)&&b.shiftKey}function qm(b){b=b.originalEvent.target.tagName;return"INPUT"!==b&&"SELECT"!==b&&"TEXTAREA"!==b}function rm(b){return"mouse"==b.a.pointerType};function sm(b){b=b?b:{};gm.call(this,{handleEvent:b.handleEvent?b.handleEvent:tm});this.Wa=b.$a?b.$a:eh;this.Xa=b.Kb?b.Kb:Md;this.xb=b.yh?b.yh:Md;this.yb=b.ab?b.ab:eh;this.A=!1;this.X={};this.i=[]}y(sm,gm);function um(b){for(var c=b.length,d=0,e=0,f=0;f<c;f++)d+=b[f].clientX,e+=b[f].clientY;return[d/c,e/c]}
function tm(b){if(!(b instanceof Tk))return!0;var c=!1,d=b.type;if(d===bl||d===dl||d===$k){d=b.a;b.type==$k?delete this.X[d.pointerId]:b.type==bl?this.X[d.pointerId]=d:d.pointerId in this.X&&(this.X[d.pointerId]=d);var d=this.X,e=[],f;for(f in d)e.push(d[f]);this.i=e}this.A&&(b.type==dl?this.Xa(b):b.type==$k&&(this.A=this.yb(b)));b.type==bl?(this.A=b=this.Wa(b),c=this.sb(b)):b.type==cl&&this.xb(b);return!c}sm.prototype.sb=function(b){return b};function vm(b){sm.call(this,{$a:wm,Kb:xm,ab:ym});b=b?b:{};this.a=b.Yh;this.c=this.j=null;this.o=b.ta?b.ta:om;this.l=!1}y(vm,sm);function xm(b){var c=um(this.i);this.a&&this.a.a.push(c[0],c[1],Date.now());if(this.c){var d=this.c[0]-c[0],e=c[1]-this.c[1];b=b.map;var f=U(b),g=f.T(),e=d=[d,e],h=g.resolution;e[0]*=h;e[1]*=h;Bb(d,g.rotation);Ab(d,g.center);d=f.a.center(d);b.render();Pl(f,d)}this.c=c}
function ym(b){b=b.map;var c=U(b);if(0===this.i.length){var d;if(d=!this.l&&this.a)if(d=this.a,6>d.a.length)d=!1;else{var e=Date.now()-100,f=d.a.length-3;if(d.a[f+2]<e)d=!1;else{for(var g=f-3;0<g&&d.a[g+2]>e;)g-=3;var e=d.a[f+2]-d.a[g+2],h=d.a[f]-d.a[g],f=d.a[f+1]-d.a[g+1];d.f=Math.atan2(f,h);d.b=Math.sqrt(h*h+f*f)/e;d=.05<d.b}}d&&(d=(.05-this.a.b)/-.005,f=this.a.f,g=Kl(c),this.j=fm(this.a,g),b.Fa(this.j),g=zm(b,g),d=b.Gb([g[0]-d*Math.cos(f),g[1]-d*Math.sin(f)]),d=c.a.center(d),Pl(c,d));Rl(c,-1);
b.render();return!1}this.c=null;return!0}function wm(b){if(0<this.i.length&&this.o(b)){var c=b.map,d=U(c);this.c=null;this.A||Rl(d,1);c.render();this.j&&Uc(c.D,this.j)&&(Pl(d,b.frameState.O.center),this.j=null);this.a&&(b=this.a,b.a.length=0,b.f=0,b.b=0);this.l=1<this.i.length;return!0}return!1}vm.prototype.sb=eh;function Am(b){b=b?b:{};sm.call(this,{$a:Bm,Kb:Cm,ab:Dm});this.c=b.ta?b.ta:mm;this.a=void 0;this.j=void 0!==b.duration?b.duration:250}y(Am,sm);function Cm(b){if(rm(b)){var c=b.map,d=Em(c);b=b.pixel;d=Math.atan2(d[1]/2-b[1],b[0]-d[0]/2);if(void 0!==this.a){b=d-this.a;var e=U(c),f=Ll(e);c.render();hm(c,e,f-b)}this.a=d}}function Dm(b){if(!rm(b))return!0;b=b.map;var c=U(b);Rl(c,-1);var d=Ll(c),e=this.j,d=c.wd(d,0);hm(b,c,d,void 0,e);return!1}
function Bm(b){return rm(b)&&nm(b)&&this.c(b)?(b=b.map,Rl(U(b),1),b.render(),this.a=void 0,!0):!1}Am.prototype.sb=eh;function Fm(b){this.c=null;this.b=document.createElement("div");this.b.style.position="absolute";this.b.className="ol-box "+b;this.f=this.g=this.a=null}y(Fm,db);Fm.prototype.L=function(){this.setMap(null);Fm.U.L.call(this)};function Gm(b){var c=b.g,d=b.f;b=b.b.style;b.left=Math.min(c[0],d[0])+"px";b.top=Math.min(c[1],d[1])+"px";b.width=Math.abs(d[0]-c[0])+"px";b.height=Math.abs(d[1]-c[1])+"px"}
Fm.prototype.setMap=function(b){if(this.a){this.a.v.removeChild(this.b);var c=this.b.style;c.left=c.top=c.width=c.height="inherit"}(this.a=b)&&this.a.v.appendChild(this.b)};function Hm(b){var c=b.g,d=b.f,c=[c,[c[0],d[1]],d,[d[0],c[1]]].map(b.a.Gb,b.a);c[4]=c[0].slice();b.c?b.c.Z([c]):b.c=new Ji([c])}Fm.prototype.J=function(){return this.c};function Im(b,c,d){Sa.call(this,b);this.coordinate=c;this.mapBrowserEvent=d}y(Im,Sa);function Jm(b){sm.call(this,{$a:Km,Kb:Lm,ab:Mm});b=b?b:{};this.a=new Fm(b.className||"ol-dragbox");this.c=null;this.v=b.ta?b.ta:fh;this.o=b.Hg?b.Hg:Nm}y(Jm,sm);function Nm(b,c,d){b=d[0]-c[0];c=d[1]-c[1];return 64<=b*b+c*c}function Lm(b){if(rm(b)){var c=this.a,d=b.pixel;c.g=this.c;c.f=d;Hm(c);Gm(c);this.B(new Im("boxdrag",b.coordinate,b))}}Jm.prototype.J=function(){return this.a.J()};Jm.prototype.l=Md;
function Mm(b){if(!rm(b))return!0;this.a.setMap(null);this.o(b,this.c,b.pixel)&&(this.l(b),this.B(new Im("boxend",b.coordinate,b)));return!1}function Km(b){if(rm(b)&&nm(b)&&this.v(b)){this.c=b.pixel;this.a.setMap(b.map);var c=this.a,d=this.c;c.g=this.c;c.f=d;Hm(c);Gm(c);this.B(new Im("boxstart",b.coordinate,b));return!0}return!1};function Om(b){b=b?b:{};var c=b.ta?b.ta:pm;this.j=void 0!==b.duration?b.duration:200;Jm.call(this,{ta:c,className:b.className||"ol-dragzoom"})}y(Om,Jm);Om.prototype.l=function(){var b=this.g,c=U(b),d=Em(b),e=this.J().G(),d=c.xa(Math.max(Qb(e)/d[0],Rb(e)/d[1])),f=c.S(),g=Kl(c);b.Fa(am({resolution:f,duration:this.j,la:Wl}));b.Fa(Zl({source:g,duration:this.j,la:Wl}));Pl(c,Sb(e));Ol(c,d)};function Pm(b){gm.call(this,{handleEvent:Qm});b=b||{};this.a=void 0!==b.ta?b.ta:hh(om,qm);this.c=void 0!==b.duration?b.duration:100;this.i=void 0!==b.Qi?b.Qi:128}y(Pm,gm);
function Qm(b){var c=!1;if("keydown"==b.type){var d=b.originalEvent.keyCode;if(this.a(b)&&(40==d||37==d||39==d||38==d)){var e=b.map,c=U(e),f=c.S()*this.i,g=0,h=0;40==d?h=-f:37==d?g=-f:39==d?g=f:h=f;d=[g,h];Bb(d,Ll(c));f=this.c;if(g=Kl(c))f&&0<f&&e.Fa(Zl({source:g,duration:f,la:Yl})),e=c.a.center([g[0]+d[0],g[1]+d[1]]),Pl(c,e);b.preventDefault();c=!0}}return!c};function Rm(b){gm.call(this,{handleEvent:Sm});b=b?b:{};this.c=b.ta?b.ta:qm;this.a=b.jb?b.jb:1;this.i=void 0!==b.duration?b.duration:100}y(Rm,gm);function Sm(b){var c=!1;if("keydown"==b.type||"keypress"==b.type){var d=b.originalEvent.charCode;if(this.c(b)&&(43==d||45==d)){c=b.map;d=43==d?this.a:-this.a;c.render();var e=U(c);im(c,e,d,void 0,this.i);b.preventDefault();c=!0}}return!c};function Tm(b){gm.call(this,{handleEvent:Um});b=b||{};this.a=0;this.o=void 0!==b.duration?b.duration:250;this.v=void 0!==b.Kj?b.Kj:!0;this.i=null;this.j=this.c=void 0}y(Tm,gm);
function Um(b){var c=!1;if("wheel"==b.type||"mousewheel"==b.type){var c=b.map,d=b.originalEvent;this.v&&(this.i=b.coordinate);var e;"wheel"==b.type?(e=d.deltaY,sh&&d.deltaMode===t.WheelEvent.DOM_DELTA_PIXEL&&(e/=vh),d.deltaMode===t.WheelEvent.DOM_DELTA_LINE&&(e*=40)):"mousewheel"==b.type&&(e=-d.wheelDeltaY,th&&(e/=3));this.a+=e;void 0===this.c&&(this.c=Date.now());e=Math.max(80-(Date.now()-this.c),0);t.clearTimeout(this.j);this.j=t.setTimeout(this.l.bind(this,c),e);b.preventDefault();c=!0}return!c}
Tm.prototype.l=function(b){var c=Ce(this.a,-1,1),d=U(b);b.render();im(b,d,-c,this.i,this.o);this.a=0;this.i=null;this.j=this.c=void 0};function Vm(b){sm.call(this,{$a:Wm,Kb:Xm,ab:Zm});b=b||{};this.c=null;this.j=void 0;this.a=!1;this.l=0;this.v=void 0!==b.threshold?b.threshold:.3;this.o=void 0!==b.duration?b.duration:250}y(Vm,sm);
function Xm(b){var c=0,d=this.i[0],e=this.i[1],d=Math.atan2(e.clientY-d.clientY,e.clientX-d.clientX);void 0!==this.j&&(c=d-this.j,this.l+=c,!this.a&&Math.abs(this.l)>this.v&&(this.a=!0));this.j=d;b=b.map;d=b.a.getBoundingClientRect();e=um(this.i);e[0]-=d.left;e[1]-=d.top;this.c=b.Gb(e);this.a&&(d=U(b),e=Ll(d),b.render(),hm(b,d,e+c,this.c))}function Zm(b){if(2>this.i.length){b=b.map;var c=U(b);Rl(c,-1);if(this.a){var d=Ll(c),e=this.c,f=this.o,d=c.wd(d,0);hm(b,c,d,e,f)}return!1}return!0}
function Wm(b){return 2<=this.i.length?(b=b.map,this.c=null,this.j=void 0,this.a=!1,this.l=0,this.A||Rl(U(b),1),b.render(),!0):!1}Vm.prototype.sb=eh;function $m(b){sm.call(this,{$a:an,Kb:bn,ab:cn});b=b?b:{};this.c=null;this.l=void 0!==b.duration?b.duration:400;this.a=void 0;this.j=1}y($m,sm);function bn(b){var c=1,d=this.i[0],e=this.i[1],f=d.clientX-e.clientX,d=d.clientY-e.clientY,f=Math.sqrt(f*f+d*d);void 0!==this.a&&(c=this.a/f);this.a=f;1!=c&&(this.j=c);b=b.map;var f=U(b),d=f.S(),e=b.a.getBoundingClientRect(),g=um(this.i);g[0]-=e.left;g[1]-=e.top;this.c=b.Gb(g);b.render();jm(b,f,d*c,this.c)}
function cn(b){if(2>this.i.length){b=b.map;var c=U(b);Rl(c,-1);var d=c.S(),e=this.c,f=this.l,d=c.xa(d,0,this.j-1);jm(b,c,d,e,f);return!1}return!0}function an(b){return 2<=this.i.length?(b=b.map,this.c=null,this.a=void 0,this.j=1,this.A||Rl(U(b),1),b.render(),!0):!1}$m.prototype.sb=eh;function dn(b){b=b?b:{};var c=new pb,d=new em;(void 0!==b.Ke?b.Ke:1)&&c.push(new Am);(void 0!==b.Qg?b.Qg:1)&&c.push(new km({jb:b.Mj,duration:b.fd}));(void 0!==b.Rg?b.Rg:1)&&c.push(new vm({Yh:d}));(void 0!==b.ae?b.ae:1)&&c.push(new Vm);(void 0!==b.Pi?b.Pi:1)&&c.push(new $m({duration:b.fd}));if(void 0!==b.Xh?b.Xh:1)c.push(new Pm),c.push(new Rm({jb:b.Mj,duration:b.fd}));(void 0!==b.fi?b.fi:1)&&c.push(new Tm({duration:b.fd}));(void 0!==b.qj?b.qj:1)&&c.push(new Om({duration:b.fd}));return c};function en(b){Le.call(this,{code:b,units:"m",extent:fn,global:!0,Lj:gn})}y(en,Le);en.prototype.lb=function(b,c){return b/De(c[1]/6378137)};var hn=6378137*Math.PI,fn=[-hn,-hn,hn,hn],gn=[-180,-85,180,85],jn="EPSG:3857 EPSG:102100 EPSG:102113 EPSG:900913 urn:ogc:def:crs:EPSG:6.18:3:3857 urn:ogc:def:crs:EPSG::3857 http://www.opengis.net/gml/srs/epsg.xml#3857".split(" ").map(function(b){return new en(b)});
function kn(b,c,d){var e=b.length;d=1<d?d:2;void 0===c&&(2<d?c=b.slice():c=Array(e));for(var f=0;f<e;f+=d)c[f]=6378137*Math.PI*b[f]/180,c[f+1]=6378137*Math.log(Math.tan(Math.PI*(b[f+1]+90)/360));return c}function ln(b,c,d){var e=b.length;d=1<d?d:2;void 0===c&&(2<d?c=b.slice():c=Array(e));for(var f=0;f<e;f+=d)c[f]=180*b[f]/(6378137*Math.PI),c[f+1]=360*Math.atan(Math.exp(b[f+1]/6378137))/Math.PI-90;return c};var mn=new He(6378137);function nn(b,c){Le.call(this,{code:b,units:"degrees",extent:on,qd:c,global:!0,pf:pn,Lj:on})}y(nn,Le);nn.prototype.lb=function(b){return b};var on=[-180,-90,180,90],pn=Math.PI*mn.radius/180,qn=[new nn("CRS:84"),new nn("EPSG:4326","neu"),new nn("urn:ogc:def:crs:EPSG::4326","neu"),new nn("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new nn("urn:ogc:def:crs:OGC:1.3:CRS84"),new nn("urn:ogc:def:crs:OGC:2:84"),new nn("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new nn("urn:x-ogc:def:crs:EPSG:4326","neu")];function rn(b,c,d,e,f){this.Wa={};this.f=b;this.V=c;this.j=d;this.A=e;this.gd=f;this.g=this.a=this.b=this.ra=this.ha=this.qa=null;this.Ea=this.sa=this.v=this.I=this.D=this.C=0;this.La=!1;this.i=this.Ma=0;this.Na=!1;this.P=0;this.c="";this.l=this.W=this.xb=this.Xa=0;this.X=this.o=this.u=null;this.M=[];this.yb=wb()}
function sn(b,c,d){if(b.g){c=gi(c,0,d,2,b.A,b.M);d=b.f;var e=b.yb,f=d.globalAlpha;1!=b.v&&(d.globalAlpha=f*b.v);var g=b.Ma;b.La&&(g+=b.gd);var h,k;h=0;for(k=c.length;h<k;h+=2){var l=c[h]-b.C,n=c[h+1]-b.D;b.Na&&(l=Math.round(l),n=Math.round(n));if(0!==g||1!=b.i){var q=l+b.C,p=n+b.D;fl(e,q,p,b.i,b.i,g,-q,-p);d.setTransform(e[0],e[1],e[4],e[5],e[12],e[13])}d.drawImage(b.g,b.sa,b.Ea,b.P,b.I,l,n,b.P,b.I)}0===g&&1==b.i||d.setTransform(1,0,0,1,0,0);1!=b.v&&(d.globalAlpha=f)}}
function tn(b,c,d,e){var f=0;if(b.X&&""!==b.c){b.u&&un(b,b.u);b.o&&vn(b,b.o);var g=b.X,h=b.f,k=b.ra;k?(k.font!=g.font&&(k.font=h.font=g.font),k.textAlign!=g.textAlign&&(k.textAlign=h.textAlign=g.textAlign),k.textBaseline!=g.textBaseline&&(k.textBaseline=h.textBaseline=g.textBaseline)):(h.font=g.font,h.textAlign=g.textAlign,h.textBaseline=g.textBaseline,b.ra={font:g.font,textAlign:g.textAlign,textBaseline:g.textBaseline});c=gi(c,f,d,e,b.A,b.M);for(g=b.f;f<d;f+=e){h=c[f]+b.Xa;k=c[f+1]+b.xb;if(0!==b.W||
1!=b.l){var l=fl(b.yb,h,k,b.l,b.l,b.W,-h,-k);g.setTransform(l[0],l[1],l[4],l[5],l[12],l[13])}b.o&&g.strokeText(b.c,h,k);b.u&&g.fillText(b.c,h,k)}0===b.W&&1==b.l||g.setTransform(1,0,0,1,0,0)}}function wn(b,c,d,e,f,g){var h=b.f;b=gi(c,d,e,f,b.A,b.M);h.moveTo(b[0],b[1]);for(c=2;c<b.length;c+=2)h.lineTo(b[c],b[c+1]);g&&h.lineTo(b[0],b[1]);return e}function xn(b,c,d,e,f){var g=b.f,h,k;h=0;for(k=e.length;h<k;++h)d=wn(b,c,d,e[h],f,!0),g.closePath();return d}m=rn.prototype;
m.Cd=function(b){if(Vb(this.j,b.G())){if(this.b||this.a){this.b&&un(this,this.b);this.a&&vn(this,this.a);var c;c=this.A;var d=this.M,e=b.s;c=e?gi(e,0,e.length,b.a,c,d):null;d=c[2]-c[0];e=c[3]-c[1];d=Math.sqrt(d*d+e*e);e=this.f;e.beginPath();e.arc(c[0],c[1],d,0,2*Math.PI);this.b&&e.fill();this.a&&e.stroke()}""!==this.c&&tn(this,b.s.slice(0,b.a),2,2)}};m.Sg=function(b,c){var d=b.a,e,f;e=0;for(f=d.length;e<f;++e){var g=d[e];yn[g.aa()].call(this,g,c)}};
m.Hd=function(b){var c=b.s;b=b.a;this.g&&sn(this,c,c.length);""!==this.c&&tn(this,c,c.length,b)};m.Fd=function(b){var c=b.s;b=b.a;this.g&&sn(this,c,c.length);""!==this.c&&tn(this,c,c.length,b)};m.Dd=function(b){if(Vb(this.j,b.G())){if(this.a){vn(this,this.a);var c=this.f,d=b.s;c.beginPath();wn(this,d,0,d.length,b.a,!1);c.stroke()}""!==this.c&&(b=vi(b),tn(this,b,2,2))}};
m.Ed=function(b){var c=b.G();if(Vb(this.j,c)){if(this.a){vn(this,this.a);var c=this.f,d=b.s,e=0,f=b.Hb(),g=b.a;c.beginPath();var h,k;h=0;for(k=f.length;h<k;++h)e=wn(this,d,e,f[h],g,!1);c.stroke()}""!==this.c&&(b=Ai(b),tn(this,b,b.length,2))}};m.Id=function(b){if(Vb(this.j,b.G())){if(this.a||this.b){this.b&&un(this,this.b);this.a&&vn(this,this.a);var c=this.f;c.beginPath();xn(this,Ki(b),0,b.Hb(),b.a);this.b&&c.fill();this.a&&c.stroke()}""!==this.c&&(b=Li(b),tn(this,b,2,2))}};
m.Gd=function(b){if(Vb(this.j,b.G())){if(this.a||this.b){this.b&&un(this,this.b);this.a&&vn(this,this.a);var c=this.f,d=Oi(b),e=0,f=b.c,g=b.a,h,k;h=0;for(k=f.length;h<k;++h){var l=f[h];c.beginPath();e=xn(this,d,e,l,g);this.b&&c.fill();this.a&&c.stroke()}}""!==this.c&&(b=Pi(b),tn(this,b,b.length,2))}};function zn(b){var c=Object.keys(b.Wa).map(Number);c.sort(Qc);var d,e,f,g,h;d=0;for(e=c.length;d<e;++d)for(f=b.Wa[c[d].toString()],g=0,h=f.length;g<h;++g)f[g](b)}
function un(b,c){var d=b.f,e=b.qa;e?e.fillStyle!=c.fillStyle&&(e.fillStyle=d.fillStyle=c.fillStyle):(d.fillStyle=c.fillStyle,b.qa={fillStyle:c.fillStyle})}
function vn(b,c){var d=b.f,e=b.ha;e?(e.lineCap!=c.lineCap&&(e.lineCap=d.lineCap=c.lineCap),wh&&!Wc(e.H,c.H)&&d.setLineDash(e.H=c.H),e.lineJoin!=c.lineJoin&&(e.lineJoin=d.lineJoin=c.lineJoin),e.lineWidth!=c.lineWidth&&(e.lineWidth=d.lineWidth=c.lineWidth),e.miterLimit!=c.miterLimit&&(e.miterLimit=d.miterLimit=c.miterLimit),e.strokeStyle!=c.strokeStyle&&(e.strokeStyle=d.strokeStyle=c.strokeStyle)):(d.lineCap=c.lineCap,wh&&d.setLineDash(c.H),d.lineJoin=c.lineJoin,d.lineWidth=c.lineWidth,d.miterLimit=
c.miterLimit,d.strokeStyle=c.strokeStyle,b.ha={lineCap:c.lineCap,H:c.H,lineJoin:c.lineJoin,lineWidth:c.lineWidth,miterLimit:c.miterLimit,strokeStyle:c.strokeStyle})}m.rb=function(b,c){if(b){var d=b.a;this.b={fillStyle:qh(d?d:Ch)}}else this.b=null;if(c){var d=c.a,e=c.c,f=c.f,g=c.g,h=c.b,k=c.i;this.a={lineCap:void 0!==e?e:"round",H:f?f:Dh,lineJoin:void 0!==g?g:"round",lineWidth:this.V*(void 0!==h?h:1),miterLimit:void 0!==k?k:10,strokeStyle:oh(d?d:Eh)}}else this.a=null};
m.le=function(b){if(b){var c=b.Yb(),d=b.Rc(1),e=b.Qa(),f=b.ob();this.C=c[0];this.D=c[1];this.I=f[1];this.g=d;this.v=b.M;this.sa=e[0];this.Ea=e[1];this.La=b.V;this.Ma=b.o;this.i=b.Ia();this.Na=b.W;this.P=f[0]}else this.g=null};
m.eb=function(b){if(b){var c=b.a;c?(c=c.a,this.u={fillStyle:qh(c?c:Ch)}):this.u=null;var d=b.i;if(d){var c=d.a,e=d.c,f=d.f,g=d.g,h=d.b,d=d.i;this.o={lineCap:void 0!==e?e:"round",H:f?f:Dh,lineJoin:void 0!==g?g:"round",lineWidth:void 0!==h?h:1,miterLimit:void 0!==d?d:10,strokeStyle:oh(c?c:Eh)}}else this.o=null;var c=b.b,e=b.f,f=b.c,g=b.g,h=b.Ia(),d=b.va(),k=b.j;b=b.u;this.X={font:void 0!==c?c:"10px sans-serif",textAlign:void 0!==k?k:"center",textBaseline:void 0!==b?b:"middle"};this.c=void 0!==d?d:"";
this.Xa=void 0!==e?this.V*e:0;this.xb=void 0!==f?this.V*f:0;this.W=void 0!==g?g:0;this.l=this.V*(void 0!==h?h:1)}else this.c=""};var yn={Point:rn.prototype.Hd,LineString:rn.prototype.Dd,Polygon:rn.prototype.Id,MultiPoint:rn.prototype.Fd,MultiLineString:rn.prototype.Ed,MultiPolygon:rn.prototype.Gd,GeometryCollection:rn.prototype.Sg,Circle:rn.prototype.Cd};function An(b){hl.call(this,b);this.X=wb()}y(An,hl);
An.prototype.i=function(b,c,d){Bn(this,"precompose",d,b,void 0);var e=this.a?this.a.Pc():null;if(e){var f=c.extent,g=void 0!==f;if(g){var h=b.na,k=b.size[0]*h,l=b.size[1]*h,n=b.O.rotation,q=[f[0],f[3]],p=[f[2],f[3]],r=[f[2],f[1]],f=[f[0],f[1]];gl(b.Cb,q,q);gl(b.Cb,p,p);gl(b.Cb,r,r);gl(b.Cb,f,f);d.save();Fh(d,-n,k/2,l/2);d.beginPath();d.moveTo(q[0]*h,q[1]*h);d.lineTo(p[0]*h,p[1]*h);d.lineTo(r[0]*h,r[1]*h);d.lineTo(f[0]*h,f[1]*h);d.clip();Fh(d,n,k/2,l/2)}h=this.l;k=d.globalAlpha;d.globalAlpha=c.opacity;
d.drawImage(e,0,0,+e.width,+e.height,Math.round(h[12]),Math.round(h[13]),Math.round(e.width*h[0]),Math.round(e.height*h[5]));d.globalAlpha=k;g&&d.restore()}Bn(this,"postcompose",d,b,void 0)};function Bn(b,c,d,e,f){var g=b.ma();if(jb(g,c)){var h=e.size[0]*e.na,k=e.size[1]*e.na,l=e.O.rotation;Fh(d,-l,h/2,k/2);b=void 0!==f?f:Cn(b,e,0);b=new rn(d,e.na,e.extent,b,e.O.rotation);g.B(new nf(c,g,b,e,d,null));zn(b);Fh(d,l,h/2,k/2)}}
function Cn(b,c,d){var e=c.O,f=c.na;return fl(b.X,f*c.size[0]/2,f*c.size[1]/2,f/e.resolution,-f/e.resolution,-e.rotation,-e.center[0]+d,-e.center[1])};var Dn=["Polygon","LineString","Image","Text"];function En(b,c,d){this.Ea=b;this.X=c;this.c=null;this.g=0;this.resolution=d;this.I=this.D=null;this.b=[];this.coordinates=[];this.ha=wb();this.a=[];this.qa=[];this.ra=wb();this.sa=wb()}y(En,mf);
function Fn(b,c,d,e,f,g){var h=b.coordinates.length,k=b.Kd(),l=[c[d],c[d+1]],n=[NaN,NaN],q=!0,p,r,u;for(p=d+f;p<e;p+=f){n[0]=c[p];n[1]=c[p+1];u=k[1];var v=k[2],A=k[3],x=n[0],C=n[1],H=0;x<k[0]?H=H|16:x>v&&(H=H|4);C<u?H|=8:C>A&&(H|=2);0===H&&(H=1);u=H;u!==r?(q&&(b.coordinates[h++]=l[0],b.coordinates[h++]=l[1]),b.coordinates[h++]=n[0],b.coordinates[h++]=n[1],q=!1):1===u?(b.coordinates[h++]=n[0],b.coordinates[h++]=n[1],q=!1):q=!0;l[0]=n[0];l[1]=n[1];r=u}p===d+f&&(b.coordinates[h++]=l[0],b.coordinates[h++]=
l[1]);g&&(b.coordinates[h++]=c[d],b.coordinates[h++]=c[d+1]);return h}function Gn(b,c){b.D=[0,c,0];b.b.push(b.D);b.I=[0,c,0];b.a.push(b.I)}function Hn(b){var c=b.a;c.reverse();var d,e=c.length,f,g,h=-1;for(d=0;d<e;++d)if(f=c[d],g=f[0],6==g)h=d;else if(0==g){f[2]=d;f=b.a;for(g=d;h<g;){var k=f[h];f[h]=f[g];f[g]=k;++h;--g}h=-1}}function In(b,c){b.D[2]=b.b.length;b.D=null;b.I[2]=b.a.length;b.I=null;var d=[6,c];b.b.push(d);b.a.push(d)}En.prototype.finish=Md;En.prototype.Kd=function(){return this.X};
function Jn(b,c,d){En.call(this,b,c,d);this.u=this.P=null;this.C=this.A=this.W=this.V=this.M=this.v=this.o=this.l=this.j=this.i=this.f=void 0}y(Jn,En);Jn.prototype.Hd=function(b,c){if(this.u){Gn(this,c);var d=b.s,e=this.coordinates.length,d=Fn(this,d,0,d.length,b.a,!1);this.b.push([4,e,d,this.u,this.f,this.i,this.j,this.l,this.o,this.v,this.M,this.V,this.W,this.A,this.C]);this.a.push([4,e,d,this.P,this.f,this.i,this.j,this.l,this.o,this.v,this.M,this.V,this.W,this.A,this.C]);In(this,c)}};
Jn.prototype.Fd=function(b,c){if(this.u){Gn(this,c);var d=b.s,e=this.coordinates.length,d=Fn(this,d,0,d.length,b.a,!1);this.b.push([4,e,d,this.u,this.f,this.i,this.j,this.l,this.o,this.v,this.M,this.V,this.W,this.A,this.C]);this.a.push([4,e,d,this.P,this.f,this.i,this.j,this.l,this.o,this.v,this.M,this.V,this.W,this.A,this.C]);In(this,c)}};Jn.prototype.finish=function(){Hn(this);this.i=this.f=void 0;this.u=this.P=null;this.C=this.A=this.V=this.M=this.v=this.o=this.l=this.W=this.j=void 0};
Jn.prototype.le=function(b){var c=b.Yb(),d=b.ob(),e=b.$d(1),f=b.Rc(1),g=b.Qa();this.f=c[0];this.i=c[1];this.P=e;this.u=f;this.j=d[1];this.l=b.M;this.o=g[0];this.v=g[1];this.M=b.V;this.V=b.o;this.W=b.Ia();this.A=b.W;this.C=d[0]};function Kn(b,c,d){En.call(this,b,c,d);this.f={Xb:void 0,Sb:void 0,Tb:null,Ub:void 0,Vb:void 0,Wb:void 0,Td:0,strokeStyle:void 0,lineCap:void 0,H:null,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0}}y(Kn,En);
function Ln(b,c,d,e,f){var g=b.coordinates.length;c=Fn(b,c,d,e,f,!1);g=[8,g,c];b.b.push(g);b.a.push(g);return e}m=Kn.prototype;m.Kd=function(){this.c||(this.c=Ib(this.X),0<this.g&&Hb(this.c,this.resolution*(this.g+1)/2,this.c));return this.c};
function Mn(b){var c=b.f,d=c.strokeStyle,e=c.lineCap,f=c.H,g=c.lineJoin,h=c.lineWidth,k=c.miterLimit;c.Xb==d&&c.Sb==e&&Wc(c.Tb,f)&&c.Ub==g&&c.Vb==h&&c.Wb==k||(c.Td!=b.coordinates.length&&(b.b.push([12]),c.Td=b.coordinates.length),b.b.push([10,d,h,e,g,k,f],[1]),c.Xb=d,c.Sb=e,c.Tb=f,c.Ub=g,c.Vb=h,c.Wb=k)}
m.Dd=function(b,c){var d=this.f,e=d.lineWidth;void 0!==d.strokeStyle&&void 0!==e&&(Mn(this),Gn(this,c),this.a.push([10,d.strokeStyle,d.lineWidth,d.lineCap,d.lineJoin,d.miterLimit,d.H],[1]),d=b.s,Ln(this,d,0,d.length,b.a),this.a.push([12]),In(this,c))};
m.Ed=function(b,c){var d=this.f,e=d.lineWidth;if(void 0!==d.strokeStyle&&void 0!==e){Mn(this);Gn(this,c);this.a.push([10,d.strokeStyle,d.lineWidth,d.lineCap,d.lineJoin,d.miterLimit,d.H],[1]);var d=b.Hb(),e=b.s,f=b.a,g=0,h,k;h=0;for(k=d.length;h<k;++h)g=Ln(this,e,g,d[h],f);this.a.push([12]);In(this,c)}};m.finish=function(){this.f.Td!=this.coordinates.length&&this.b.push([12]);Hn(this);this.f=null};
m.rb=function(b,c){var d=c.a;this.f.strokeStyle=oh(d?d:Eh);d=c.c;this.f.lineCap=void 0!==d?d:"round";d=c.f;this.f.H=d?d:Dh;d=c.g;this.f.lineJoin=void 0!==d?d:"round";d=c.b;this.f.lineWidth=void 0!==d?d:1;d=c.i;this.f.miterLimit=void 0!==d?d:10;this.f.lineWidth>this.g&&(this.g=this.f.lineWidth,this.c=null)};
function Nn(b,c,d){En.call(this,b,c,d);this.f={Ue:void 0,Xb:void 0,Sb:void 0,Tb:null,Ub:void 0,Vb:void 0,Wb:void 0,fillStyle:void 0,strokeStyle:void 0,lineCap:void 0,H:null,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0}}y(Nn,En);
function On(b,c,d,e,f){var g=b.f,h=[1];b.b.push(h);b.a.push(h);var k,h=0;for(k=e.length;h<k;++h){var l=e[h],n=b.coordinates.length;d=Fn(b,c,d,l,f,!0);d=[8,n,d];n=[3];b.b.push(d,n);b.a.push(d,n);d=l}c=[7];b.a.push(c);void 0!==g.fillStyle&&b.b.push(c);void 0!==g.strokeStyle&&(g=[12],b.b.push(g),b.a.push(g));return d}m=Nn.prototype;
m.Cd=function(b,c){var d=this.f,e=d.strokeStyle;if(void 0!==d.fillStyle||void 0!==e){Pn(this);Gn(this,c);this.a.push([9,oh(Ch)]);void 0!==d.strokeStyle&&this.a.push([10,d.strokeStyle,d.lineWidth,d.lineCap,d.lineJoin,d.miterLimit,d.H]);var f=b.s,e=this.coordinates.length;Fn(this,f,0,f.length,b.a,!1);f=[1];e=[2,e];this.b.push(f,e);this.a.push(f,e);e=[7];this.a.push(e);void 0!==d.fillStyle&&this.b.push(e);void 0!==d.strokeStyle&&(d=[12],this.b.push(d),this.a.push(d));In(this,c)}};
m.Id=function(b,c){var d=this.f,e=d.strokeStyle;if(void 0!==d.fillStyle||void 0!==e)Pn(this),Gn(this,c),this.a.push([9,oh(Ch)]),void 0!==d.strokeStyle&&this.a.push([10,d.strokeStyle,d.lineWidth,d.lineCap,d.lineJoin,d.miterLimit,d.H]),d=b.Hb(),e=Ki(b),On(this,e,0,d,b.a),In(this,c)};
m.Gd=function(b,c){var d=this.f,e=d.strokeStyle;if(void 0!==d.fillStyle||void 0!==e){Pn(this);Gn(this,c);this.a.push([9,oh(Ch)]);void 0!==d.strokeStyle&&this.a.push([10,d.strokeStyle,d.lineWidth,d.lineCap,d.lineJoin,d.miterLimit,d.H]);var d=b.c,e=Oi(b),f=b.a,g=0,h,k;h=0;for(k=d.length;h<k;++h)g=On(this,e,g,d[h],f);In(this,c)}};m.finish=function(){Hn(this);this.f=null;var b=this.Ea;if(0!==b){var c=this.coordinates,d,e;d=0;for(e=c.length;d<e;++d)c[d]=b*Math.round(c[d]/b)}};
m.Kd=function(){this.c||(this.c=Ib(this.X),0<this.g&&Hb(this.c,this.resolution*(this.g+1)/2,this.c));return this.c};
m.rb=function(b,c){var d=this.f;if(b){var e=b.a;d.fillStyle=qh(e?e:Ch)}else d.fillStyle=void 0;c?(e=c.a,d.strokeStyle=oh(e?e:Eh),e=c.c,d.lineCap=void 0!==e?e:"round",e=c.f,d.H=e?e.slice():Dh,e=c.g,d.lineJoin=void 0!==e?e:"round",e=c.b,d.lineWidth=void 0!==e?e:1,e=c.i,d.miterLimit=void 0!==e?e:10,d.lineWidth>this.g&&(this.g=d.lineWidth,this.c=null)):(d.strokeStyle=void 0,d.lineCap=void 0,d.H=null,d.lineJoin=void 0,d.lineWidth=void 0,d.miterLimit=void 0)};
function Pn(b){var c=b.f,d=c.fillStyle,e=c.strokeStyle,f=c.lineCap,g=c.H,h=c.lineJoin,k=c.lineWidth,l=c.miterLimit;void 0!==d&&c.Ue!=d&&(b.b.push([9,d]),c.Ue=c.fillStyle);void 0===e||c.Xb==e&&c.Sb==f&&c.Tb==g&&c.Ub==h&&c.Vb==k&&c.Wb==l||(b.b.push([10,e,k,f,h,l,g]),c.Xb=e,c.Sb=f,c.Tb=g,c.Ub=h,c.Vb=k,c.Wb=l)}function Qn(b,c,d){En.call(this,b,c,d);this.A=this.W=this.V=null;this.u="";this.M=this.v=this.o=this.l=0;this.j=this.i=this.f=null}y(Qn,En);
function Rn(b,c,d,e,f){if(""!==b.u&&b.j&&(b.f||b.i)){if(b.f){var g=b.f,h=b.V;if(!h||h.fillStyle!=g.fillStyle){var k=[9,g.fillStyle];b.b.push(k);b.a.push(k);h?h.fillStyle=g.fillStyle:b.V={fillStyle:g.fillStyle}}}b.i&&(g=b.i,h=b.W,h&&h.lineCap==g.lineCap&&h.H==g.H&&h.lineJoin==g.lineJoin&&h.lineWidth==g.lineWidth&&h.miterLimit==g.miterLimit&&h.strokeStyle==g.strokeStyle||(k=[10,g.strokeStyle,g.lineWidth,g.lineCap,g.lineJoin,g.miterLimit,g.H,!1],b.b.push(k),b.a.push(k),h?(h.lineCap=g.lineCap,h.H=g.H,
h.lineJoin=g.lineJoin,h.lineWidth=g.lineWidth,h.miterLimit=g.miterLimit,h.strokeStyle=g.strokeStyle):b.W={lineCap:g.lineCap,H:g.H,lineJoin:g.lineJoin,lineWidth:g.lineWidth,miterLimit:g.miterLimit,strokeStyle:g.strokeStyle}));g=b.j;h=b.A;h&&h.font==g.font&&h.textAlign==g.textAlign&&h.textBaseline==g.textBaseline||(k=[11,g.font,g.textAlign,g.textBaseline],b.b.push(k),b.a.push(k),h?(h.font=g.font,h.textAlign=g.textAlign,h.textBaseline=g.textBaseline):b.A={font:g.font,textAlign:g.textAlign,textBaseline:g.textBaseline});
Gn(b,f);g=b.coordinates.length;c=Fn(b,c,0,d,e,!1);c=[5,g,c,b.u,b.l,b.o,b.v,b.M,!!b.f,!!b.i];b.b.push(c);b.a.push(c);In(b,f)}}
Qn.prototype.eb=function(b){if(b){var c=b.a;c?(c=c.a,c=qh(c?c:Ch),this.f?this.f.fillStyle=c:this.f={fillStyle:c}):this.f=null;var d=b.i;if(d){var c=d.a,e=d.c,f=d.f,g=d.g,h=d.b,d=d.i,e=void 0!==e?e:"round",f=f?f.slice():Dh,g=void 0!==g?g:"round",h=void 0!==h?h:1,d=void 0!==d?d:10,c=oh(c?c:Eh);if(this.i){var k=this.i;k.lineCap=e;k.H=f;k.lineJoin=g;k.lineWidth=h;k.miterLimit=d;k.strokeStyle=c}else this.i={lineCap:e,H:f,lineJoin:g,lineWidth:h,miterLimit:d,strokeStyle:c}}else this.i=null;var l=b.b,c=b.f,
e=b.c,f=b.g,h=b.Ia(),d=b.va(),g=b.j,k=b.u;b=void 0!==l?l:"10px sans-serif";g=void 0!==g?g:"center";k=void 0!==k?k:"middle";this.j?(l=this.j,l.font=b,l.textAlign=g,l.textBaseline=k):this.j={font:b,textAlign:g,textBaseline:k};this.u=void 0!==d?d:"";this.l=void 0!==c?c:0;this.o=void 0!==e?e:0;this.v=void 0!==f?f:0;this.M=void 0!==h?h:1}else this.u=""};function Sn(b,c,d){this.c=b;this.b=c;this.f=d;this.a={};Hf(1,1);wb()}Sn.prototype.finish=function(){for(var b in this.a){var c=this.a[b],d;for(d in c)c[d].finish()}};
function Tn(b,c,d){var e=void 0!==c?c.toString():"0";c=b.a[e];void 0===c&&(c={},b.a[e]=c);e=c[d];void 0===e&&(e=new Un[d](b.c,b.b,b.f),c[d]=e);return e}Sn.prototype.Ja=function(){return Wa(this.a)};
function Vn(b,c,d,e,f,g){var h=Object.keys(b.a).map(Number);h.sort(Qc);var k=b.b,l=k[0],n=k[1],q=k[2],k=k[3],l=[l,n,l,k,q,k,q,n];gi(l,0,8,2,e,l);c.save();c.beginPath();c.moveTo(l[0],l[1]);c.lineTo(l[2],l[3]);c.lineTo(l[4],l[5]);c.lineTo(l[6],l[7]);c.closePath();c.clip();for(var p,r,l=0,n=h.length;l<n;++l)for(p=b.a[h[l].toString()],q=0,k=Dn.length;q<k;++q)if(r=p[Dn[q]],void 0!==r){var u=r,v=c,A=d,x=e,C=f,H=g;r=r.b;var E=void 0,E=u.ha;if(x[0]==E[0]&&x[1]==E[1]&&x[4]==E[4]&&x[5]==E[5]&&x[12]==E[12]&&
x[13]==E[13])E=u.qa;else{var E=gi(u.coordinates,0,u.coordinates.length,2,x,u.qa),D=u.ha;D[0]=x[0];D[1]=x[1];D[2]=x[2];D[3]=x[3];D[4]=x[4];D[5]=x[5];D[6]=x[6];D[7]=x[7];D[8]=x[8];D[9]=x[9];D[10]=x[10];D[11]=x[11];D[12]=x[12];D[13]=x[13];D[14]=x[14];D[15]=x[15]}for(var x=!Wa(H),D=0,R=r.length,F=0,N=void 0,T=u.ra,u=u.sa,K=void 0,Z=void 0,X=void 0,W=void 0;D<R;){var J=r[D],aa,ja,Cb,Aa;switch(J[0]){case 0:F=J[1];x&&H[w(F).toString()]||!F.J()?D=J[2]:++D;break;case 1:v.beginPath();++D;break;case 2:F=J[1];
N=E[F];J=E[F+1];X=E[F+2]-N;F=E[F+3]-J;v.arc(N,J,Math.sqrt(X*X+F*F),0,2*Math.PI,!0);++D;break;case 3:v.closePath();++D;break;case 4:F=J[1];N=J[2];aa=J[3];Cb=J[4]*A;var Ig=J[5]*A,Jg=J[6];ja=J[7];var ue=J[8],Bd=J[9],X=J[11],W=J[12],wf=J[13],ve=J[14];for(J[10]&&(X+=C);F<N;F+=2){J=E[F]-Cb;Aa=E[F+1]-Ig;wf&&(J=Math.round(J),Aa=Math.round(Aa));if(1!=W||0!==X){var Rc=J+Cb,xf=Aa+Ig;fl(T,Rc,xf,W,W,X,-Rc,-xf);v.transform(T[0],T[1],T[4],T[5],T[12],T[13])}Rc=v.globalAlpha;1!=ja&&(v.globalAlpha=Rc*ja);var xf=ve+
ue>aa.width?aa.width-ue:ve,Ym=Jg+Bd>aa.height?aa.height-Bd:Jg;v.drawImage(aa,ue,Bd,xf,Ym,J,Aa,xf*A,Ym*A);1!=ja&&(v.globalAlpha=Rc);if(1!=W||0!==X)xb(T,u),v.transform(u[0],u[1],u[4],u[5],u[12],u[13])}++D;break;case 5:F=J[1];N=J[2];Cb=J[3];Ig=J[4]*A;Jg=J[5]*A;X=J[6];W=J[7]*A;aa=J[8];for(ja=J[9];F<N;F+=2){J=E[F]+Ig;Aa=E[F+1]+Jg;if(1!=W||0!==X)fl(T,J,Aa,W,W,X,-J,-Aa),v.transform(T[0],T[1],T[4],T[5],T[12],T[13]);ue=Cb.split("\n");Bd=ue.length;1<Bd?(wf=Math.round(1.5*v.measureText("M").width),Aa-=(Bd-1)/
2*wf):wf=0;for(ve=0;ve<Bd;ve++)Rc=ue[ve],ja&&v.strokeText(Rc,J,Aa),aa&&v.fillText(Rc,J,Aa),Aa+=wf;if(1!=W||0!==X)xb(T,u),v.transform(u[0],u[1],u[4],u[5],u[12],u[13])}++D;break;case 6:++D;break;case 7:v.fill();++D;break;case 8:F=J[1];N=J[2];J=E[F];Aa=E[F+1];X=J+.5|0;W=Aa+.5|0;if(X!==K||W!==Z)v.moveTo(J,Aa),K=X,Z=W;for(F+=2;F<N;F+=2)if(J=E[F],Aa=E[F+1],X=J+.5|0,W=Aa+.5|0,X!==K||W!==Z)v.lineTo(J,Aa),K=X,Z=W;++D;break;case 9:v.fillStyle=J[1];++D;break;case 10:K=void 0!==J[7]?J[7]:!0;Z=J[2];v.strokeStyle=
J[1];v.lineWidth=K?Z*A:Z;v.lineCap=J[3];v.lineJoin=J[4];v.miterLimit=J[5];wh&&v.setLineDash(J[6]);Z=K=NaN;++D;break;case 11:v.font=J[1];v.textAlign=J[2];v.textBaseline=J[3];++D;break;case 12:v.stroke();++D;break;default:++D}}}c.restore()}var Un={Image:Jn,LineString:Kn,Polygon:Nn,Text:Qn};function Wn(b,c){return w(b)-w(c)}function Xn(b,c){var d=.5*b/c;return d*d}function Yn(b,c,d,e,f,g){var h=!1,k,l;if(k=d.g)l=k.dc(),2==l||3==l?k.qe(f,g):(0==l&&k.load(),k.Wd(f,g),h=!0);if(f=(0,d.f)(c))e=f.Pd(e),(0,Zn[e.aa()])(b,e,d,c);return h}
var Zn={Point:function(b,c,d,e){var f=d.g;if(f){if(2!=f.dc())return;var g=Tn(b,d.a,"Image");g.le(f);g.Hd(c,e)}if(f=d.va())b=Tn(b,d.a,"Text"),b.eb(f),Rn(b,c.s,2,2,e)},LineString:function(b,c,d,e){var f=d.b;if(f){var g=Tn(b,d.a,"LineString");g.rb(null,f);g.Dd(c,e)}if(f=d.va())b=Tn(b,d.a,"Text"),b.eb(f),Rn(b,vi(c),2,2,e)},Polygon:function(b,c,d,e){var f=d.c,g=d.b;if(f||g){var h=Tn(b,d.a,"Polygon");h.rb(f,g);h.Id(c,e)}if(f=d.va())b=Tn(b,d.a,"Text"),b.eb(f),Rn(b,Li(c),2,2,e)},MultiPoint:function(b,c,d,
e){var f=d.g;if(f){if(2!=f.dc())return;var g=Tn(b,d.a,"Image");g.le(f);g.Fd(c,e)}if(f=d.va())b=Tn(b,d.a,"Text"),b.eb(f),d=c.s,Rn(b,d,d.length,c.a,e)},MultiLineString:function(b,c,d,e){var f=d.b;if(f){var g=Tn(b,d.a,"LineString");g.rb(null,f);g.Ed(c,e)}if(f=d.va())b=Tn(b,d.a,"Text"),b.eb(f),c=Ai(c),Rn(b,c,c.length,2,e)},MultiPolygon:function(b,c,d,e){var f=d.c,g=d.b;if(g||f){var h=Tn(b,d.a,"Polygon");h.rb(f,g);h.Gd(c,e)}if(f=d.va())b=Tn(b,d.a,"Text"),b.eb(f),c=Pi(c),Rn(b,c,c.length,2,e)},GeometryCollection:function(b,
c,d,e){c=c.a;var f,g;f=0;for(g=c.length;f<g;++f)(0,Zn[c[f].aa()])(b,c[f],d,e)},Circle:function(b,c,d,e){var f=d.c,g=d.b;if(f||g){var h=Tn(b,d.a,"Polygon");h.rb(f,g);h.Cd(c,e)}if(f=d.va())b=Tn(b,d.a,"Text"),b.eb(f),Rn(b,c.s.slice(0,c.a),2,2,e)}};function $n(b){An.call(this,b);this.a=null;this.l=wb()}y($n,An);
$n.prototype.j=function(b,c){var d=b.na,e=b.O,f=e.center,g=e.resolution,h=this.ma().N(),k=b.fa,l=b.extent;void 0!==c.extent&&(l=Ub(l,c.extent));if(!k[0]&&!k[1]&&!Pb(l)){if(k=e=Rf(h,l,g,d,e.projection))k=e,l=k.T(),2!=l&&3!=l&&I(k,"change",this.P,this),0==l&&(k.load(),l=k.T()),k=2==l;k&&(this.a=e)}if(this.a){var e=this.a,k=e.G(),l=e.S(),n=e.c,g=d*l/(g*n);fl(this.l,d*b.size[0]/2,d*b.size[1]/2,g,g,0,n*(k[0]-f[0])/l,n*(f[1]-k[3])/l);ll(b.ca,e.o());ml(b,h)}return!!this.a};function ao(b){An.call(this,b);this.g=null;this.c=Hf();this.u=null;this.o=Fb()}y(ao,An);
ao.prototype.i=function(b,c,d){var e=b.na,f=b.O,g=f.center,h=f.projection,k=b.size,f=e/f.resolution,l=this.ma(),n=l.N(),q=n.Xe(h),p=n.Gc(h),r=Cn(this,b,0);Bn(this,"precompose",d,b,r);jb(l,"render")?(this.c.canvas.width=d.canvas.width,this.c.canvas.height=d.canvas.height,l=this.c):l=d;var u=Math.round(e*k[0]/2),e=Math.round(e*k[1]/2),k=l.globalAlpha;l.globalAlpha=c.opacity;c=n.Za(h);var v=this.u,A,x,C,H,E,D,R,F,N,T,K;C=0;for(H=v.length;C<H;++C){R=v[C];F=qg(c,R.oa,this.o);if(A=!p&&this.g[R.oa.toString()]){l.save();
l.beginPath();l.moveTo((F[0]-g[0])*f+u,(g[1]-F[1])*f+e);l.lineTo((F[2]-g[0])*f+u,(g[1]-F[1])*f+e);l.lineTo((F[2]-g[0])*f+u,(g[1]-F[3])*f+e);l.lineTo((F[0]-g[0])*f+u,(g[1]-F[3])*f+e);l.closePath();E=0;for(D=A.length;E<D;++E)x=A[E],l.moveTo((x[0]-g[0])*f+u,(g[1]-x[1])*f+e),l.lineTo((x[0]-g[0])*f+u,(g[1]-x[3])*f+e),l.lineTo((x[2]-g[0])*f+u,(g[1]-x[3])*f+e),l.lineTo((x[2]-g[0])*f+u,(g[1]-x[1])*f+e),l.closePath();l.clip()}x=R.oa[0];D=n;K=x;N=D.Za(h);E=D.D;K=Db(tg(N,K),D.I);N=void 0;1==E?N=K:(D=D.I,void 0===
D&&(D=[0,0]),D[0]=K[0]*E+.5|0,D[1]=K[1]*E+.5|0,N=D);D=N;E=[F[0],F[3]];K=Math.round(Qb(F)*f);F=Math.round(Rb(F)*f);x=qg(c,Cg(c,g,x));x=[x[0],x[1]];N=u+Math.round((x[0]-g[0])*f);T=e+Math.round((g[1]-x[1])*f);l.drawImage(R.Qc(),q,q,D[0],D[1],Math.round((E[0]-x[0])*f/K)*K+N,Math.round((x[1]-E[1])*f/F)*F+T,K,F);A&&l.restore()}l!=d&&(Bn(this,"render",l,b,r),d.drawImage(l.canvas,0,0));l.globalAlpha=k;Bn(this,"postcompose",d,b,r)};
ao.prototype.j=function(b,c){function d(b){b=b.T();return 2==b||4==b||3==b&&!v}var e=b.na,f=b.O,g=f.projection,h=this.ma(),k=h.N(),l=k.Za(g),n=rg(l,f.resolution),q=l.S(n),p=f.center;q==f.resolution?(p=ol(p,q,b.size),f=Tb(p,q,f.rotation,b.size)):f=b.extent;void 0!==c.extent&&(f=Ub(f,c.extent));if(Pb(f))return!1;var q=zg(l,f,q),r={};r[n]={};var u=il(k,g,r),v=h.get("useInterimTilesOnError"),p=Fb(),A=new Ee(0,0,0,0),x,C,H,E;for(H=q.b;H<=q.a;++H)for(E=q.c;E<=q.f;++E)x=Qg(k,n,H,E,e,g),!d(x)&&x.a&&(x=x.a),
d(x)?r[n][x.oa.toString()]=x:(C=xg(l,x.oa,u,null,A,p),C||(x=yg(l,x.oa,A,p))&&u(n+1,x));u=Object.keys(r).map(Number);u.sort(Qc);H=[];var D,R;E=0;for(C=u.length;E<C;++E)for(D in x=u[E],R=r[x],R)x=R[D],2==x.T()&&H.push(x);this.u=H;if(!k.Gc(g)){var F={},N;for(E=H.length-1;0<=E;--E)N=H[E].oa,xg(l,N,function(b,c){var d=r[b];if(d){var e,f;for(e in d)if(f=d[e],c.contains(f.oa)&&2==f.T())return e in F||(F[e]=[]),F[e].push(qg(l,N)),!0}return!1},this,A,p);this.g=F}nl(b.se,k,n,q);pl(b,k,l,e,g,f,n,h.get("preload"));
kl(b,k);ml(b,k);return!0};function bo(b){An.call(this,b);this.c=!1;this.C=-1;this.A=NaN;this.o=Fb();this.g=this.v=null;this.u=Hf()}y(bo,An);
bo.prototype.i=function(b,c,d){var e=b.extent,f=b.na,g=c.nf?b.sj:{},h=b.O,k=h.projection,h=h.rotation,l=k.G(),n=this.ma().N(),q=Cn(this,b,0);Bn(this,"precompose",d,b,q);var p=this.g;if(p&&!p.Ja()){var r;jb(this.ma(),"render")?(this.u.canvas.width=d.canvas.width,this.u.canvas.height=d.canvas.height,r=this.u):r=d;var u=r.globalAlpha;r.globalAlpha=c.opacity;c=b.size[0]*f;var v=b.size[1]*f;Fh(r,-h,c/2,v/2);Vn(p,r,f,q,h,g);if(n.C&&k.b&&!Jb(l,e)){for(var k=e[0],n=Qb(l),A=0;k<l[0];)--A,q=n*A,q=Cn(this,b,
q),Vn(p,r,f,q,h,g),k+=n;A=0;for(k=e[2];k>l[2];)++A,q=n*A,q=Cn(this,b,q),Vn(p,r,f,q,h,g),k-=n;q=Cn(this,b,0)}Fh(r,h,c/2,v/2);r!=d&&(Bn(this,"render",r,b,q),d.drawImage(r.canvas,0,0));r.globalAlpha=u}Bn(this,"postcompose",d,b,q)};bo.prototype.D=function(){jl(this)};
bo.prototype.j=function(b){function c(b){var c,e=b.i;e?c=e.call(b,n):(e=d.i)&&(c=e(b,n));if(c){if(c){e=!1;if(ea(c))for(var f=0,g=c.length;f<g;++f)e=Yn(r,b,c[f],Xn(n,q),this.D,this)||e;else e=Yn(r,b,c,Xn(n,q),this.D,this)||e;b=e}else b=!1;this.c=this.c||b}}var d=this.ma(),e=d.N();ll(b.ca,e.o());ml(b,e);var f=b.fa[0],g=b.fa[1],h=d.o,k=d.v;if(!this.c&&!h&&f||!k&&g)return!0;var l=b.extent,k=b.O,f=k.projection,n=k.resolution,q=b.na,g=d.f,p=d.l,h=d.get("renderOrder");void 0===h&&(h=Wn);l=Hb(l,p*n);p=k.projection.G();
e.C&&k.projection.b&&!Jb(p,b.extent)&&(b=Math.max(Qb(l)/2,Qb(p)),l[0]=p[0]-b,l[2]=p[2]+b);if(!this.c&&this.A==n&&this.C==g&&this.v==h&&Jb(this.o,l))return!0;hb(this.g);this.g=null;this.c=!1;var r=new Sn(.5*n/q,l,n);vj(e,l,n,f);if(h){var u=[];tj(e,l,function(b){u.push(b)},this);u.sort(h);u.forEach(c,this)}else tj(e,l,c,this);r.finish();this.A=n;this.C=g;this.v=h;this.o=l;this.g=r;return!0};function co(b,c){ul.call(this,0,c);this.f=Hf();this.j=Hf();this.a=this.f.canvas;this.a.style.width="100%";this.a.style.height="100%";this.a.className="ol-unselectable";b.insertBefore(this.a,b.childNodes[0]||null);this.i=this.j.canvas;this.M=[0,0];this.A=Fb();this.c=!0;this.v=wb()}y(co,ul);
function eo(b,c,d){var e=b.u,f=b.f;if(jb(e,c)){var g=d.extent,h=d.na,k=d.O.rotation,l=d.na,n=d.O,q=n.resolution;b=fl(b.v,b.a.width/2,b.a.height/2,l/q,-l/q,-n.rotation,-n.center[0],-n.center[1]);g=new rn(f,h,g,b,k);e.B(new nf(c,e,g,d,f,null));zn(g)}}co.prototype.aa=function(){return"canvas"};
co.prototype.l=function(b){if(b){var c,d=b.na,e=b.size[0]*d,f=b.size[1]*d;this.a.width=e;this.a.height=f;var g=b.O.rotation,h;if(g){c=this.j;h=Tb(this.M,d,g,b.size,this.A);var d=Qb(h),k=Rb(h);this.i.width=d+.5;this.i.height=k+.5;this.j.translate(Math.round((d-e)/2),Math.round((k-f)/2))}else c=this.f;d=b.O;k=b.Cb;fl(k,b.size[0]/2,b.size[1]/2,1/d.resolution,-1/d.resolution,-d.rotation,-d.center[0],-d.center[1]);xb(k,b.Ef);eo(this,"precompose",b);d=b.Vd;Xc(d);var k=b.O.resolution,l,n,q,p;l=0;for(n=d.length;l<
n;++l){p=d[l];q=p.layer;var r=q;q=w(r).toString();q in this.b?q=this.b[q]:(r=r instanceof qf?new $n(r):r instanceof rf?new ao(r):r instanceof cj?new bo(r):null,this.b[q]=r,this.g[q]=I(r,"change",this.o,this),q=r);p.visible&&k>=p.Sa&&k<p.bb&&"ready"==p.uj&&q.j(b,p)&&q.i(b,p,c)}g&&(this.f.translate(e/2,f/2),this.f.rotate(g),this.f.drawImage(this.i,Math.round(h[0]),Math.round(h[1])),this.f.rotate(-g),this.f.translate(-e/2,-f/2));eo(this,"postcompose",b);this.c||(Lj(this.a,!0),this.c=!0);for(var u in this.b)if(!(u in
b.Ud)){b.Tc.push(this.C.bind(this));break}b.Tc.push(vl)}else this.c&&(Lj(this.a,!1),this.c=!1)};var fo=["canvas","webgl","dom"];
function go(b){mb.call(this);var c=ho(b);this.Ma=void 0!==b.ai?b.ai:!1;this.Na=void 0!==b.bi?b.bi:!1;this.Xa=void 0!==b.na?b.na:vh;this.Wa=c.Mb;this.Le=function(){this.gb=void 0;this.lj.call(this,Date.now())}.bind(this);this.Ea=wb();this.xb=wb();this.La=0;this.j=null;this.ra=Fb();this.C=this.I=null;this.a=document.createElement("DIV");this.a.className="ol-viewport";this.a.style.position="relative";this.a.style.overflow="hidden";this.a.style.width="100%";this.a.style.height="100%";this.a.style.msTouchAction=
"none";this.a.style.touchAction="none";zh&&gk(this.a,"ol-touch");this.v=document.createElement("DIV");this.v.className="ol-overlaycontainer";this.a.appendChild(this.v);this.o=document.createElement("DIV");this.o.className="ol-overlaycontainer-stopevent";b=["click","dblclick","mousedown","touchstart","mspointerdown",bl,jc?"DOMMouseScroll":"mousewheel"];for(var d=0,e=b.length;d<e;++d)I(this.o,b[d],Ta);this.a.appendChild(this.o);b=new Uk(this);for(var f in el)I(b,el[f],this.ff,this);gb(this,qa(hb,b));
this.X=c.bc;this.l=null;I(this.a,"wheel",this.Jb,this);I(this.a,"mousewheel",this.Jb,this);this.A=c.controls;this.i=c.mb;this.c=c.fc;this.Df={};this.sa=new c.mj(this.a,this);gb(this,qa(hb,this.sa));this.P=null;this.D=[];this.ha=[];this.qa=new zl(this.eh.bind(this),this.Jh.bind(this));this.yb={};I(this,L("layergroup"),this.sh,this);I(this,L("view"),this.Kh,this);I(this,L("size"),this.Gh,this);I(this,L("target"),this.Ih,this);this.ka(c.values);this.A.forEach(function(b){b.setMap(this)},this);I(this.A,
"add",function(b){b.element.setMap(this)},this);I(this.A,"remove",function(b){b.element.setMap(null)},this);this.i.forEach(function(b){b.setMap(this)},this);I(this.i,"add",function(b){b.element.setMap(this)},this);I(this.i,"remove",function(b){b.element.setMap(null)},this);this.c.forEach(this.He,this);I(this.c,"add",function(b){this.He(b.element)},this);I(this.c,"remove",function(b){var c=b.element.Ya();void 0!==c&&delete this.Df[c.toString()];b.element.setMap(null)},this)}y(go,mb);
function Zg(b,c){lf(Yg(b)).push(c)}m=go.prototype;m.He=function(b){var c=b.Ya();void 0!==c&&(this.Df[c.toString()]=b);b.setMap(this)};m.Fa=function(b){this.render();Array.prototype.push.apply(this.D,arguments)};m.L=function(){cb(this.a,"wheel",this.Jb,this);cb(this.a,"mousewheel",this.Jb,this);void 0!==this.g&&(t.removeEventListener("resize",this.g,!1),this.g=void 0);this.gb&&(t.cancelAnimationFrame(this.gb),this.gb=void 0);Jc(this.a);go.U.L.call(this)};
function io(b){b=b.get("target");return void 0!==b?Ac(b):null}m.Gb=function(b){var c=this.j;return c?(b=b.slice(),gl(c.Ef,b,b)):null};function Yg(b){return b.get("layergroup")}function zm(b,c){var d=b.j;if(d){var e=c.slice(0,2);return gl(d.Cb,e,e)}return null}function Em(b){return b.get("size")}function U(b){return b.get("view")}
m.eh=function(b,c,d,e){var f=this.j;if(!(f&&c in f.oc&&f.oc[c][b.oa.toString()]))return Infinity;b=d[0]-f.focus[0];d=d[1]-f.focus[1];return 65536*Math.log(e)+Math.sqrt(b*b+d*d)/e};m.Jb=function(b,c){var d=new Sk(c||b.type,this,b);this.ff(d)};m.ff=function(b){if(this.j){this.P=b.coordinate;b.frameState=this.j;var c=this.i.a,d;if(!1!==this.B(b))for(d=c.length-1;0<=d;d--){var e=c[d];if(e.getActive()&&!e.handleEvent(b))break}}};
m.Eh=function(){var b=this.j,c=this.qa;if(!c.Ja()){var d=16,e=d;if(b){var f=b.fa;f[0]&&(d=this.Ma?8:0,e=2);f[1]&&(d=this.Na?8:0,e=2)}if(c.c<d){var f=c.l,g=c.a,h=c.b,k=0,l=g.length,n,q,p;for(q=0;q<l;++q)n=g[q],p=f(n),Infinity==p?delete c.f[c.g(n)]:(h[k]=p,g[k++]=n);g.length=k;h.length=k;for(f=(c.a.length>>1)-1;0<=f;f--)yl(c,f);for(f=0;c.c<d&&f<e&&0<c.Pa();)g=c,k=g.a,l=g.b,h=k[0],1==k.length?(k.length=0,l.length=0):(k[0]=k.pop(),l[0]=l.pop(),yl(g,0)),k=g.g(h),delete g.f[k],g=h[0],0===g.T()&&(c.j[g.cc()]=
!0,++c.c,++f,g.load())}}c=this.ha;e=0;for(d=c.length;e<d;++e)c[e](this,b);c.length=0};m.Gh=function(){this.render()};m.Ih=function(){var b=io(this);if(this.l){for(var c=0,d=this.l.length;c<d;++c)G(this.l[c]);this.l=null}b?(b.appendChild(this.a),b=this.X?this.X:b,this.l=[I(b,"keydown",this.Jb,this),I(b,"keypress",this.Jb,this)],this.g||(this.g=this.re.bind(this),t.addEventListener("resize",this.g,!1))):(Jc(this.a),void 0!==this.g&&(t.removeEventListener("resize",this.g,!1),this.g=void 0));this.re()};
m.Jh=function(){this.render()};m.Lh=function(){this.render()};m.Kh=function(){this.I&&(G(this.I),this.I=null);var b=U(this);b&&(this.I=I(b,"propertychange",this.Lh,this));this.render()};m.th=function(){this.render()};m.uh=function(){this.render()};m.sh=function(){this.C&&(this.C.forEach(G),this.C=null);var b=Yg(this);b&&(this.C=[I(b,"propertychange",this.uh,this),I(b,"change",this.th,this)]);this.render()};m.render=function(){void 0===this.gb&&(this.gb=t.requestAnimationFrame(this.Le))};
m.lj=function(b){var c,d,e,f=Em(this),g=U(this),h=null;if(void 0!==f&&0<f[0]&&0<f[1]&&g&&Ql(g)){var h=g.i.slice(),k=Yg(this).Od(),l={};c=0;for(d=k.length;c<d;++c)l[w(k[c].layer)]=k[c];e=g.T();h={animate:!1,ca:{},Cb:this.Ea,extent:null,focus:this.P?this.P:e.center,index:this.La++,Ud:l,Vd:k,Mb:Ua({},this.Wa),na:this.Xa,Ef:this.xb,Tc:[],size:f,sj:this.yb,xj:this.qa,time:b,se:{},O:e,fa:h,oc:{}}}if(h){b=this.D;c=f=0;for(d=b.length;c<d;++c)g=b[c],g(this,h)&&(b[f++]=g);b.length=f;h.extent=Tb(e.center,e.resolution,
e.rotation,h.size)}this.j=h;this.sa.l(h);h&&(h.animate&&this.render(),Array.prototype.push.apply(this.ha,h.Tc),0!==this.D.length||h.fa[0]||h.fa[1]||Lb(h.extent,this.ra)||(this.B(new kk("moveend",this,h)),Ib(h.extent,this.ra)));this.B(new kk("postrender",this,h));d=c=this.Eh;this&&(d=pa(c,this));!ia(t.setImmediate)||t.Window&&t.Window.prototype&&!$b("Edge")&&t.Window.prototype.setImmediate==t.setImmediate?(Qj||(Qj=Rj()),Qj(d)):t.setImmediate(d)};
m.re=function(){var b=io(this);if(b){var c=zc(b),d=hc&&b.currentStyle,e;if(e=d)xc(c),e=!0;if(e&&"auto"!=d.width&&"auto"!=d.height&&!d.boxSizing)c=Mj(b,d.width,"width","pixelWidth"),b=Mj(b,d.height,"height","pixelHeight"),b=new wc(c,b);else{d=new wc(b.offsetWidth,b.offsetHeight);if(hc){c=Nj(b,"paddingLeft");e=Nj(b,"paddingRight");var f=Nj(b,"paddingTop"),g=Nj(b,"paddingBottom"),c=new Bj(f,e,g,c)}else c=Ej(b,"paddingLeft"),e=Ej(b,"paddingRight"),f=Ej(b,"paddingTop"),g=Ej(b,"paddingBottom"),c=new Bj(parseFloat(f),
parseFloat(e),parseFloat(g),parseFloat(c));!hc||9<=Number(sc)?(e=Ej(b,"borderLeftWidth"),f=Ej(b,"borderRightWidth"),g=Ej(b,"borderTopWidth"),b=Ej(b,"borderBottomWidth"),b=new Bj(parseFloat(g),parseFloat(f),parseFloat(b),parseFloat(e))):(e=Pj(b,"borderLeft"),f=Pj(b,"borderRight"),g=Pj(b,"borderTop"),b=Pj(b,"borderBottom"),b=new Bj(g,f,b,e));b=new wc(d.width-b.left-c.left-c.right-b.right,d.height-b.top-c.top-c.bottom-b.bottom)}this.set("size",[b.width,b.height])}else this.set("size",void 0)};
function ho(b){var c=null;void 0!==b.bc&&(c="string"===typeof b.bc?document.getElementById(b.bc):b.bc);var d={},e={};if(void 0===b.ea||"boolean"===typeof b.ea&&b.ea)e["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAHGAAABxgEXwfpGAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAhNQTFRF////AP//AICAgP//AFVVQECA////K1VVSbbbYL/fJ05idsTYJFtbbcjbJllmZszWWMTOIFhoHlNiZszTa9DdUcHNHlNlV8XRIVdiasrUHlZjIVZjaMnVH1RlIFRkH1RkH1ZlasvYasvXVsPQH1VkacnVa8vWIVZjIFRjVMPQa8rXIVVkXsXRsNveIFVkIFZlIVVj3eDeh6GmbMvXH1ZkIFRka8rWbMvXIFVkIFVjIFVkbMvWH1VjbMvWIFVlbcvWIFVla8vVIFVkbMvWbMvVH1VkbMvWIFVlbcvWIFVkbcvVbMvWjNPbIFVkU8LPwMzNIFVkbczWIFVkbsvWbMvXIFVkRnB8bcvW2+TkW8XRIFVkIlZlJVloJlpoKlxrLl9tMmJwOWd0Omh1RXF8TneCT3iDUHiDU8LPVMLPVcLPVcPQVsPPVsPQV8PQWMTQWsTQW8TQXMXSXsXRX4SNX8bSYMfTYcfTYsfTY8jUZcfSZsnUaIqTacrVasrVa8jTa8rWbI2VbMvWbcvWdJObdcvUdszUd8vVeJaee87Yfc3WgJyjhqGnitDYjaarldPZnrK2oNbborW5o9bbo9fbpLa6q9ndrL3ArtndscDDutzfu8fJwN7gwt7gxc/QyuHhy+HizeHi0NfX0+Pj19zb1+Tj2uXk29/e3uLg3+Lh3+bl4uXj4ufl4+fl5Ofl5ufl5ujm5+jmySDnBAAAAFp0Uk5TAAECAgMEBAYHCA0NDg4UGRogIiMmKSssLzU7PkJJT1JTVFliY2hrdHZ3foSFhYeJjY2QkpugqbG1tre5w8zQ09XY3uXn6+zx8vT09vf4+Pj5+fr6/P39/f3+gz7SsAAAAVVJREFUOMtjYKA7EBDnwCPLrObS1BRiLoJLnte6CQy8FLHLCzs2QUG4FjZ5GbcmBDDjxJBXDWxCBrb8aM4zbkIDzpLYnAcE9VXlJSWlZRU13koIeW57mGx5XjoMZEUqwxWYQaQbSzLSkYGfKFSe0QMsX5WbjgY0YS4MBplemI4BdGBW+DQ11eZiymfqQuXZIjqwyadPNoSZ4L+0FVM6e+oGI6g8a9iKNT3o8kVzNkzRg5lgl7p4wyRUL9Yt2jAxVh6mQCogae6GmflI8p0r13VFWTHBQ0rWPW7ahgWVcPm+9cuLoyy4kCJDzCm6d8PSFoh0zvQNC5OjDJhQopPPJqph1doJBUD5tnkbZiUEqaCnB3bTqLTFG1bPn71kw4b+GFdpLElKIzRxxgYgWNYc5SCENVHKeUaltHdXx0dZ8uBI1hJ2UUDgq82CM2MwKeibqAvSO7MCABq0wXEPiqWEAAAAAElFTkSuQmCC"]=
"http://openlayers.org/";else{var f=b.ea;"string"===typeof f?e[f]="":ka(f)&&(e[f.src]=f.href)}f=b.layers instanceof kf?b.layers:new kf({layers:b.layers});d.layergroup=f;d.target=b.target;d.view=void 0!==b.view?b.view:new Jl;var f=ul,g;void 0!==b.Xc?ea(b.Xc)?g=b.Xc:"string"===typeof b.Xc&&(g=[b.Xc]):g=fo;var h,k;h=0;for(k=g.length;h<k;++h)if("canvas"==g[h]&&xh){f=co;break}void 0!==b.controls?g=ea(b.controls)?new pb(b.controls.slice()):b.controls:(g={},h=new pb,(void 0!==g.zoom?g.zoom:1)&&h.push(new dm(g.wk)),
(void 0!==g.rotate?g.rotate:1)&&h.push(new bm(g.uk)),(void 0!==g.attribution?g.attribution:1)&&h.push(new Ul(g.kk)),g=h);var l;void 0!==b.mb?l=ea(b.mb)?new pb(b.mb.slice()):b.mb:l=dn();b=void 0!==b.fc?ea(b.fc)?new pb(b.fc.slice()):b.fc:new pb;return{controls:g,mb:l,bc:c,Mb:e,fc:b,mj:f,values:d}}Pe(jn);Pe(qn);qn.forEach(function(b){jn.forEach(function(c){Qe(b,c,kn);Qe(c,b,ln)})});function jo(b){mb.call(this);this.D=b.id;this.C=void 0!==b.Wh?b.Wh:!0;this.I=void 0!==b.Vf?b.Vf:!0;this.c=document.createElement("DIV");this.c.className="ol-overlay-container";this.c.style.position="absolute";this.pd=void 0!==b.pd?b.pd:!1;this.j=void 0!==b.Fg?b.Fg:{};this.o=void 0!==b.Gg?b.Gg:20;this.a={vc:"",Lc:"",Zc:"",cd:"",visible:!0};this.i=null;I(this,L("element"),this.rh,this);I(this,L("map"),this.xh,this);I(this,L("offset"),this.Ah,this);I(this,L("position"),this.Ch,this);I(this,L("positioning"),
this.Dh,this);void 0!==b.element&&this.set("element",b.element);this.set("offset",void 0!==b.offset?b.offset:[0,0]);this.set("positioning",void 0!==b.be?b.be:"top-left");void 0!==b.position&&this.setPosition(b.position)}y(jo,mb);m=jo.prototype;m.Ya=function(){return this.D};m.rh=function(){Ic(this.c);var b=this.get("element");b&&this.c.appendChild(b)};
m.xh=function(){this.i&&(Jc(this.c),G(this.i),this.i=null);var b=this.get("map");b&&(this.i=I(b,"postrender",this.render,this),ko(this),b=this.I?b.o:b.v,this.C?b.insertBefore(this.c,b.childNodes[0]||null):b.appendChild(this.c))};m.render=function(){ko(this)};m.Ah=function(){ko(this)};
m.Ch=function(){ko(this);if(void 0!==this.get("position")&&this.pd){var b=this.get("map");if(void 0!==b&&io(b)){var c=lo(io(b),Em(b)),d=this.get("element"),e=d.offsetWidth,f=d.currentStyle||window.getComputedStyle(d),e=e+(parseInt(f.marginLeft,10)+parseInt(f.marginRight,10)),f=d.offsetHeight,g=d.currentStyle||window.getComputedStyle(d),f=f+(parseInt(g.marginTop,10)+parseInt(g.marginBottom,10)),h=lo(d,[e,f]),d=this.o;Jb(c,h)||(e=h[0]-c[0],f=c[2]-h[2],g=h[1]-c[1],h=c[3]-h[3],c=[0,0],0>e?c[0]=e-d:0>
f&&(c[0]=Math.abs(f)+d),0>g?c[1]=g-d:0>h&&(c[1]=Math.abs(h)+d),0===c[0]&&0===c[1])||(d=Kl(U(b)),e=zm(b,d),c=[e[0]+c[0],e[1]+c[1]],this.j&&(this.j.source=d,b.Fa(Zl(this.j))),Pl(U(b),b.Gb(c)))}}};m.Dh=function(){ko(this)};m.setMap=function(b){this.set("map",b)};m.setPosition=function(b){this.set("position",b)};function lo(b,c){var d=Gj(b);return[d.x,d.y,d.x+c[0],d.y+c[1]]}m.Ta=function(b){this.a.visible!==b&&(Lj(this.c,b),this.a.visible=b)};
function ko(b){var c=b.get("map"),d=b.get("position");if(void 0!==c&&c.j&&void 0!==d){var d=zm(c,d),e=Em(c),c=b.c.style,f=b.get("offset"),g=b.get("positioning"),h=f[0],f=f[1];if("bottom-right"==g||"center-right"==g||"top-right"==g)""!==b.a.Lc&&(b.a.Lc=c.left=""),h=Math.round(e[0]-d[0]-h)+"px",b.a.Zc!=h&&(b.a.Zc=c.right=h);else{""!==b.a.Zc&&(b.a.Zc=c.right="");if("bottom-center"==g||"center-center"==g||"top-center"==g)h-=Ij(b.c).width/2;h=Math.round(d[0]+h)+"px";b.a.Lc!=h&&(b.a.Lc=c.left=h)}if("bottom-left"==
g||"bottom-center"==g||"bottom-right"==g)""!==b.a.cd&&(b.a.cd=c.top=""),d=Math.round(e[1]-d[1]-f)+"px",b.a.vc!=d&&(b.a.vc=c.bottom=d);else{""!==b.a.vc&&(b.a.vc=c.bottom="");if("center-left"==g||"center-center"==g||"center-right"==g)f-=Ij(b.c).height/2;d=Math.round(d[1]+f)+"px";b.a.cd!=d&&(b.a.cd=c.top=d)}b.Ta(!0)}else b.Ta(!1)};var mo=!hc||9<=Number(sc),no=!hc||9<=Number(sc),oo=hc&&!qc("9");!kc||qc("528");jc&&qc("1.9b")||hc&&qc("8")||gc&&qc("9.5")||kc&&qc("528");jc&&!qc("8")||hc&&qc("9");function po(b,c){this.type=b;this.a=this.target=c;this.defaultPrevented=this.f=!1;this.Rf=!0}po.prototype.stopPropagation=function(){this.f=!0};po.prototype.preventDefault=function(){this.defaultPrevented=!0;this.Rf=!1};function qo(b,c){po.call(this,b?b.type:"");this.relatedTarget=this.a=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.c=!1;this.b=this.state=null;if(b){var d=this.type=b.type,e=b.changedTouches?b.changedTouches[0]:null;this.target=b.target||b.srcElement;this.a=c;var f=b.relatedTarget;if(f){if(jc){var g;a:{try{Dj(f.nodeName);g=!0;break a}catch(h){}g=!1}g||(f=null)}}else"mouseover"==d?f=b.fromElement:"mouseout"==d&&(f=b.toElement);this.relatedTarget=
f;null===e?(this.offsetX=kc||void 0!==b.offsetX?b.offsetX:b.layerX,this.offsetY=kc||void 0!==b.offsetY?b.offsetY:b.layerY,this.clientX=void 0!==b.clientX?b.clientX:b.pageX,this.clientY=void 0!==b.clientY?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0);this.button=b.button;this.c=b.ctrlKey;this.state=b.state;this.b=b;b.defaultPrevented&&
this.preventDefault()}}y(qo,po);var ro=[1,4,2];qo.prototype.stopPropagation=function(){qo.U.stopPropagation.call(this);this.b.stopPropagation?this.b.stopPropagation():this.b.cancelBubble=!0};qo.prototype.preventDefault=function(){qo.U.preventDefault.call(this);var b=this.b;if(b.preventDefault)b.preventDefault();else if(b.returnValue=!1,oo)try{if(b.ctrlKey||112<=b.keyCode&&123>=b.keyCode)b.keyCode=-1}catch(c){}};var so="closure_listenable_"+(1E6*Math.random()|0),to=0;function uo(b,c,d,e,f){this.listener=b;this.a=null;this.src=c;this.type=d;this.xc=!!e;this.Kc=f;this.key=++to;this.Ob=this.hb=!1}function vo(b){b.Ob=!0;b.listener=null;b.a=null;b.src=null;b.Kc=null};function wo(b){this.src=b;this.listeners={};this.a=0}function xo(b,c,d,e,f){var g=c.toString();c=b.listeners[g];c||(c=b.listeners[g]=[],b.a++);var h=yo(c,d,e,f);-1<h?(b=c[h],b.hb=!1):(b=new uo(d,b.src,g,!!e,f),b.hb=!1,c.push(b));return b}wo.prototype.remove=function(b,c,d,e){b=b.toString();if(!(b in this.listeners))return!1;var f=this.listeners[b];c=yo(f,c,d,e);return-1<c?(vo(f[c]),Array.prototype.splice.call(f,c,1),0==f.length&&(delete this.listeners[b],this.a--),!0):!1};
function zo(b,c){var d=c.type;d in b.listeners&&Oa(b.listeners[d],c)&&(vo(c),0==b.listeners[d].length&&(delete b.listeners[d],b.a--))}function Ao(b,c,d,e,f){b=b.listeners[c.toString()];c=-1;b&&(c=yo(b,d,e,f));return-1<c?b[c]:null}function yo(b,c,d,e){for(var f=0;f<b.length;++f){var g=b[f];if(!g.Ob&&g.listener==c&&g.xc==!!d&&g.Kc==e)return f}return-1};var Bo="closure_lm_"+(1E6*Math.random()|0),Co={},Do=0;
function Eo(b,c,d,e,f){if(ea(c)){for(var g=0;g<c.length;g++)Eo(b,c[g],d,e,f);return null}d=Fo(d);if(b&&b[so])b=b.Ba(c,d,e,f);else{if(!c)throw Error("Invalid event type");var g=!!e,h=Go(b);h||(b[Bo]=h=new wo(b));d=xo(h,c,d,e,f);if(!d.a){e=Ho();d.a=e;e.src=b;e.listener=d;if(b.addEventListener)b.addEventListener(c.toString(),e,g);else if(b.attachEvent)b.attachEvent(Io(c.toString()),e);else throw Error("addEventListener and attachEvent are unavailable.");Do++}b=d}return b}
function Ho(){var b=Jo,c=no?function(d){return b.call(c.src,c.listener,d)}:function(d){d=b.call(c.src,c.listener,d);if(!d)return d};return c}function Ko(b,c,d,e,f){if(ea(c))for(var g=0;g<c.length;g++)Ko(b,c[g],d,e,f);else d=Fo(d),b&&b[so]?b.Qb(c,d,e,f):b&&(b=Go(b))&&(c=Ao(b,c,d,!!e,f))&&Lo(c)}
function Lo(b){if(!ha(b)&&b&&!b.Ob){var c=b.src;if(c&&c[so])zo(c.g,b);else{var d=b.type,e=b.a;c.removeEventListener?c.removeEventListener(d,e,b.xc):c.detachEvent&&c.detachEvent(Io(d),e);Do--;(d=Go(c))?(zo(d,b),0==d.a&&(d.src=null,c[Bo]=null)):vo(b)}}}function Io(b){return b in Co?Co[b]:Co[b]="on"+b}function Mo(b,c,d,e){var f=!0;if(b=Go(b))if(c=b.listeners[c.toString()])for(c=c.concat(),b=0;b<c.length;b++){var g=c[b];g&&g.xc==d&&!g.Ob&&(g=No(g,e),f=f&&!1!==g)}return f}
function No(b,c){var d=b.listener,e=b.Kc||b.src;b.hb&&Lo(b);return d.call(e,c)}
function Jo(b,c){if(b.Ob)return!0;if(!no){var d;if(!(d=c))a:{d=["window","event"];for(var e=t,f;f=d.shift();)if(null!=e[f])e=e[f];else{d=null;break a}d=e}f=d;d=new qo(f,this);e=!0;if(!(0>f.keyCode||void 0!=f.returnValue)){a:{var g=!1;if(0==f.keyCode)try{f.keyCode=-1;break a}catch(l){g=!0}if(g||void 0==f.returnValue)f.returnValue=!0}f=[];for(g=d.a;g;g=g.parentNode)f.push(g);for(var g=b.type,h=f.length-1;!d.f&&0<=h;h--){d.a=f[h];var k=Mo(f[h],g,!0,d),e=e&&k}for(h=0;!d.f&&h<f.length;h++)d.a=f[h],k=Mo(f[h],
g,!1,d),e=e&&k}return e}return No(b,new qo(c,this))}function Go(b){b=b[Bo];return b instanceof wo?b:null}var Oo="__closure_events_fn_"+(1E9*Math.random()>>>0);function Fo(b){if(ia(b))return b;b[Oo]||(b[Oo]=function(c){return b.handleEvent(c)});return b[Oo]};function Po(b){b=void 0!==b?b:{};this.g=null;var c;b.element?(c=b.element,delete b.element):c=$("<div />")[0];this.l=$("<button>",{"class":"close",html:"&times;"});this.v=$("<div/>").append(this.l).append(c);b.element=$("<div />")[0];jo.call(this,b)}y(Po,jo);
Po.prototype.setMap=function(b){var c=this.get("element");this.get("map")&&(this.g&&(Lo(this.g),this.g=null),$(c).popover("destroy"));Po.U.setMap.call(this,b);if(b){var d=this.v;window.setTimeout(function(){$(c).popover({content:d,html:!0,placement:"top",template:'<div class="popover ngeo-popover" role="tooltip">  <div class="arrow"></div>  <h3 class="popover-title"></h3>  <div class="popover-content"></div></div>'}).popover("show")},0);this.g=Eo(this.l[0],"click",this.A,!1,this)}};
Po.prototype.setMap=Po.prototype.setMap;Po.prototype.A=function(){var b=this.get("map");b&&b.c.remove(this)};function Qo(){};function Ro(){}y(Ro,Qo);Ro.prototype.Pa=function(){var b=0;Xj(this.zb(!0),function(){b++});return b};Ro.prototype.clear=function(){var b=Yj(this.zb(!0)),c=this;Ka(b,function(b){c.remove(b)})};function So(b){this.a=b}y(So,Ro);function To(b){if(!b.a)return!1;try{return b.a.setItem("__sak","1"),b.a.removeItem("__sak"),!0}catch(c){return!1}}m=So.prototype;m.set=function(b,c){try{this.a.setItem(b,c)}catch(d){if(0==this.a.length)throw"Storage mechanism: Storage disabled";throw"Storage mechanism: Quota exceeded";}};m.get=function(b){b=this.a.getItem(b);if(!ga(b)&&null!==b)throw"Storage mechanism: Invalid value was encountered";return b};m.remove=function(b){this.a.removeItem(b)};m.Pa=function(){return this.a.length};
m.zb=function(b){var c=0,d=this.a,e=new Vj;e.next=function(){if(c>=d.length)throw Uj;var e=d.key(c++);if(b)return e;e=d.getItem(e);if(!ga(e))throw"Storage mechanism: Invalid value was encountered";return e};return e};m.clear=function(){this.a.clear()};m.key=function(b){return this.a.key(b)};function Uo(){var b=null;try{b=window.localStorage||null}catch(c){}this.a=b}y(Uo,So);function Vo(b,c){this.f=this.j=this.c="";this.u=null;this.g=this.a="";this.i=!1;var d;b instanceof Vo?(this.i=ba(c)?c:b.i,Wo(this,b.c),this.j=b.j,this.f=b.f,Xo(this,b.u),this.a=b.a,Yo(this,b.b.clone()),this.g=b.g):b&&(d=String(b).match(sf))?(this.i=!!c,Wo(this,d[1]||"",!0),this.j=Zo(d[2]||""),this.f=Zo(d[3]||"",!0),Xo(this,d[4]),this.a=Zo(d[5]||"",!0),Yo(this,d[6]||"",!0),this.g=Zo(d[7]||"")):(this.i=!!c,this.b=new $o(null,0,this.i))}
Vo.prototype.toString=function(){var b=[],c=this.c;c&&b.push(ap(c,bp,!0),":");var d=this.f;if(d||"file"==c)b.push("//"),(c=this.j)&&b.push(ap(c,bp,!0),"@"),b.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.u,null!=d&&b.push(":",String(d));if(d=this.a)this.f&&"/"!=d.charAt(0)&&b.push("/"),b.push(ap(d,"/"==d.charAt(0)?cp:dp,!0));(d=this.b.toString())&&b.push("?",d);(d=this.g)&&b.push("#",ap(d,ep));return b.join("")};
Vo.prototype.resolve=function(b){var c=this.clone(),d=!!b.c;d?Wo(c,b.c):d=!!b.j;d?c.j=b.j:d=!!b.f;d?c.f=b.f:d=null!=b.u;var e=b.a;if(d)Xo(c,b.u);else if(d=!!b.a){if("/"!=e.charAt(0))if(this.f&&!this.a)e="/"+e;else{var f=c.a.lastIndexOf("/");-1!=f&&(e=c.a.substr(0,f+1)+e)}f=e;if(".."==f||"."==f)e="";else if(-1!=f.indexOf("./")||-1!=f.indexOf("/.")){for(var e=0==f.lastIndexOf("/",0),f=f.split("/"),g=[],h=0;h<f.length;){var k=f[h++];"."==k?e&&h==f.length&&g.push(""):".."==k?((1<g.length||1==g.length&&
""!=g[0])&&g.pop(),e&&h==f.length&&g.push("")):(g.push(k),e=!0)}e=g.join("/")}else e=f}d?c.a=e:d=""!==b.b.toString();d?Yo(c,Zo(b.b.toString())):d=!!b.g;d&&(c.g=b.g);return c};Vo.prototype.clone=function(){return new Vo(this)};function Wo(b,c,d){b.c=d?Zo(c,!0):c;b.c&&(b.c=b.c.replace(/:$/,""))}function Xo(b,c){if(c){c=Number(c);if(isNaN(c)||0>c)throw Error("Bad port number "+c);b.u=c}else b.u=null}function Yo(b,c,d){c instanceof $o?(b.b=c,fp(b.b,b.i)):(d||(c=ap(c,gp)),b.b=new $o(c,0,b.i))}
function hp(b){return b instanceof Vo?b.clone():new Vo(b,void 0)}function ip(b,c){b instanceof Vo||(b=hp(b));c instanceof Vo||(c=hp(c));return b.resolve(c)}function Zo(b,c){return b?c?decodeURI(b.replace(/%25/g,"%2525")):decodeURIComponent(b):""}function ap(b,c,d){return ga(b)?(b=encodeURI(b).replace(c,jp),d&&(b=b.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b):null}function jp(b){b=b.charCodeAt(0);return"%"+(b>>4&15).toString(16)+(b&15).toString(16)}
var bp=/[#\/\?@]/g,dp=/[\#\?:]/g,cp=/[\#\?]/g,gp=/[\#\?@]/g,ep=/#/g;function $o(b,c,d){this.b=this.a=null;this.f=b||null;this.c=!!d}function kp(b){b.a||(b.a=new Zj,b.b=0,b.f&&tf(b.f,function(c,d){lp(b,decodeURIComponent(c.replace(/\+/g," ")),d)}))}m=$o.prototype;m.Pa=function(){kp(this);return this.b};function lp(b,c,d){kp(b);b.f=null;c=mp(b,c);var e=b.a.get(c);e||b.a.set(c,e=[]);e.push(d);b.b=b.b+1}
m.remove=function(b){kp(this);b=mp(this,b);return ck(this.a.b,b)?(this.f=null,this.b=this.b-this.a.get(b).length,this.a.remove(b)):!1};m.clear=function(){this.a=this.f=null;this.b=0};m.Ja=function(){kp(this);return 0==this.b};function np(b,c){kp(b);c=mp(b,c);return ck(b.a.b,c)}m.ya=function(){kp(this);for(var b=this.a.za(),c=this.a.ya(),d=[],e=0;e<c.length;e++)for(var f=b[e],g=0;g<f.length;g++)d.push(c[e]);return d};
m.za=function(b){kp(this);var c=[];if(ga(b))np(this,b)&&(c=Pa(c,this.a.get(mp(this,b))));else{b=this.a.za();for(var d=0;d<b.length;d++)c=Pa(c,b[d])}return c};m.set=function(b,c){kp(this);this.f=null;b=mp(this,b);np(this,b)&&(this.b=this.b-this.a.get(b).length);this.a.set(b,[c]);this.b=this.b+1;return this};m.get=function(b,c){var d=b?this.za(b):[];return 0<d.length?String(d[0]):c};
m.toString=function(){if(this.f)return this.f;if(!this.a)return"";for(var b=[],c=this.a.ya(),d=0;d<c.length;d++)for(var e=c[d],f=encodeURIComponent(String(e)),e=this.za(e),g=0;g<e.length;g++){var h=f;""!==e[g]&&(h+="="+encodeURIComponent(String(e[g])));b.push(h)}return this.f=b.join("&")};m.clone=function(){var b=new $o;b.f=this.f;this.a&&(b.a=this.a.clone(),b.b=this.b);return b};function mp(b,c){var d=String(c);b.c&&(d=d.toLowerCase());return d}
function fp(b,c){c&&!b.c&&(kp(b),b.f=null,b.a.forEach(function(b,c){var f=c.toLowerCase();c!=f&&(this.remove(c),this.remove(f),0<b.length&&(this.f=null,this.a.set(mp(this,f),Qa(b)),this.b=this.b+b.length))},b));b.c=c}m.extend=function(b){for(var c=0;c<arguments.length;c++)Tj(arguments[c],function(b,c){lp(this,c,b)},this)};function op(b){this.a=hp(b)}function pp(b,c){var d=b.a.b;ac(c,function(b,c){d.set(c,b)})}function qp(b,c){var d=c.history,e=new op(c.location),f=e.a.toString();b.$watch(function(){var c=e.a.toString();f!==c&&b.$evalAsync(function(){f=c;void 0!==d&&void 0!==d.replaceState&&d.replaceState(null,"",c);b.$broadcast("ngeoLocationChange")})});return e}qp.$inject=["$rootScope","$window"];z.factory("ngeoLocation",qp);function rp(b){this.a={};this.f=b;this.b=new Uo;var c=b.a.b.ya(),d;if(0===c.length||1===c.length&&"debug"==c[0]){if(To(this.b))for(b=this.b.Pa(),c=0;c<b;++c)d=this.b.key(c),this.a[d]=this.b.get(d)}else for(var e=b.a.b.ya(),c=0;c<e.length;++c)d=e[c],this.a[d]=b.a.b.get(d);pp(this.f,{})}rp.$inject=["ngeoLocation"];function sp(b,c){pp(b.f,c);if(To(b.b))for(var d in c)b.b.set(d,c[d])}z.service("ngeoStateManager",rp);function tp(b){this.l=this.c=this.g=null;this.u=void 0!==b.fill?b.fill:null;this.C=[0,0];this.a=b.points;this.f=void 0!==b.radius?b.radius:b.tk;this.i=void 0!==b.gc?b.gc:this.f;this.j=void 0!==b.angle?b.angle:0;this.b=void 0!==b.stroke?b.stroke:null;this.A=this.D=this.v=null;var c=b.Dg,d="",e="",f=0,g=null,h,k=0;this.b&&(h=oh(this.b.a),k=this.b.b,void 0===k&&(k=1),g=this.b.f,wh||(g=null),e=this.b.g,void 0===e&&(e="round"),d=this.b.c,void 0===d&&(d="round"),f=this.b.i,void 0===f&&(f=10));var l=2*(this.f+
k)+1,d={strokeStyle:h,strokeWidth:k,size:l,lineCap:d,H:g,lineJoin:e,miterLimit:f};if(void 0===c){this.c=document.createElement("CANVAS");this.c.height=l;this.c.width=l;var c=l=this.c.width,n=this.c.getContext("2d");this.Bf(d,n,0,0);this.u?this.l=this.c:(n=this.l=document.createElement("CANVAS"),n.height=d.size,n.width=d.size,n=n.getContext("2d"),this.Af(d,n,0,0))}else l=Math.round(l),(e=!this.u)&&(n=this.Af.bind(this,d)),f=this.b?Oh(this.b):"-",g=this.u?Hh(this.u):"-",this.g&&f==this.g[1]&&g==this.g[2]&&
this.f==this.g[3]&&this.i==this.g[4]&&this.j==this.g[5]&&this.a==this.g[6]||(this.g=["r"+f+g+(void 0!==this.f?this.f.toString():"-")+(void 0!==this.i?this.i.toString():"-")+(void 0!==this.j?this.j.toString():"-")+(void 0!==this.a?this.a.toString():"-"),f,g,this.f,this.i,this.j,this.a]),n=c.a(this.g[0],l,l,this.Bf.bind(this,d),n),this.c=n.image,this.C=[n.offsetX,n.offsetY],c=n.image.width,this.l=e?n.Ph:this.c;this.v=[l/2,l/2];this.D=[l,l];this.A=[c,c];Ih.call(this,{opacity:1,qb:void 0!==b.qb?b.qb:
!1,rotation:void 0!==b.rotation?b.rotation:0,scale:1,Ua:void 0!==b.Ua?b.Ua:!0})}y(tp,Ih);m=tp.prototype;m.Yb=function(){return this.v};m.$d=function(){return this.l};m.Rc=function(){return this.c};m.Md=function(){return this.A};m.dc=function(){return 2};m.Qa=function(){return this.C};m.ob=function(){return this.D};m.Wd=Md;m.load=Md;m.qe=Md;
m.Bf=function(b,c,d,e){var f;c.setTransform(1,0,0,1,0,0);c.translate(d,e);c.beginPath();this.i!==this.f&&(this.a*=2);for(d=0;d<=this.a;d++)e=2*d*Math.PI/this.a-Math.PI/2+this.j,f=0===d%2?this.f:this.i,c.lineTo(b.size/2+f*Math.cos(e),b.size/2+f*Math.sin(e));this.u&&(c.fillStyle=qh(this.u.a),c.fill());this.b&&(c.strokeStyle=b.strokeStyle,c.lineWidth=b.strokeWidth,b.H&&c.setLineDash(b.H),c.lineCap=b.lineCap,c.lineJoin=b.lineJoin,c.miterLimit=b.miterLimit,c.stroke());c.closePath()};
m.Af=function(b,c,d,e){c.setTransform(1,0,0,1,0,0);c.translate(d,e);c.beginPath();this.i!==this.f&&(this.a*=2);var f;for(d=0;d<=this.a;d++)f=2*d*Math.PI/this.a-Math.PI/2+this.j,e=0===d%2?this.f:this.i,c.lineTo(b.size/2+e*Math.cos(f),b.size/2+e*Math.sin(f));c.fillStyle=Ch;c.fill();this.b&&(c.strokeStyle=b.strokeStyle,c.lineWidth=b.strokeWidth,b.H&&c.setLineDash(b.H),c.stroke());c.closePath()};B.constant("gmfPermalinkOptions",{});
function up(b,c,d,e,f,g,h){this.o=b;this.V=c;this.v=xj(d);this.Aa=e;this.b=f;this.M=g;this.u=this.c=this.g=this.f=null;void 0!==h.crosshairStyle?this.l=h.crosshairStyle:this.l=[new Qh({image:new tp({stroke:new Nh({color:"rgba(255, 255, 255, 0.8)",width:5}),points:4,radius:8,gc:0,angle:0})}),new Qh({image:new tp({stroke:new Nh({color:"rgba(255, 0, 0, 1)",width:2}),points:4,radius:8,gc:0,angle:0})})];I(this.o,"change",this.W,this);I(g,"load",this.hh,this,!0);this.j=null;this.a={}}up.$inject="ngeoBackgroundLayerMgr ngeoDebounce ngeoFeatureOverlayMgr ngeoLayerHelper ngeoStateManager gmfThemes gmfPermalinkOptions".split(" ");
function vp(b,c){b.a[c]?(b.a[c].Hc.length&&(b.a[c].Hc.forEach(function(b){Lo(b)},b),b.a[c].Hc.length=0),b.a[c].Oc.length&&(b.a[c].Oc.forEach(function(b){G(b)},b),b.a[c].Oc.length=0)):b.a[c]={Hc:[],Oc:[]}}function wp(b,c,d,e){b.a[c]||vp(b,c);(void 0!==e?e:1)?b.a[c].Oc.push(d):b.a[c].Hc.push(d)}up.prototype.af=function(){var b=null,c=this.b.a.map_x,d=this.b.a.map_y;void 0!==c&&void 0!==d&&(b=[+c,+d]);return b};up.prototype.getMapCenter=up.prototype.af;
up.prototype.df=function(){var b=null,c=this.b.a.map_zoom;void 0!==c&&(b=+c);return b};up.prototype.getMapZoom=up.prototype.df;up.prototype.bf=function(){var b=this.b.a.map_crosshair;return"true"===b?!0:!1};up.prototype.getMapCrosshair=up.prototype.bf;up.prototype.cf=function(){return this.b.a.map_tooltip||null};up.prototype.getMapTooltip=up.prototype.cf;
up.prototype.setMap=function(b){b!==this.f&&(this.f&&(G(this.j),this.j=null,this.i&&(this.i.setMap(null),this.i.N().clear(),this.i=null),this.f=this.g=null),b&&(xp(this,b),this.f=b))};up.prototype.setMap=up.prototype.setMap;
function xp(b,c){var d=U(c),e=b.af();null!==e&&Pl(d,e);var f=b.df();null!==f&&Sl(d,f);b.j=I(d,"propertychange",b.V(function(){var b=Kl(d),c=Ml(d),e={};e.map_x=Math.round(b[0]);e.map_y=Math.round(b[1]);e.map_zoom=c;sp(this.b,e)}.bind(b),300,!0),b);if(b.bf()){var g;null!==e?g=e:g=Kl(d);f=new Xh(new Ci(g));$h(f,b.l);b.v.ia(f)}if(f=b.cf()){var h;null!==e?h=e:h=Kl(d);e=$("<div/>",{"class":"gmf-permalink-tooltip",text:f})[0];h=new Po({element:e,position:h});c.c.push(h)}b.g=b.Aa.Ld(c,"data")}
up.prototype.We=function(b){var c=null,d=this.b.a.baselayer_ref;if(void 0!==d)for(var e=0,f=b.length;e<f;e++)if(b[e].get("label")===d){c=b[e];break}return c};up.prototype.getBackgroundLayer=up.prototype.We;up.prototype.W=function(){if(this.f){var b=this.o.get(this.f).get("label"),c={};c.baselayer_ref=b;sp(this.b,c)}};up.prototype.Tf=function(b){if(b!==this.c){if(this.c){var c=lf(this.g),c=w(c);vp(this,c);this.c=null}b&&(yp(this),this.c=b)}};up.prototype.setLayertreeController=up.prototype.Tf;
function yp(b){if(b.u){var c=lf(b.g);b.u.forEach(function(b){b.children.forEach(function(b){var d=b.name;b=this.b.a["tree_group_layers_"+d];void 0!==b&&(d=this.Aa.Nd(d,c.a))&&(d instanceof qf||d instanceof rf)&&(d=d.N(),d instanceof Yf&&(Ua(d.a,{LAYERS:b}),Zf(d),d.i=null,d.b()))},this)},b);c.forEach(function(b){zp(this,b)},b);var d=w(c);wp(b,d,I(c,"add",b.fh,b));wp(b,d,I(c,"remove",b.gh,b))}}m=up.prototype;m.fh=function(b){zp(this,b.element)};
m.gh=function(b){b=b.element;var c=w(b);vp(this,c);if(b instanceof qf||b instanceof rf)b=b.N(),b instanceof Yf&&(b=w(b),vp(this,b))};function zp(b,c){var d=w(c);wp(b,d,I(c,L("visible"),b.vh,b));if(c instanceof qf||c instanceof rf)if(d=c.N(),d instanceof Yf){var e=w(d);wp(b,e,I(d,"change",b.Mh.bind(b,c,d),b),!1)}}m.vh=function(b){if(!0===b.oldValue){b=b.target.get("layerName");var c={};c["tree_group_layers_"+b]="";sp(this.b,c)}};
m.Mh=function(b,c){var d=c.a.LAYERS;ea(d)&&(d=d.join(","));var e=b.get("layerName"),f={};f["tree_group_layers_"+e]=d;sp(this.b,f)};m.hh=function(){this.M.$b().then(function(b){this.u=b;this.c&&window.setTimeout(function(){yp(this)}.bind(this),0)}.bind(this))};B.service("gmfPermalink",up);z.value("ngeoPopupTemplateUrl",function(b,c){var d=c.ngeoPopupTemplateurl;return void 0!==d?d:"ngeo/popup.html"});function Ap(b){return{restrict:"A",templateUrl:b,link:function(b,d){d.addClass("popover");b.close=function(b){b&&(b.stopPropagation(),b.preventDefault());d.addClass("hidden")};b.$watch("open",function(b){d.css("display",b?"block":"none")})}}}Ap.$inject=["ngeoPopupTemplateUrl"];z.directive("ngeoPopup",Ap);function Bp(b,c){this.a=c.$new(!0);this.b=angular.element("<div ngeo-popup></div>");b(this.b)(this.a);angular.element(document.body).append(this.b)}function Cp(b,c){return function(){return new Bp(b,c)}}Cp.$inject=["$compile","$rootScope"];z.factory("ngeoCreatePopup",Cp);z.value("ngeoLayertreeTemplateUrl",function(b,c){var d=c.ngeoLayertreeTemplateurl;return void 0!==d?d:"ngeo/layertree.html"});function Dp(b,c){return{restrict:"A",scope:!0,templateUrl:c,controller:"NgeoLayertreeController"}}Dp.$inject=["$compile","ngeoLayertreeTemplateUrl"];z.directive("ngeoLayertree",Dp);
function Ep(b,c,d){this.isRoot=c=void 0===d.ngeoLayertreeNotroot;var e=d.ngeoLayertree;this.node=void 0;c?b.$watch(e,function(b){this.node=b}.bind(this)):this.node=b.$eval(e);e=b.$eval(d.ngeoLayertreeMap);this.parent=b.$parent.layertreeCtrl;this.uid=w(this);this.depth=c?0:this.parent.depth+1;b.uid=this.uid;b.depth=this.depth;this.map=e;e=d.ngeoLayertreeNodelayer;void 0===e&&(e=b.$eval(d.ngeoLayertreeNodelayerexpr));this.nodelayerExpr=e;this.layer=c?null:b.$eval(e,{node:this.node,depth:this.depth});
c=d.ngeoLayertreeListeners;void 0===c&&(c=b.$eval(d.ngeoLayertreeListenersexpr));this.listenersExpr=c;null!=c&&b.$eval(c,{treeScope:b,treeCtrl:this});b.layertreeCtrl=this}sa("ngeo.LayertreeController",Ep);Ep.$inject=["$scope","$element","$attrs"];Ep.prototype.bh=function(b){var c=this.layer,d=this.map;if(void 0!==b)b?Zg(d,c):lf(Yg(d)).remove(c);else return 0<=rb(lf(Yg(d))).indexOf(c)};Ep.prototype.getSetActive=Ep.prototype.bh;z.controller("NgeoLayertreeController",Ep);B.value("gmfLayertreeTemplate",function(){return'<div ngeo-layertree="gmfLayertreeCtrl.tree" ngeo-layertree-map="gmfLayertreeCtrl.map" ngeo-layertree-nodelayer="gmfLayertreeCtrl.getLayer(node, depth)" ngeo-layertree-listeners="gmfLayertreeCtrl.listeners(treeScope, treeCtrl)" ngeo-layertree-templateurl="gmf/layertree.html"</div>'});z.value("ngeoLayertreeTemplateUrl",function(){return"gmf/layertree.html"});
function Fp(b){return{scope:{map:"=gmfLayertreeMap",tree:"=gmfLayertreeSource",openLinksInNewWindowFn:"&gmfLayertreeOpenlinksinnewwindow"},bindToController:!0,controller:"GmfLayertreeController",controllerAs:"gmfLayertreeCtrl",template:b}}Fp.$inject=["gmfLayertreeTemplate"];B.directive("gmfLayertree",Fp);
function V(b,c,d,e,f,g){this.i=b;this.g=c;this.a=g;this.Aa=e;this.j=d();this.f={};this.b={};this.openLinksInNewWindow=!0===this.openLinksInNewWindowFn()?!0:!1;this.c=this.Aa.Ld(this.map,"data");f.Tf(this)}sa("gmf.LayertreeController",V);V.$inject="$http $sce ngeoCreatePopup ngeoLayerHelper gmfPermalink gmfWmsUrl".split(" ");function Gp(b){var c=b.mixed;return void 0!==b.children&&c?"MixedGroup":void 0===b.children||c?"WMTS"===b.type?"WMTS":null!=b.url?"externalWMS":"WMS":"NotMixedGroup"}
V.prototype.ma=function(b,c,d){var e=Gp(b),f=null;if(1===c){switch(e){case "MixedGroup":d=new pb;var g,e=[],f=[];Hp(this,b,e);for(b=0;b<e.length;b++)g=e[b],c=this.ma(g,1,!0),null!=c&&(d.push(c),f.push(g.name));b=this.Aa.xd(d);this.b[w(b)]=[];return b;case "NotMixedGroup":f=Ip(this,b,!0),c=this.Aa.yd(b.url||this.a,""),Jp(c,f),this.b[w(c)]=[],f=c}switch(e){case "WMTS":f=Kp(this,b);break;case "WMS":case "externalWMS":e=b.url||this.a,f=d?this.Aa.yd(e,b.name):null}}null!=f&&(d=Lp(this,b),f.set("querySourceIds",
d),f.set("layerName",b.name),sb(lf(this.c),0,f),d=b.metadata,void 0===b.children&&null!=d&&"true"!=d.isChecked&&f.Ta(!1));return f};V.prototype.getLayer=V.prototype.ma;function Kp(b,c){var d=new rf;b.Aa.zd(c.url||"",c.name).then(function(b){pf(d,b.N());d.set("capabilitiesStyles",b.get("capabilitiesStyles"))});return d}function Hp(b,c,d){var e=c.children;if(void 0!==e)for(c=0;c<e.length;c++)Hp(b,e[c],d);else d.push(c)}
function Ip(b,c,d){var e=[],f=[];Hp(b,c,f);var g;for(g=0;g<f.length;g++)c=f[g],b=c.metadata,(!d||null!=b&&"false"!=b.isChecked)&&e.push(c.name);return e}function Mp(b){for(;1<b.depth;)b=b.parent;return b}V.prototype.listeners=function(b,c){var d=this.c;b.$on("$destroy",function(){lf(d).remove(c.layer)}.bind(c))};V.prototype.listeners=V.prototype.listeners;
V.prototype.$g=function(b){var c,d=U(this.map).S(),e=b.maxResolutionHint;b=b.minResolutionHint;if(void 0!==b&&d<b||void 0!==e&&d>e)c="outOfResolution";return c||null};V.prototype.getResolutionStyle=V.prototype.$g;
V.prototype.yj=function(b){var c=b.node,d=Gp(c),e=b.layer,f;f=Mp(b);var g=f.layer;b="on"===this.ef(b)?!0:!1;switch(d){case "WMS":case "WMTS":case "externalWMS":if(g instanceof kf)e.Ta(!b);else{d=g.N();f=f.node;var e=jf(g)?d.a.LAYERS.split(","):[],h,k=[],d=Ip(this,f);for(f=0;f<d.length;f++)h=d[f],h===c.name?b||k.push(h):0<=e.indexOf(h)&&k.push(h);Jp(g,k)}break;case "MixedGroup":e=[];d=Ip(this,c);c=this.Aa.Ec(g);for(f=0;f<c.length;f++)g=c[f],k=c[f].N(),k instanceof Ug?0<=d.indexOf(k.ma())&&e.push(g):
k instanceof Yf&&0<=d.indexOf(k.a.LAYERS)&&e.push(g);for(f=0;f<e.length;f++)e[f].Ta(!b);break;case "NotMixedGroup":d=Ip(this,c);k=g.N();c=jf(g)?k.a.LAYERS.split(","):[];if(b)for(f=0;f<d.length;f++)Oa(c,d[f]);else for(f=0;f<d.length;f++)b=c,e=d[f],Na(b,e)||b.push(e);Jp(g,c)}};V.prototype.toggleActive=V.prototype.yj;
V.prototype.ef=function(b){var c,d=b.layer,e=b.node,f=Gp(e),g=Mp(b).layer,h=this.b[w(g)];switch(f){case "WMS":case "WMTS":case "externalWMS":if(g instanceof kf){if(null==d){c=this.Aa.Ec(Mp(b).layer);var g=b.node,k;for(k=0;k<c.length;k++)if(f=c[k],d=f.N(),d instanceof Ug&&d.ma()===g.name){b.layer=f;break}else if(d instanceof Yf&&d.a.LAYERS===g.name){b.layer=f;break}d=b.layer}c=null!=d&&jf(d)?"on":"off"}else b=g.N(),c=0>b.a.LAYERS.split(",").indexOf(e.name)||!jf(g)?"off":"on";"on"===c?(e=e.name,Na(h,
e)||h.push(e)):Oa(h,e.name);break;case "MixedGroup":case "NotMixedGroup":e=Ip(this,e);for(b=c=0;b<e.length;b++)0<=h.indexOf(e[b])&&c++;c=0===c?"off":c===e.length?"on":"indeterminate"}return c||"off"};V.prototype.getNodeState=V.prototype.ef;function Jp(b,c){if(0>=c.length)b.Ta(!1);else{b.Ta(!0);c.reverse();var d=b.N();Ua(d.a,{LAYERS:c.join(",")});Zf(d);d.i=null;d.b()}}
V.prototype.Xg=function(b){b=b.node;var c=b.metadata.legendRule;return void 0!==b.children||void 0===c||"WMTS"===b.type||"external WMS"===b.type||void 0!==b.childLayers&&1<b.childLayers.length?null:Np(this,b,c)};V.prototype.getLegendIconURL=V.prototype.Xg;V.prototype.Yg=function(b){var c=b.node;if(void 0!==c.children)return null;b=b.layer;var d;"WMTS"===c.type&&null!=b?(c=b.get("capabilitiesStyles"),void 0!==c&&(c=c[0].legendURL,void 0!==c&&(d=c[0].href)),d=d||null):d=Np(this,c);return d};
V.prototype.getLegendURL=V.prototype.Yg;function Np(b,c,d){var e,f=U(b.map);e=f.S();f=Te(f.Y());e=25.4/.28*f*39.37*e;b=c.url||b.a;void 0!==b&&(b=Cf(b,"FORMAT","image/png"),b=Cf(b,"TRANSPARENT",!0),b=Cf(b,"SERVICE","wms"),b=Cf(b,"VERSION","1.1.1"),b=Cf(b,"REQUEST","GetLegendGraphic"),b=Cf(b,"LAYER",c.name),b=Cf(b,"SCALE",e),void 0!==d&&(b=Cf(b,"RULE",d)));return b||null}
V.prototype.Og=function(b){var c=b.uid.toString(),d=b.node;b=d.metadata.metadataUrl;if(void 0!==b){c in this.f||(this.f[c]=this.i.get(b).then(function(b){return this.g.trustAsHtml(b.data)}.bind(this)));var e=this.j;this.f[c].then(function(b){e.a.title=d.name;e.a.content=b;e.a.open=!0})}};V.prototype.displayMetadata=V.prototype.Og;V.prototype.Zg=function(b){b=b.layer;var c;if(c=void 0!==b&&b instanceof rf&&void 0!==b.N)c=null==b.N();return c?"noSource":null};V.prototype.getNoSourceStyle=V.prototype.Zg;
V.prototype.Rj=function(b){var c=U(this.map);b=b.minResolutionHint||b.maxResolutionHint;void 0!==b&&Ol(c,b)};V.prototype.zoomToResolution=V.prototype.Rj;function Lp(b,c){var d=[],e=c.children||c;e&&e.length?e.forEach(function(b){d=d.concat(Lp(this,b))},b):void 0!==c.id&&d.push(c.id);return d}B.controller("GmfLayertreeController",V);z.directive("ngeoMap",function(){return{restrict:"A",link:function(b,c,d){b.$eval(d.ngeoMap).set("target",c[0])}}});B.directive("gmfMap",function(){return{scope:{getMapFn:"&gmfMapMap"},controller:"GmfMapController",controllerAs:"ctrl",template:'<div ngeo-map="ctrl.map"></div>'}});function Op(b,c,d){this.map=b.getMapFn();c.Zd.setMap(this.map);d.setMap(this.map)}Op.$inject=["$scope","ngeoFeatureOverlayMgr","gmfPermalink"];B.controller("GmfMapController",Op);function Pp(){this.ua=null}y(Pp,bi);function Qp(b){return ka(b)?b:"string"===typeof b?(b=JSON.parse(b))?b:null:null}Pp.prototype.aa=function(){return"json"};Pp.prototype.Uc=function(b,c){var d;var e=Qp(b);d=ci(this,b,c);if("Feature"==e.type)d=[Rp(this,e,d)];else if("FeatureCollection"==e.type){var f=[],e=e.features,g,h;g=0;for(h=e.length;g<h;++g)f.push(Rp(this,e[g],d));d=f}else d=[];return d};
Pp.prototype.f=function(b){return(b=Qp(b).crs)?"name"==b.type?Oe(b.properties.name):"EPSG"==b.type?Oe("EPSG:"+b.properties.code):null:this.ua};function Sp(b){ih.call(this);this.a=b?b:null;Tp(this)}y(Sp,ih);function Up(b){var c,d;if(b.a)for(c=0,d=b.a.length;c<d;++c)cb(b.a[c],"change",b.b,b)}function Tp(b){var c,d;if(b.a)for(c=0,d=b.a.length;c<d;++c)I(b.a[c],"change",b.b,b)}m=Sp.prototype;m.clone=function(){var b=new Sp(null),c=this.a,d=[],e,f;e=0;for(f=c.length;e<f;++e)d.push(c[e].clone());Up(b);b.a=d;Tp(b);b.b();return b};
m.zc=function(b){Kb(Infinity,Infinity,-Infinity,-Infinity,b);for(var c=this.a,d=0,e=c.length;d<e;++d)Mb(b,c[d].G());return b};m.Pd=function(b){this.l!=this.f&&(Va(this.i),this.j=0,this.l=this.f);if(0>b||0!==this.j&&b<this.j)return this;var c=b.toString();if(this.i.hasOwnProperty(c))return this.i[c];var d=[],e=this.a,f=!1,g,h;g=0;for(h=e.length;g<h;++g){var k=e[g],l=k.Pd(b);d.push(l);l!==k&&(f=!0)}if(f)return b=new Sp(null),Up(b),b.a=d,Tp(b),b.b(),this.i[c]=b;this.j=b;return this};m.aa=function(){return"GeometryCollection"};
m.Ja=function(){return 0===this.a.length};m.uc=function(b){var c=this.a,d,e;d=0;for(e=c.length;d<e;++d)c[d].uc(b);this.b()};m.translate=function(b,c){var d=this.a,e,f;e=0;for(f=d.length;e<f;++e)d[e].translate(b,c);this.b()};m.L=function(){Up(this);Sp.U.L.call(this)};function Vp(b){b=b?b:{};this.ua=null;this.ua=Oe(b.ua?b.ua:"EPSG:4326");this.a=b.Ug}y(Vp,Pp);function Wp(b,c){return b?di((0,Xp[b.type])(b),!1,c):null}
var Xp={Point:function(b){return new Ci(b.coordinates)},LineString:function(b){return new ui(b.coordinates)},Polygon:function(b){return new Ji(b.coordinates)},MultiPoint:function(b){return new Di(b.coordinates)},MultiLineString:function(b){return new yi(b.coordinates)},MultiPolygon:function(b){return new Mi(b.coordinates)},GeometryCollection:function(b,c){var d=b.geometries.map(function(b){return Wp(b,c)});return new Sp(d)}};
function Rp(b,c,d){d=Wp(c.geometry,d);var e=new Xh;b.a&&Zh(e,b.a);Yh(e,d);void 0!==c.id&&(e.c=c.id,e.b());c.properties&&e.ka(c.properties);return e};z.value("ngeoCreateGeoJSONBloodhound",function(b,c,d,e,f,g){var h=new Vp;b={remote:{url:b,rateLimitWait:50,prepare:function(b,c){c.url=c.url.replace("%QUERY",b);return c},transform:function(b){void 0!==c&&(b={type:"FeatureCollection",features:b.features.filter(c)});return h.Uc(b,{Fb:d,ib:e})}},datumTokenizer:ca,queryTokenizer:Bloodhound.tokenizers.whitespace};f&&fc(b,f);g&&fc(b.remote,g);return new Bloodhound(b)});function Yp(){return{restrict:"A",link:function(b,c,d){var e=b.$eval(d.ngeoSearch),f=b.$eval(d.ngeoSearchDatasets).slice();f.unshift(e);c.typeahead.apply(c,f);d=b.$eval(d.ngeoSearchListeners);var g=Yp.a(d);c.on("typeahead:open",function(){b.$apply(function(){g.open()})});c.on("typeahead:close",function(){b.$apply(function(){g.close()})});c.on("typeahead:cursorchange",function(c,d,e){b.$apply(function(){g.cursorchange(c,d,e)})});c.on("typeahead:select",function(c,d,e){b.$apply(function(){g.select(c,
d,e)})});c.on("typeahead:autocomplete",function(c,d,e){b.$apply(function(){g.autocomplete(c,d,e)})})}}}Yp.a=function(b){var c;void 0===b?c={open:ca,close:ca,cursorchange:ca,select:ca,autocomplete:ca}:c={open:void 0!==b.open?b.open:ca,close:void 0!==b.close?b.close:ca,cursorchange:void 0!==b.cursorchange?b.cursorchange:ca,select:void 0!==b.select?b.select:ca,autocomplete:void 0!==b.autocomplete?b.autocomplete:ca};return c};z.directive("ngeoSearch",Yp);B.value("gmfSearchTemplateUrl",function(b,c){var d=c.gmfSearchTemplateurl;return void 0!==d?d:"gmf/search.html"});function Zp(b){return{restrict:"E",scope:{getMapFn:"&gmfSearchMap",getDatasourcesFn:"&gmfSearchDatasources",clearbutton:"=gmfSearchClearbutton",currentTheme:"=gmfSearchCurrenttheme"},controller:"GmfSearchController",controllerAs:"ctrl",templateUrl:b,link:function(b,d){if(!b.clearbutton){var e=b.ctrl;d.find("input").on("focus blur",function(){e.clear()})}}}}Zp.$inject=["gmfSearchTemplateUrl"];
B.directive("gmfSearch",Zp);
function $p(b,c,d,e,f,g,h){this.a=b;this.g=c;this.l=d;this.i=e;this.j=h;this.u=f;this.f=this.a.getMapFn();this.clearButton=this.a.clearbutton||!1;this.b=xj(g);this.c=this.a.getDatasourcesFn();this.options={highlight:!0,hint:void 0,minLength:void 0};this.datasets=[];this.input_value="";for(b=0;b<this.c.length;b++){var k=this.c[b];c=void 0!==k.groupValues?k.groupValues:[];d=k.groupActions?k.groupActions:[];var l=[];0===c.length?l.push({title:void 0,filter:void 0}):(c.forEach(function(b){l.push({title:b,filter:aq(b)})},
this),d.forEach(function(b){l.push({title:b,filter:bq(b)})},this));l.forEach(function(b){this.datasets.push(cq(this,{bloodhoundOptions:k.bloodhoundOptions,Ve:b.title,pk:"layer_name",labelKey:k.labelKey,projection:k.projection,typeaheadDatasetOptions:k.typeaheadDatasetOptions,url:k.url},b.filter))},this)}this.listeners={select:dq.bind(this),close:eq.bind(this)}}sa("gmf.SearchController",$p);$p.$inject="$scope $compile $timeout gettextCatalog ngeoCreateGeoJSONBloodhound ngeoFeatureOverlayMgr gmfThemes".split(" ");
function cq(b,c,d){var e=b.a,f=b.g;b=fq(b,c,d);b={limit:Infinity,source:b.ttAdapter(),display:function(b){return b.get(c.labelKey)},templates:{header:function(){return void 0===c.Ve?"":'<div class="search-header">'+c.Ve+"</div>"},suggestion:function(b){var d=e.$new(!0);d.feature=b;var k='<p class="search-label">'+b.get(c.labelKey)+"</p>",k=k+('<p class="search-group">'+b.get("layer_name")+"</p>");return f('<div class="search-datum">'+k+"</div>")(d)}}};c.typeaheadDatasetOptions&&fc(b,c.typeaheadDatasetOptions);
return b}function bq(b){return function(c){c=c.properties;return c.actions?!c.layer_name&&c.actions.some(function(c){return c.action===b}):!1}}function aq(b){return function(c){return c.properties.layer_name===b}}function fq(b,c,d){var e=Se(U(b.f).Y()),f=gq(b);b=b.u(c.url,d,Oe(e),Oe(c.projection),c.bloodhoundOptions,f);b.initialize();return b}
function gq(b){var c=b.i;return{prepare:function(b,e){var f=e.url,g=c.currentLanguage,f=Cf(f,"query",b),f=Cf(f,"lang",g),f=Cf(f,"interface","mobile");e.xhrFields={withCredentials:!0};e.url=f;return e}}}function hq(b){if(b.clearButton){var c=$(".twitter-typeahead .tt-menu");b.input_value?c.show():c.hide()}}function iq(b,c){b.j.$b().then(function(b){(b=bh(b,c))&&(this.a.currentTheme=b)}.bind(b))}$p.prototype.Ii=function(){this.b.clear();this.clear()};$p.prototype.onClearButton=$p.prototype.Ii;
$p.prototype.clear=function(){var b=$(".twitter-typeahead"),c=b.children(".tt-menu"),b=b.children("input");this.input_value="";$(b[1]).typeahead("val","");c.children(".tt-dataset").empty();hq(this)};$p.prototype.clear=$p.prototype.clear;$p.prototype.blur=function(){var b=$(".twitter-typeahead").children("input");this.l(function(){$(b[1]).blur()})};$p.prototype.blur=$p.prototype.blur;
function dq(b,c){var d=c.get("actions");if(d)for(var e=0,f=d.length;e<f;e++){var g=d[e],h=g.data;"add_theme"==g.action&&iq(this,h)}d=c.J();null!=d&&(this.b.clear(),this.b.ia(c),d="GeometryCollection"===d.aa()?d.G():d,e=Em(this.f),Nl(U(this.f),d,e,{Ra:16}),this.clearButton||this.clear());this.blur()}function eq(){this.clearButton||hq(this)}B.controller("GmfSearchController",$p);B.directive("gmfThemeselector",function(){return{restrict:"E",controller:"gmfThemeselectorController",scope:{defaultTheme:"@gmfThemeselectorDefaulttheme",currentTheme:"=gmfThemeselectorCurrenttheme",filter:"=gmfThemeselectorFilter"},bindToController:!0,controllerAs:"tsCtrl",templateUrl:"gmf/themeselector.html"}});
function jq(b,c,d){b.$watch(function(){return this.currentTheme}.bind(this),function(b){if(b){b=b.name;var c=this.a.a.a.split("/");""===c[c.length-1]&&c.splice(c.length-1);kq(c)?c[c.length-1]=b:c.push("theme",b);this.a.a.a=c.join("/")}}.bind(this));this.defaultTheme=this.defaultTheme||"main";this.a=c;this.b=d;lq(this)}sa("gmf.ThemeselectorController",jq);jq.$inject=["$scope","ngeoLocation","gmfThemes"];function kq(b){return 0<=b.indexOf("theme")&&b.indexOf("theme")==b.length-2}
function lq(b){var c=function(b){this.themes=this.filter?b.filter(this.filter):b;var c=this.defaultTheme;b=this.a.a.a.split("/");kq(b)&&(c=b[b.length-1]);b=Ma(this.themes,function(b){return b.name===c});this.Xf(b)}.bind(b);b.b.$b().then(c)}jq.prototype.Xf=function(b){b&&(this.currentTheme=b)};jq.prototype.switchTheme=jq.prototype.Xf;B.controller("gmfThemeselectorController",jq);function mq(b){return function(c){var d=b.navigator,d=d.languages||d.language||d.browserLanguage||d.systemLanguage||d.userLanguage;ea(d)||(d=[d]);d=d.map(function(b){return b.substring(0,2)});d=d.filter(function(b,c,d){return d.indexOf(b)==c});return d.filter(function(b){return-1!=c.indexOf(b)})[0]}}mq.$inject=["$window"];z.factory("ngeoGetBrowserLanguage",mq);function nq(b,c){this.getActive=function(){return b[c]};this.setActive=function(d){b[c]=d}}z.value("ngeoToolActivate",nq);function oq(b){this.a={};this.b=b}oq.$inject=["$rootScope"];
function pq(b,c,d){var e=b.a.mapTools;e||(e=b.a.mapTools=[]);b=b.b.$watch(c.getActive,function(b,d){if(b!==d)if(b)for(var e=this.a.mapTools,k=0;k<e.length;k++)c!=e[k].mc&&e[k].mc.setActive(!1);else{for(var e=this.a.mapTools,k=null,l=!1,n=0;n<e.length;n++)l=l||e[n].mc.getActive(),e[n].Ng&&(k=e[n].mc);l||null===k||k.setActive(!0)}}.bind(b));e.push({mc:c,Ng:d||!1,Qb:b})}oq.prototype.Ij=function(b,c){var d=this.a[b];if(d)for(var e=0;e<d.length;e++)if(d[e].mc==c){d[e].Qb();d.splice(e,1);break}};
oq.prototype.unregisterTool=oq.prototype.Ij;oq.prototype.Hj=function(b){var c=this.a[b];if(c){for(var d=0;d<c.length;d++)c[d].Qb();delete this.a[b]}};oq.prototype.unregisterGroup=oq.prototype.Hj;oq.prototype.Bg=function(b){b.setActive(!0)};oq.prototype.activateTool=oq.prototype.Bg;oq.prototype.Mg=function(b){b.setActive(!1)};oq.prototype.deactivateTool=oq.prototype.Mg;z.service("ngeoToolActivateMgr",oq);function qq(b,c,d){d.get("gmfThemes").mf();this.searchDatasources=[{labelKey:"label",groupValues:d.get("gmfSearchGroups"),groupActions:d.get("gmfSearchActions"),projection:"EPSG:"+(b.srid||21781),url:d.get("fulltextsearchUrl")}];this.rightNavVisible=this.leftNavVisible=!1;this.queryActive=!0;d.get("gmfQueryManager");this.measureLengthActive=this.measurePointActive=!1;this.i=d.get("ngeoGetBrowserLanguage");this.f=d.get("ngeoStateManager");this.c=c;this.g=d.get("defaultLang");this.a=d.get("langUrls");
this.b=d.get("gettextCatalog");rq(this);d.get("ngeoFeatureOverlayMgr").Zd.setMap(this.map);b=d.get("ngeoToolActivateMgr");pq(b,new nq(this,"queryActive"),!0);pq(b,new nq(this,"measurePointActive"),!1);pq(b,new nq(this,"measureLengthActive"),!1)}sa("gmf.AbstractController",qq);qq.$inject=["config","$scope","$injector"];qq.prototype.ad=function(b){this.b.setCurrentLanguage(b);this.b.loadRemote(this.a[b]);this.lang=b};qq.prototype.switchLanguage=qq.prototype.ad;
function rq(b){b.c.$watch(function(){return this.lang}.bind(b),function(b){sp(this.f,{lang:b})}.bind(b));var c=b.i(Object.keys(b.a)),d=b.f.a.lang;void 0!==d&&d in b.a?b.ad(d):void 0!==c&&c in b.a?b.ad(c):b.ad(b.g)}B.controller("AbstractController",qq);B.value("gmfMobileBackgroundlayerselectorTemplateUrl",function(b,c){var d=c.gmfMobileBackgroundlayerselectorTemplateurl;return void 0!==d?d:"gmf/mobilebackgroundlayerselector.html"});function sq(b){return{restrict:"E",scope:{map:"=gmfMobileBackgroundlayerselectorMap",select:"&?gmfMobileBackgroundlayerselectorSelect"},bindToController:!0,controller:"GmfMobileBackgroundlayerselectorController",controllerAs:"ctrl",templateUrl:b}}sq.$inject=["gmfMobileBackgroundlayerselectorTemplateUrl"];
B.directive("gmfMobileBackgroundlayerselector",sq);function tq(b,c,d){this.rd=b;this.a=c;b=function(b){this.bgLayers=b;(b=this.a.We(b))||(b=void 0!==this.bgLayers[1]?this.bgLayers[1]:this.bgLayers[0]);this.Sf(b,!0)}.bind(this);ch(d).then(b);I(this.rd,"change",function(){this.bgLayer=this.rd.get(this.map)},this)}sa("gmf.MobileBackgroundlayerselectorController",tq);tq.$inject=["ngeoBackgroundLayerMgr","gmfPermalink","gmfThemes"];B.controller("GmfMobileBackgroundlayerselectorController",tq);
tq.prototype.Sf=function(b,c){this.bgLayer=b;this.rd.set(this.map,b);!c&&this.select&&this.select()};tq.prototype.setLayer=tq.prototype.Sf;function uq(b){return{restrict:"A",controller:"ngeoBtnGroupController",link:function(c,d,e,f){var g=b(e.ngeoBtnGroupActive).assign;g&&c.$watch(function(){return f.wc.some(function(b){return!0===b(c)})},function(b){g(c,b)})}}}uq.$inject=["$parse"];z.directive("ngeoBtnGroup",uq);function vq(b){this.wc=[];this.a=b}vq.$inject=["$scope"];function wq(b,c){b.wc.forEach(function(b,e){e!=c&&b.assign(this.a,!1)},b)}function xq(b,c){b.wc.push(c);return b.wc.length-1}z.controller("ngeoBtnGroupController",vq);
function yq(b){return{require:["?^ngeoBtnGroup","ngModel"],restrict:"A",link:function(c,d,e,f){var g=f[0],h=f[1],k=-1;e=b(e.ngModel);f=e.assign;void 0===e(c)&&f(c,!1);null!==g&&(k=xq(g,e));d.bind("click",function(){c.$apply(function(){h.$setViewValue(!h.$viewValue);h.$render()})});h.$render=function(){h.$viewValue&&null!==g&&wq(g,k);d.toggleClass("active",h.$viewValue)}}}}yq.$inject=["$parse"];z.directive("ngeoBtn",yq);function zq(b,c,d){db.call(this);this.a=null;this.c=!1;this.j=b;this.i=d;this.b=c||window;this.f=pa(this.g,this)}y(zq,db);zq.prototype.start=function(){Aq(this);this.c=!1;var b=Bq(this),c=Cq(this);b&&!c&&this.b.mozRequestAnimationFrame?(this.a=Eo(this.b,"MozBeforePaint",this.f),this.b.mozRequestAnimationFrame(null),this.c=!0):this.a=b&&c?b.call(this.b,this.f):this.b.setTimeout(gh(this.f),20)};
function Aq(b){if(null!=b.a){var c=Bq(b),d=Cq(b);c&&!d&&b.b.mozRequestAnimationFrame?Lo(b.a):c&&d?d.call(b.b,b.a):b.b.clearTimeout(b.a)}b.a=null}zq.prototype.g=function(){this.c&&this.a&&Lo(this.a);this.a=null;this.j.call(this.i,ra())};zq.prototype.L=function(){Aq(this);zq.U.L.call(this)};function Bq(b){b=b.b;return b.requestAnimationFrame||b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame||b.oRequestAnimationFrame||b.msRequestAnimationFrame||null}
function Cq(b){b=b.b;return b.cancelAnimationFrame||b.cancelRequestAnimationFrame||b.webkitCancelRequestAnimationFrame||b.mozCancelRequestAnimationFrame||b.oCancelRequestAnimationFrame||b.msCancelRequestAnimationFrame||null};function Dq(b){return{restrict:"A",link:function(c,d,e){var f=c.$eval(e.ngeoResizemap);d=e.ngeoResizemapState;var g,h=new zq(function(){f.re();f.gb&&t.cancelAnimationFrame(f.gb);f.Le();1E3>ra()-g&&h.start()},b);c.$watch(d,function(b,c){b!=c&&(g=ra(),Aq(h),h.start())})}}}Dq.$inject=["$window","$animate"];z.directive("ngeoResizemap",Dq);function Eq(b){b=b?b:{};var c=void 0!==b.className?b.className:"ol-scale-line";this.g=document.createElement("DIV");this.g.className=c+"-inner";this.a=document.createElement("DIV");this.a.className=c+" ol-unselectable";this.a.appendChild(this.g);this.o=null;this.l=void 0!==b.minWidth?b.minWidth:64;this.c=!1;this.C=void 0;this.v="";Tl.call(this,{element:this.a,render:b.render?b.render:Fq,target:b.target});I(this,L("units"),this.D,this);this.set("units",b.units||"metric")}y(Eq,Tl);var Gq=[1,2,5];
function Fq(b){(b=b.frameState)?this.o=b.O:this.o=null;Hq(this)}Eq.prototype.D=function(){Hq(this)};
function Hq(b){var c=b.o;if(c){var d=c.projection,e=Te(d),c=d.lb(c.resolution,c.center)*e,e=b.l*c,d="",f=b.get("units");"degrees"==f?(d=Ke.degrees,c/=d,e<d/60?(d="\u2033",c*=3600):e<d?(d="\u2032",c*=60):d="\u00b0"):"imperial"==f?.9144>e?(d="in",c/=.0254):1609.344>e?(d="ft",c/=.3048):(d="mi",c/=1609.344):"nautical"==f?(c/=1852,d="nm"):"metric"==f?1>e?(d="mm",c*=1E3):1E3>e?d="m":(d="km",c/=1E3):"us"==f&&(.9144>e?(d="in",c*=39.37):1609.344>e?(d="ft",c/=.30480061):(d="mi",c/=1609.3472));for(var f=3*Math.floor(Math.log(b.l*
c)/Math.log(10)),g;;){g=Gq[(f%3+3)%3]*Math.pow(10,Math.floor(f/3));e=Math.round(g/c);if(isNaN(e)){Lj(b.a,!1);b.c=!1;return}if(e>=b.l)break;++f}c=g+" "+d;b.v!=c&&(b.g.innerHTML=c,b.v=c);b.C!=e&&(b.g.style.width=e+"px",b.C=e);b.c||(Lj(b.a,!0),b.c=!0)}else b.c&&(Lj(b.a,!1),b.c=!1)};B.constant("isDesktop",!0);function Iq(b,c,d){var e={projection:Oe("epsg:"+(b.srid||21781))};fc(e,b.mapViewConfig||{});this.map=new go({layers:[],view:new Jl(e),controls:b.mapControls||[new Eq,new dm],mb:b.mapInteractions||dn({ae:!1,Ke:!1})});this.toolsActive=!1;$('[data-toggle="tooltip"]').tooltip({container:"body"});qq.call(this,b,c,d)}y(Iq,qq);sa("gmf.AbstractDesktopController",Iq);Iq.$inject=["config","$scope","$injector"];B.controller("AbstractDesktopController",Iq);B.value("gmfUser",{functionalities:null,is_password_changed:null,role_id:null,role_name:null,username:null});function Jq(b,c,d){ib.call(this);this.b=b;this.a=c;this.f=d;b=Df(this.a,"loginuser");this.b.get(b,{withCredentials:!0}).then(this.c.bind(this))}y(Jq,ib);Jq.$inject=["$http","authenticationBaseUrl","gmfUser"];
Jq.prototype.yc=function(b,c,d){var e=Df(this.a,"loginchange");return this.b.post(e,$.param({oldPassword:b,newPassword:c,confirmNewPassword:d}),{headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0})};Jq.prototype.changePassword=Jq.prototype.yc;Jq.prototype.Mc=function(b,c){var d=Df(this.a,"login");return this.b.post(d,$.param({login:b,password:c}),{headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0}).then(this.c.bind(this))};
Jq.prototype.login=Jq.prototype.Mc;Jq.prototype.Nc=function(){var b=Df(this.a,"logout");return this.b.get(b,{withCredentials:!0}).then(this.g.bind(this))};Jq.prototype.logout=Jq.prototype.Nc;Jq.prototype.Yc=function(b){var c=Df(this.a,"loginresetpassword"),d=function(b){return b.data}.bind(this);return this.b.post(c,$.param({login:b}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(d)};Jq.prototype.resetPassword=Jq.prototype.Yc;
Jq.prototype.c=function(b){var c=b.data;if(void 0!==c.username)for(var d in c)this.f[d]=c[d];return b};Jq.prototype.g=function(){for(var b in this.f)this.f[b]=null};B.service("gmfAuthentication",Jq);function Kq(){return{template:'<div class="modal fade" tabindex="-1" role="dialog"><div class="modal-dialog"><div class="modal-content"><ng-transclude></ng-transclude></div></div></div>',restrict:"E",require:"ngModel",transclude:!0,link:function(b,c,d,e){var f=c.children();angular.element(document.body).append(f);e.$render=function(){f.modal(e.$viewValue?"show":"hide")};f.on("shown.bs.modal hidden.bs.modal",function(c){var d=c.type;b.$apply(function(){e.$setViewValue("shown"==d)})})}}}
Kq.$inject=["$parse"];z.directive("ngeoModal",Kq);B.value("gmfAuthenticationTemplateUrl",function(b,c){var d=c.gmfAuthenticationTemplateurl;return void 0!==d?d:"gmf/authentication.html"});function Lq(b){return{scope:{},controller:"GmfAuthenticationController",controllerAs:"authCtrl",templateUrl:b}}Lq.$inject=["gmfAuthenticationTemplateUrl"];B.directive("gmfAuthentication",Lq);
function Mq(b,c,d,e){this.gmfUser=e;this.b=b;this.f=d;this.resetPasswordModalShown=this.changePasswordModalShown=this.changingPassword=!1;this.newPwdConfVal=this.newPwdVal=this.oldPwdVal=this.pwdVal=this.loginVal=this.error=""}Mq.$inject=["gettextCatalog","$scope","gmfAuthentication","gmfUser"];
Mq.prototype.yc=function(){var b=this.oldPwdVal,c=this.newPwdVal,d=this.newPwdConfVal;if(b===c)this.a(this.b.getString("The old and new passwords are the same."));else if(c!==d)this.a(this.b.getString("The passwords don't match."));else{var e=this.b.getString("Could not change password.");this.f.yc(b,c,d).then(function(){this.changePasswordModalShown=!0;this.Qe()}.bind(this),this.a.bind(this,e))}};Mq.prototype.changePassword=Mq.prototype.yc;
Mq.prototype.Mc=function(){var b=this.b.getString("Could not connect.");this.f.Mc(this.loginVal,this.pwdVal).then(this.c.bind(this),this.a.bind(this,b))};Mq.prototype.login=Mq.prototype.Mc;Mq.prototype.Nc=function(){var b=this.b.getString("Could not log out.");this.f.Nc().then(this.c.bind(this),this.a.bind(this,b))};Mq.prototype.logout=Mq.prototype.Nc;
Mq.prototype.Yc=function(){if(this.loginVal){var b=this.b.getString("An error occured while reseting the password."),c=function(){this.resetPasswordModalShown=!0;this.c()}.bind(this);this.f.Yc(this.loginVal).then(c,this.a.bind(this,b))}else this.a(this.b.getString("Please, input a login..."))};Mq.prototype.resetPassword=Mq.prototype.Yc;Mq.prototype.Qe=function(){this.c();this.changingPassword=!1;this.newPwdConfVal=this.newPwdVal=this.oldPwdVal=""};Mq.prototype.changePasswordReset=Mq.prototype.Qe;
Mq.prototype.a=function(b){this.error=b};Mq.prototype.c=function(){this.a("")};B.controller("GmfAuthenticationController",Mq);if("function"==typeof proj4){var Nq=[42E4,3E4,9E5,35E4];proj4.defs("epsg:21781","+proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +k_0=1 +x_0=600000 +y_0=200000 +ellps=bessel +towgs84=674.4,15.1,405.3,0,0,0,0 +units=m +no_defs");proj4.defs("EPSG:21781","+proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +k_0=1 +x_0=600000 +y_0=200000 +ellps=bessel +towgs84=674.4,15.1,405.3,0,0,0,0 +units=m +no_defs");Ue(Oe("epsg:21781"),Nq);Ue(Oe("EPSG:21781"),Nq)};ta.constant("authenticationBaseUrl","https://geomapfish-demo.camptocamp.net/2.0/wsgi");ta.constant("ngeoQueryOptions",{limit:20});function Oq(b,c){Iq.call(this,{srid:21781,mapViewConfig:{center:[632464,185457],Ga:3,zoom:3}},b,c)}y(Oq,Iq);sa("app.DesktopController",Oq);Oq.$inject=["$scope","$injector"];ta.controller("DesktopController",Oq);z.value("gmfMobiledisplayqueriesTemplateUrl",function(b,c){var d=c.gmfMobiledisplayqueriesTemplateurl;return void 0!==d?d:"gmf/mobiledisplayqueries.html"});function Pq(b){return{bindToController:!0,controller:"GmfMobiledisplayqueriesController",controllerAs:"ctrl",templateUrl:b,replace:!0,restrict:"E",scope:{featuresStyleFn:"&gmfMobiledisplayqueriesFeaturesstyle",selectedFeatureStyleFn:"&gmfMobiledisplayqueriesSelectedfeaturestyle"}}}Pq.$inject=["gmfMobiledisplayqueriesTemplateUrl"];
B.directive("gmfMobiledisplayqueries",Pq);
function Qq(b,c,d){this.c=b;this.b=c;this.a=new pb;b=xj(d);var e=this.featuresStyleFn();void 0!==e&&Aj(b,e);zj(b,this.a);this.f=xj(d);d=this.selectedFeatureStyleFn();void 0===d&&(d=new Gh({color:[255,0,0,.6]}),b=new Nh({color:[255,0,0,1],width:2}),d=new Qh({fill:d,image:new Ph({fill:d,radius:5,stroke:b}),stroke:b}));Aj(this.f,d);this.feature=this.source=null;this.currentResult=-1;this.isNext=!0;this.animate=0;this.open=!1;this.c.$watchCollection(function(){return c},function(b,c){0<b.total?this.show():
c!==b&&this.close()}.bind(this))}sa("gmf.MobiledisplayqueriesController",Qq);Qq.$inject=["$scope","ngeoQueryResult","ngeoFeatureOverlayMgr"];Qq.prototype.show=function(){this.clear();Rq(this,0,!1);if(null!==this.source){var b,c,d,e=this.b.$c;this.a.clear();for(b=0;b<e.length;b++)for(d=e[b].features,c=0;c<d.length;c++)this.a.push(d[c]);Sq(this);this.open=!0}};Qq.prototype.show=Qq.prototype.show;
function Rq(b,c,d){var e=!1;if(c!==b.currentResult){var f,g,h,k=b.feature,l=b.b.$c;b.currentResult=c;for(f=0;f<l.length;f++)if(g=l[f],h=g.features,c>=h.length)c-=h.length;else{b.source=g;b.feature=g.features[c];e=!0;break}d&&Sq(b,k)}return e}Qq.prototype.previous=function(){var b=this.currentResult-1;0>b&&(b=this.b.total-1);Rq(this,b,!0)&&Tq(this,!1)};Qq.prototype.previous=Qq.prototype.previous;
Qq.prototype.next=function(){var b=this.currentResult+1;b>this.b.total-1&&(b=0);Rq(this,b,!0)&&Tq(this,!0)};Qq.prototype.next=Qq.prototype.next;Qq.prototype.ah=function(){return this.b.total};Qq.prototype.getResultLength=Qq.prototype.ah;Qq.prototype.Wg=function(){return null!=this.feature?Ua({},this.feature.u):null};Qq.prototype.getFeatureValues=Qq.prototype.Wg;function Tq(b,c){b.isNext=c;b.c.$evalAsync(function(){this.animate++}.bind(b))}
function Sq(b,c){b.f.clear();b.a.remove(b.feature);b.f.ia(b.feature);void 0!==c&&b.a.push(c)}Qq.prototype.close=function(){this.open=!1;this.clear()};Qq.prototype.close=Qq.prototype.close;Qq.prototype.clear=function(){this.source=this.feature=null;this.currentResult=-1;this.a.clear();this.f.clear()};Qq.prototype.clear=Qq.prototype.clear;B.controller("GmfMobiledisplayqueriesController",Qq);z.value("ngeoDecorateInteraction",function(b){Object.defineProperty(b,"active",{get:function(){return b.getActive()},set:function(c){b.setActive(c)}})});function Uq(b,c,d){hi.call(this);Vq(this,b,c?c:0,d)}y(Uq,hi);Uq.prototype.clone=function(){var b=new Uq(null),c=this.s.slice();ji(b,this.layout,c);b.b();return b};Uq.prototype.zc=function(b){var c=this.s,d=c[this.a]-c[0];return Kb(c[0]-d,c[1]-d,c[0]+d,c[1]+d,b)};Uq.prototype.aa=function(){return"Circle"};function Vq(b,c,d,e){if(c){ki(b,e,c,0);b.s||(b.s=[]);e=b.s;c=li(e,c);e[c++]=e[0]+d;var f;d=1;for(f=b.a;d<f;++d)e[c++]=e[d];e.length=c}else ji(b,"XY",null);b.b()};function Wq(b,c){Sa.call(this,b);this.feature=c}y(Wq,Sa);
function Xq(b){sm.call(this,{$a:Yq,handleEvent:Zq,ab:$q});this.qa=null;this.I=!1;this.Na=b.source?b.source:null;this.Ea=b.features?b.features:null;this.og=b.tj?b.tj:12;this.P=b.type;this.c=ar(this.P);this.Ma=b.minPoints?b.minPoints:this.c===br?3:2;this.sa=b.ei?b.ei:Infinity;var c=b.nk;if(!c)if("Circle"===this.P)c=function(b,c){var d=c?c:new Uq([NaN,NaN]),h=b[0],k=b[1],l=h[0]-k[0],h=h[1]-k[1];Vq(d,b[0],Math.sqrt(l*l+h*h));return d};else{var d,c=this.c;c===cr?d=Ci:c===dr?d=ui:c===br&&(d=Ji);c=function(b,
c){var g=c;g?g.Z(b):g=new d(b);return g}}this.C=c;this.D=this.v=this.a=this.o=this.j=this.l=null;this.ng=b.Te?b.Te*b.Te:36;this.ha=new cj({source:new nj({nc:!1,wrapX:b.wrapX?b.wrapX:!1}),style:b.style?b.style:er()});this.La=b.Ug;this.gd=b.ta?b.ta:om;this.ra=b.Tg?b.Tg:pm;I(this,L("active"),this.tf,this)}y(Xq,sm);function er(){var b=Wh();return function(c){return b[c.J().aa()]}}m=Xq.prototype;m.setMap=function(b){Xq.U.setMap.call(this,b);this.tf()};
function Zq(b){var c=!this.I;this.I&&b.type===dl?(fr(this,b),c=!1):b.type===cl?c=gr(this,b):b.type===Xk&&(c=!1);return tm.call(this,b)&&c}function Yq(b){if(this.gd(b))return this.qa=b.pixel,!0;if(this.c!==dr&&this.c!==br||!this.ra(b))return!1;this.qa=b.pixel;this.I=!0;this.l||hr(this,b);return!0}
function $q(b){this.I=!1;var c=this.qa,d=b.pixel,e=c[0]-d[0],c=c[1]-d[1],d=!0;e*e+c*c<=this.ng&&(gr(this,b),this.l?this.c===ir?this.kb():jr(this,b)?this.kb():fr(this,b):(hr(this,b),this.c===cr&&this.kb()),d=!1);return d}
function gr(b,c){if(b.l){var d=c.coordinate,e=b.j.J(),f;b.c===cr?f=b.a:b.c===br?(f=b.a[0],f=f[f.length-1],jr(b,c)&&(d=b.l.slice())):(f=b.a,f=f[f.length-1]);f[0]=d[0];f[1]=d[1];b.C(b.a,e);b.o&&b.o.J().Z(d);e instanceof Ji&&b.c!==br?(b.v||(b.v=new Xh(new ui(null))),0>=e.c.length?d=null:(d=new wi(null),xi(d,e.layout,e.s.slice(0,e.c[0]))),e=b.v.J(),e.K(d.layout,d.s)):b.D&&(e=b.v.J(),e.Z(b.D));kr(b)}else e=c.coordinate.slice(),b.o?b.o.J().Z(e):(b.o=new Xh(new Ci(e)),kr(b));return!0}
function jr(b,c){var d=!1;if(b.j){var e=!1,f=[b.l];b.c===dr?e=b.a.length>b.Ma:b.c===br&&(e=b.a[0].length>b.Ma,f=[b.a[0][0],b.a[0][b.a[0].length-2]]);if(e)for(var e=c.map,g=0,h=f.length;g<h;g++){var k=f[g],l=zm(e,k),n=c.pixel,d=n[0]-l[0],l=n[1]-l[1],n=b.I&&b.ra(c)?1:b.og;if(d=Math.sqrt(d*d+l*l)<=n){b.l=k;break}}}return d}
function hr(b,c){var d=c.coordinate;b.l=d;b.c===cr?b.a=d.slice():b.c===br?(b.a=[[d.slice(),d.slice()]],b.D=b.a[0]):(b.a=[d.slice(),d.slice()],b.c===ir&&(b.D=b.a));b.D&&(b.v=new Xh(new ui(b.D)));d=b.C(b.a);b.j=new Xh;b.La&&Zh(b.j,b.La);Yh(b.j,d);kr(b);b.B(new Wq("drawstart",b.j))}
function fr(b,c){var d=c.coordinate,e=b.j.J(),f,g;if(b.c===dr)b.l=d.slice(),g=b.a,g.push(d.slice()),f=g.length>b.sa,b.C(g,e);else if(b.c===br){g=b.a[0];g.push(d.slice());if(f=g.length>b.sa)b.l=g[0];b.C(b.a,e)}kr(b);f&&b.kb()}
m.kb=function(){var b=lr(this),c=this.a,d=b.J();this.c===dr?(c.pop(),this.C(c,d)):this.c===br&&(c[0].pop(),c[0].push(c[0][0]),this.C(c,d));"MultiPoint"===this.P?Yh(b,new Di([c])):"MultiLineString"===this.P?Yh(b,new yi([c])):"MultiPolygon"===this.P&&Yh(b,new Mi([c]));this.B(new Wq("drawend",b));this.Ea&&this.Ea.push(b);this.Na&&this.Na.ia(b)};function lr(b){b.l=null;var c=b.j;c&&(b.j=null,b.o=null,b.v=null,b.ha.N().clear(!0));return c}
m.extend=function(b){var c=b.J();this.j=b;this.a=c.ja();b=this.a[this.a.length-1];this.l=b.slice();this.a.push(b.slice());kr(this);this.B(new Wq("drawstart",this.j))};m.sb=eh;function kr(b){var c=[];b.j&&c.push(b.j);b.v&&c.push(b.v);b.o&&c.push(b.o);b=b.ha.N();b.clear(!0);fj(b,c)}m.tf=function(){var b=this.g,c=this.getActive();b&&c||lr(this);this.ha.setMap(c?b:null)};
function ar(b){var c;"Point"===b||"MultiPoint"===b?c=cr:"LineString"===b||"MultiLineString"===b?c=dr:"Polygon"===b||"MultiPolygon"===b?c=br:"Circle"===b&&(c=ir);return c}var cr="Point",dr="LineString",br="Polygon",ir="Circle";function mr(b,c){Sa.call(this,b);this.feature=c}y(mr,Sa);
function nr(b){b=void 0!==b?b:{};gm.call(this,{handleEvent:or});this.continueMsg=this.i=this.nb=this.Ka=this.j=this.c=null;this.decimals=void 0!==b.decimals?b.decimals:null;this.v=void 0!==b.Bd?b.Bd:!0;this.startMsg=void 0!==b.startMsg?b.startMsg:Fc("SPAN",{},"Click to start drawing.");this.A=null;var c=void 0!==b.style?b.style:[new Qh({fill:new Gh({color:"rgba(255, 255, 255, 0.2)"})}),new Qh({stroke:new Nh({color:"white",width:5})}),new Qh({stroke:new Nh({color:"#ffcc33",width:3})})];this.l=new cj({source:new nj,
style:c});this.a=this.o(b.sketchStyle,this.l.N());this.C=!0;I(this.a,L("active"),this.qh,this);I(this.a,"drawstart",this.Ki,this);I(this.a,"drawend",this.Ji,this);I(this,L("active"),this.ti,this)}y(nr,gm);function or(b){if(b.type!=cl||b.dragging)return!0;var c=this.startMsg;null!==this.i&&(c=this.continueMsg);this.v&&(Ic(this.c),this.c.appendChild(c),this.j.setPosition(b.coordinate));return!0}nr.prototype.Vg=function(){return this.a};nr.prototype.getDrawInteraction=nr.prototype.Vg;m=nr.prototype;
m.setMap=function(b){nr.U.setMap.call(this,b);this.l.setMap(b);var c=this.a.g;null!==c&&c.i.remove(this.a);null!==b&&b.i.push(this.a)};m.Ki=function(b){this.i=b.feature;this.l.N().clear(!0);pr(this);b=this.i.J();this.A=I(b,"change",function(){this.gf(function(b,d){null!==d&&(this.Ka.innerHTML=b,this.nb.setPosition(d))}.bind(this))},this)};m.Ji=function(){gk(this.Ka,"tooltip-static");this.nb.set("offset",[0,-7]);this.B(new mr("measureend",this.i));this.i=null;null!==this.A&&G(this.A)};
function qr(b){b.v&&(b.g.c.remove(b.j),null!==b.c&&b.c.parentNode.removeChild(b.c),b.c=null,b.j=null)}function pr(b){rr(b);b.Ka=Fc("DIV");hk(b.Ka,["tooltip","tooltip-measure"]);b.nb=new jo({element:b.Ka,offset:[0,-15],be:"bottom-center",Vf:!1});b.g.c.push(b.nb)}function rr(b){null!==b.Ka&&(b.Ka.parentNode.removeChild(b.Ka),b.Ka=null,b.nb=null)}
m.ti=function(){var b=this.getActive();this.C=!1;this.a.setActive(b);this.C=!0;this.g&&(b?this.nb||(pr(this),qr(this),this.v&&(this.c=Fc("DIV"),gk(this.c,"tooltip"),this.j=new jo({element:this.c,offset:[15,0],be:"center-left"}),this.g.c.push(this.j))):(this.l.N().clear(!0),this.g.c.remove(this.nb),rr(this),qr(this)))};m.qh=function(){this.C&&this.setActive(this.a.getActive())};function sr(b){b=void 0!==b?b:{};nr.call(this,b);this.continueMsg=void 0!==b.continueMsg?b.continueMsg:Fc("SPAN",{},"Click to continue drawing the line.",Fc("BR"),"Double-click or click last point to finish.")}y(sr,nr);sr.prototype.o=function(b,c){return new Xq({type:"LineString",source:c,style:b})};
sr.prototype.gf=function(b){var c=this.i.J(),d;d=U(this.g).Y();for(var e=this.decimals,f=0,g=c.ja(),h=0,k=g.length-1;h<k;++h)var l=df(g[h],d,"EPSG:4326"),n=df(g[h+1],d,"EPSG:4326"),f=f+Ie(mn,l,n);var q;1E3<f?(null!==e?q=Ga(f/1E3,0,e):q=parseFloat((f/1E3).toPrecision(3)),q+=" km"):(null!==e?q=Ga(f,0,e):q=parseFloat(f.toPrecision(3)),q+=" m");d=q;c=c.s.slice(c.s.length-c.a);b(d,c)};function tr(b){gm.call(this,{handleEvent:fh});this.l=null;this.i=b.type;this.C=b.minPoints?b.minPoints:"Polygon"===this.i?3:2;this.a=null;this.j=[];this.c=null;this.o=new cj({source:new nj({nc:!1,wrapX:b.wrapX?b.wrapX:!1}),style:b.style?b.style:er(),dd:!0,ed:!0});I(this,L("active"),this.v,this);this.set("dirty",!1);this.set("drawing",!1);this.set("valid",!1)}y(tr,gm);sa("ngeo.interaction.MobileDraw",tr);
tr.prototype.setMap=function(b){this.g&&this.l&&G(this.l);tr.U.setMap.call(this,b);b&&(this.l=I(U(b),L("center"),this.A,this));this.v()};tr.prototype.Dc=function(){return this.get("dirty")};tr.prototype.getDirty=tr.prototype.Dc;tr.prototype.Zb=function(){return this.get("drawing")};tr.prototype.getDrawing=tr.prototype.Zb;tr.prototype.Rd=function(){return this.get("valid")};tr.prototype.getValid=tr.prototype.Rd;tr.prototype.getFeature=function(){return this.a};tr.prototype.getFeature=tr.prototype.getFeature;
tr.prototype.Rb=function(){var b=this.getActive(),c=this.Zb();if(b&&c){var c=this.c.J().ja(),d;"Point"===this.i?(this.a||(this.a=new Xh(new Ci(c)),this.B(new Wq("drawstart",this.a))),b=this.a.J(),b.Z(c)):("LineString"===this.i&&(this.j.push(this.c),this.a?(b=this.a.J(),d=b.ja(),d.push(c.slice()),b.Z(d)):(d=[c.slice(),c.slice()],this.a=new Xh(new ui(d)),this.B(new Wq("drawstart",this.a)))),this.Dc()&&this.set("dirty",!1),b=this.Rd(),"LineString"===this.i&&(d.length>=this.C?b||this.set("valid",!0):
b&&this.set("valid",!1)),this.c=null,ur(this))}};tr.prototype.addToDrawing=tr.prototype.Rb;tr.prototype.Re=function(){this.setActive(!1);this.setActive(!0)};tr.prototype.clearDrawing=tr.prototype.Re;tr.prototype.kb=function(){var b=this.getActive(),c=this.Zb();b&&c&&(this.c&&this.Rb(),this.set("drawing",!1),this.B(new Wq("drawend",this.a)))};tr.prototype.finishDrawing=tr.prototype.kb;
tr.prototype.v=function(){var b=this.g,c=this.getActive();if(b&&c)this.set("drawing",!0),vr(this),ur(this),"Point"===this.i&&this.Rb();else{if(this.a||0<this.j.length)this.c=this.a=null,this.o.N().clear(!0);this.j=[];this.set("dirty",!1);this.set("drawing",!1);this.set("valid",!1)}this.o.setMap(c?b:null)};
tr.prototype.A=function(){var b=this.getActive(),c=this.Zb();if(b&&c)if(vr(this),"Point"===this.i)this.Rb();else{if(this.a){b=Kl(U(this.g));if("LineString"===this.i){var c=this.a.J(),d=c.ja();d.pop();d.push(b);c.Z(d)}this.Dc()||this.set("dirty",!0)}ur(this)}};function vr(b){var c=Kl(U(b.g));b.c?b.c.J().Z(c):b.c=new Xh(new Ci(c))}function ur(b){var c=[];b.a&&c.push(b.a);b.c&&c.push(b.c);var d=b.o.N();d.clear(!0);fj(d,c);fj(d,b.j)};function wr(b){b=void 0!==b?b:{};fc(b,{Bd:!1});sr.call(this,b)}y(wr,sr);sa("ngeo.interaction.MeasureLengthMobile",wr);wr.prototype.o=function(b,c){return new tr({type:"LineString",style:b,source:c})};B.value("gmfMobileMeasureLengthTemplateUrl",function(b,c){var d=c.gmfMobileMeasureLengthTemplateurl;return void 0!==d?d:"gmf/mobilemeasurelength.html"});function xr(b){return{restrict:"A",scope:{active:"=gmfMobileMeasureLengthActive",decimals:"<?gmfMobileMeasureLengthDecimals",map:"=gmfMobileMeasureLengthMap",sketchStyle:"=?gmfMobileMeasureLengthSketchStyle"},controller:"GmfMobileMeasureLengthController",controllerAs:"ctrl",bindToController:!0,templateUrl:b}}xr.$inject=["gmfMobileMeasureLengthTemplateUrl"];
B.directive("gmfMobileMeasureLength",xr);
function yr(b,c){b.$watch(function(){return this.active}.bind(this),function(b){this.measure.setActive(b)}.bind(this));void 0===this.sketchStyle&&(this.sketchStyle=new Qh({fill:new Gh({color:"rgba(255, 255, 255, 0.2)"}),stroke:new Nh({color:"rgba(0, 0, 0, 0.5)",H:[10,10],width:2}),image:new tp({stroke:new Nh({color:"rgba(0, 0, 0, 0.7)",width:2}),points:4,radius:8,gc:0,angle:0})}));this.measure=new wr({decimals:this.decimals,sketchStyle:this.sketchStyle});this.measure.setActive(this.active);c(this.measure);
this.map.i.push(this.measure);var d=this.drawInteraction=this.measure.a;c(d);Object.defineProperty(this,"hasPoints",{get:function(){return null!==this.drawInteraction.getFeature()}});this.dirty=!1;I(d,L("dirty"),function(){(this.dirty=d.Dc())&&b.$apply()},this);this.drawing=!1;I(d,L("drawing"),function(){this.drawing=d.Zb()},this);this.valid=!1;I(d,L("valid"),function(){this.valid=d.Rd()},this)}yr.$inject=["$scope","ngeoDecorateInteraction"];yr.prototype.Cg=function(){this.drawInteraction.Rb()};
yr.prototype.addPoint=yr.prototype.Cg;yr.prototype.clear=function(){this.drawInteraction.Re()};yr.prototype.clear=yr.prototype.clear;yr.prototype.finish=function(){this.drawInteraction.kb()};yr.prototype.finish=yr.prototype.finish;yr.prototype.Ad=function(){this.active=!1};yr.prototype.deactivate=yr.prototype.Ad;B.controller("GmfMobileMeasureLengthController",yr);function zr(b,c){this.a=b;this.b=c}zr.$inject=["$http","gmfAltitudeUrl"];zr.prototype.Jd=function(b){var c={};c.lon=b[0];c.lat=b[1];return this.a.get(this.b,{params:c,withCredentials:!0}).then(this.f.bind(this))};zr.prototype.getAltitude=zr.prototype.Jd;zr.prototype.f=function(b){return b.data};B.service("gmfAltitude",zr);function Ar(b){b=void 0!==b?b:{};fc(b,{Bd:!1});nr.call(this,b)}y(Ar,nr);sa("ngeo.interaction.MeasurePointMobile",Ar);Ar.prototype.o=function(b,c){return new tr({type:"Point",style:b,source:c})};Ar.prototype.gf=function(b){var c=this.i.J();U(this.g).Y();var d;d=this.decimals;var e=c.ja(),f=e[0],e=e[1];d=null!==d?d:0;f=Ga(f,0,d);e=Ga(e,0,d);d=["X: ",f,", Y: ",e].join("");c=c.s.slice(c.s.length-c.a);b(d,c)};B.value("gmfMobileMeasurePointTemplateUrl",function(b,c){var d=c.gmfMobileMeasurePointTemplateurl;return void 0!==d?d:"gmf/mobilemeasurepoint.html"});function Br(b){return{restrict:"A",scope:{active:"=gmfMobileMeasurePointActive",decimals:"<?gmfMobileMeasurePointDecimals",map:"=gmfMobileMeasurePointMap",sketchStyle:"=?gmfMobileMeasurePointSketchStyle"},controller:"GmfMobileMeasurePointController",controllerAs:"ctrl",bindToController:!0,templateUrl:b}}Br.$inject=["gmfMobileMeasurePointTemplateUrl"];
B.directive("gmfMobileMeasurePoint",Br);
function Cr(b,c,d,e,f){this.f=d;this.g=e;this.c=b;c.$watch(function(){return this.active}.bind(this),function(b){this.measure.setActive(b);this.measure.getActive()?(b=U(this.map),this.a=I(b,"propertychange",this.g(this.b.bind(this),300,!0),this),this.b()):this.a&&(G(this.a),this.a=null)}.bind(this));void 0===this.sketchStyle&&(this.sketchStyle=new Qh({fill:new Gh({color:"rgba(255, 255, 255, 0.2)"}),stroke:new Nh({color:"rgba(0, 0, 0, 0.5)",H:[10,10],width:2}),image:new tp({stroke:new Nh({color:"rgba(0, 0, 0, 0.7)",
width:2}),points:4,radius:8,gc:0,angle:0})}));this.measure=new Ar({decimals:this.decimals,sketchStyle:this.sketchStyle});this.measure.setActive(this.active);f(this.measure);this.map.i.push(this.measure);this.drawInteraction=this.measure.a;f(this.drawInteraction);this.a=null}Cr.$inject=["gettextCatalog","$scope","gmfAltitude","ngeoDebounce","ngeoDecorateInteraction"];Cr.prototype.Ad=function(){this.active=!1};Cr.prototype.deactivate=Cr.prototype.Ad;Cr.prototype.translate=function(b){return this.c.getString(b)};
Cr.prototype.translate=Cr.prototype.translate;
Cr.prototype.b=function(){var b=Kl(U(this.map));this.f.Jd(b).then(function(b){var d=this.measure.Ka,e=document.createElement("div");e.className="gmf-mobile-measure-point-altitude";ac(b,function(b,c){if(null!==b){var d=document.createElement("div");d.className="gmf-mobile-measure-altitude";var k;k=1E3<b?parseFloat((b/1E3).toPrecision(3))+" km":parseFloat(b.toPrecision(3))+" m";d.innerHTML=[this.translate(c),": ",k].join("");e.appendChild(d)}},this);(b=Bc("gmf-mobile-measure-point-altitude",d))&&b.remove();
d.appendChild(e)}.bind(this))};B.controller("GmfMobileMeasurePointController",Cr);B.directive("gmfMobileNav",function(){return{restrict:"A",controller:"gmfMobileNavController",bindToController:!0,controllerAs:"navCtrl",scope:!0,link:function(b,c,d,e){Dr(e,c)}}});function Er(){this.f=[];this.c=this.b=this.a=null;this.back=this.g.bind(this)}sa("gmf.MobileNavController",Er);B.controller("gmfMobileNavController",Er);
function Dr(b,c){b.a=$(c.find(".active.slide"));b.b=$(c.find("> header"));b.c=$(c.find("header > .go-back"));c.find("[data-toggle=slide-in]").on("click",function(b){var c=$(b.target).parents(".slide");this.f.push(c);c.addClass("slide-out").removeClass("active");b=$($(b.target).attr("data-target"));b.addClass("active");Fr(this,b,!1);this.a=b}.bind(b));b.c.click(b.back.bind(b))}
function Fr(b,c,d){b.b.toggleClass("back",d);b.b.find("nav:not(.active)").remove();b.b.find("nav.active").removeClass("active").addClass("slide-out");b.c.toggleClass("active",0<b.f.length);var e=$("<nav>");e.append($("<span>",{text:c.attr("data-header-title")}));b.b.append(e);window.setTimeout(function(){e.css("display","none");e.offset();e.css("display","");window.setTimeout(function(){e.position();e.addClass("active")},0)},0)}B.controller("gmfMobileNavController",Er);
Er.prototype.g=function(){if(!(0>=this.f.length)){this.a.removeClass("active");var b=this.f.pop();b.addClass("active").removeClass("slide-out");Fr(this,b,!0);this.a=b}};B.directive("gmfMobileNavBack",function(){return{require:"^^gmfMobileNav",restrict:"A",scope:!1,link:function(b,c,d,e){b.$watch(d.gmfMobileNavBack,function(){null!==e.a&&e.a.is(c[0])&&e.g()})}}});function Gr(b){return{restrict:"A",scope:!1,link:function(c,d,e){function f(c){b.kf(g,c.coordinate)}var g=c.$eval(e.ngeoMobileQueryMap),h=null;c.$watch(e.ngeoMobileQueryActive,function(c){c?h=I(g,"click",f):(null!==h&&(G(h),h=null),b.clear())})}}}Gr.$inject=["ngeoQuery"];z.directive("ngeoMobileQuery",Gr);B.constant("isMobile",!0);B.constant("gmfAltitudeUrl","https://geomapfish-demo.camptocamp.net/2.0/wsgi/raster");
function Hr(b,c,d){this.rightNavVisible=this.leftNavVisible=!1;var e=b.positionFeatureStyle||new Qh({image:new Ph({radius:6,fill:new Gh({color:"rgba(230, 100, 100, 1)"}),stroke:new Nh({color:"rgba(230, 40, 40, 1)",width:2})})}),f=b.accuracyFeatureStyle||new Qh({fill:new Gh({color:"rgba(100, 100, 230, 0.3)"}),stroke:new Nh({color:"rgba(40, 40, 230, 1)",width:2})}),g=new Gh({color:[255,170,0,.6]}),h=new Nh({color:[255,170,0,1],width:2});this.queryFeatureStyle=new Qh({fill:g,image:new Ph({fill:g,radius:5,
stroke:h}),stroke:h});this.mobileGeolocationOptions={positionFeatureStyle:e,accuracyFeatureStyle:f,zoom:b.geolocationZoom||9};e={projection:Oe("epsg:"+(b.srid||21781))};fc(e,b.mapViewConfig||{});this.map=new go({layers:[],view:new Jl(e),controls:b.mapControls||[new Eq,new dm],mb:b.mapInteractions||dn({ae:!1})});c.$on(Ir,function(b){b.stopPropagation();alert("Geo-location failed")}.bind(this));qq.call(this,b,c,d)}y(Hr,qq);sa("gmf.AbstractMobileController",Hr);Hr.$inject=["config","$scope","$injector"];
Hr.prototype.zj=function(){this.leftNavVisible=!this.leftNavVisible};Hr.prototype.toggleLeftNavVisibility=Hr.prototype.zj;Hr.prototype.Aj=function(){this.rightNavVisible=!this.rightNavVisible};Hr.prototype.toggleRightNavVisibility=Hr.prototype.Aj;Hr.prototype.Nh=function(){this.leftNavVisible=this.rightNavVisible=!1};Hr.prototype.hideNav=Hr.prototype.Nh;Hr.prototype.pi=function(){return this.leftNavVisible||this.rightNavVisible};Hr.prototype.navIsVisible=Hr.prototype.pi;Hr.prototype.Zh=function(){return this.leftNavVisible};
Hr.prototype.leftNavIsVisible=Hr.prototype.Zh;Hr.prototype.pj=function(){return this.rightNavVisible};Hr.prototype.rightNavIsVisible=Hr.prototype.pj;B.controller("AbstractMobileController",Hr);function Jr(b){Object.defineProperty(b,"tracking",{get:function(){return b.get("tracking")},set:function(c){Kr(b,c)}})}Jr.$inject=["geolocation"];z.value("ngeoDecorateGeolocation",Jr);function Lr(b){mb.call(this);b=b||{};this.a=null;this.g=cf;this.c=void 0;I(this,L("projection"),this.vi,this);I(this,L("tracking"),this.wi,this);if(void 0!==b.projection){var c=Oe(b.projection);this.set("projection",c)}void 0!==b.Gj&&this.set("trackingOptions",b.Gj);Kr(this,void 0!==b.Fj?b.Fj:!1)}y(Lr,mb);m=Lr.prototype;m.L=function(){Kr(this,!1);Lr.U.L.call(this)};m.vi=function(){var b=this.Y();b&&(this.g=Ve(Oe("EPSG:4326"),b),this.a&&this.set("position",this.g(this.a)))};
m.wi=function(){if(yh){var b=this.get("tracking");b&&void 0===this.c?this.c=t.navigator.geolocation.watchPosition(this.Xi.bind(this),this.Yi.bind(this),this.get("trackingOptions")):b||void 0===this.c||(t.navigator.geolocation.clearWatch(this.c),this.c=void 0)}};
m.Xi=function(b){var c=b.coords;this.set("accuracy",c.accuracy);this.set("altitude",null===c.altitude?void 0:c.altitude);this.set("altitudeAccuracy",null===c.altitudeAccuracy?void 0:c.altitudeAccuracy);this.set("heading",null===c.heading?void 0:c.heading*Math.PI/180);this.a?(this.a[0]=c.longitude,this.a[1]=c.latitude):this.a=[c.longitude,c.latitude];b=this.g(this.a);this.set("position",b);this.set("speed",null===c.speed?void 0:c.speed);b=this.a;var d=c.accuracy,c=[],e;for(e=0;32>e;++e)Tc(c,mn.offset(b,
d,2*Math.PI*e/32));c.push(c[0],c[1]);b=new Ji(null);b.K("XY",c,[c.length]);b.uc(this.g);this.set("accuracyGeometry",b);this.b()};m.Yi=function(b){b.type="error";Kr(this,!1);this.B(b)};m.Jd=function(){return this.get("altitude")};m.Y=function(){return this.get("projection")};function Kr(b,c){b.set("tracking",c)};var Ir="mobile-geolocation-error";sa("ngeo.MobileGeolocationEventType",{ERROR:Ir});z.directive("ngeoMobileGeolocation",function(){return{restrict:"A",scope:{getMobileMapFn:"&ngeoMobileGeolocationMap",getMobileGeolocationOptionsFn:"&ngeoMobileGeolocationOptions"},controller:"NgeoMobileGeolocationController",controllerAs:"ctrl"}});
function Mr(b,c,d,e){c.on("click",this.Yf.bind(this));c=b.getMobileMapFn();this.u=b;this.f=c;var f=b.getMobileGeolocationOptionsFn()||{};this.b=xj(e);this.da=new Lr({projection:U(c).Y()});this.da.on("error",function(c){Nr(this);b.$emit(Ir,c)},this);this.c=new Xh;f.positionFeatureStyle&&$h(this.c,f.positionFeatureStyle);this.fb=new Xh;f.accuracyFeatureStyle&&$h(this.fb,f.accuracyFeatureStyle);this.j=f.zoom;this.i=this.a=!1;I(this.da,L("accuracyGeometry"),function(){Yh(this.fb,this.da.get("accuracyGeometry")||
null)},this);I(this.da,L("position"),function(b){this.me(b)},this);e=U(c);I(e,L("center"),this.g,this);I(e,L("resolution"),this.g,this);I(e,L("rotation"),this.g,this);d(this.da)}sa("ngeo.MobileGeolocationController",Mr);Mr.$inject=["$scope","$element","ngeoDecorateGeolocation","ngeoFeatureOverlayMgr"];
Mr.prototype.Yf=function(){if(this.da.get("tracking")){var b=this.da.get("position");if(void 0===b)Nr(this),this.u.$emit(Ir,null);else{var c=Kl(U(this.f));b[0]===c[0]&&b[1]===c[1]?Nr(this):(Nr(this),Or(this))}}else Or(this)};Mr.prototype.toggleTracking=Mr.prototype.Yf;function Or(b){b.b.ia(b.c);b.b.ia(b.fb);b.a=!0;Kr(b.da,!0)}function Nr(b){b.b.clear();b.a=!1;Kr(b.da,!1)}
Mr.prototype.me=function(){var b=this.da.get("position"),c=new Ci(b);Yh(this.c,c);this.a&&(this.i=!0,Pl(U(this.f),b),void 0!==this.j&&Sl(U(this.f),this.j),this.i=!1)};Mr.prototype.g=function(){this.a&&!this.i&&(this.a=!1)};z.controller("NgeoMobileGeolocationController",Mr);ta.constant("ngeoQueryOptions",{limit:20});function Pr(b,c){Hr.call(this,{srid:21781,mapViewConfig:{center:[632464,185457],Ga:3,zoom:3}},b,c)}y(Pr,Hr);sa("app.MobileController",Pr);Pr.$inject=["$scope","$injector"];ta.controller("MobileController",Pr);function Qr(b,c){var d=c.exportgpxkml;return function(c,f,g){f=$("<input>").attr({type:"hidden",name:"format",value:f});g=$("<input>").attr({type:"hidden",name:"name",value:g});c=$("<input>").attr({type:"hidden",name:"doc",value:c});var h=$("<form>").attr({method:"POST",action:d});h.append(f,g,c);angular.element(b[0].body).append(h);h[0].submit();h.remove()}}Qr.$inject=["$document","gmfServiceUrls"];B.factory("gmfExportFeatures",Qr);var Rr=[4E3,3750,3500,3250,3E3,2750,2500,2250,2E3,1750,1500,1250,1E3,750,650,500,250,100,50,20,10,5,2.5,2,1.5,1,.5];new Sg({extent:[42E4,3E4,9E5,35E4],Ca:Rr,Xd:Rr.map(function(b,c){return String(c)})});var Sr=[4E3,3750,3500,3250,3E3,2750,2500,2250,2E3,1750,1500,1250,1E3,750,650,500,250,100,50,20,10,5,2.5,2,1.5,1,.5];new Sg({extent:[42E4,3E4,9E5,35E4],Ca:Sr,Xd:Sr.map(function(b,c){return String(c)})});(function(){function b(b){b.put("ngeo/popup.html",'<h4 class="popover-title ngeo-popup-title"> <span>{{title}}</span> <button type=button class=close ng-click="open = false"> &times;</button> </h4> <div class=popover-content ng-bind-html=content></div> ');b.put("gmf/layertree.html",'<span ng-if=::!layertreeCtrl.isRoot id=node-{{::layertreeCtrl.uid}} ng-class="[layertreeCtrl.node.children ? \'group\' : \'leaf\', \'depth-\' + layertreeCtrl.depth, gmfLayertreeCtrl.getResolutionStyle(layertreeCtrl.node), gmfLayertreeCtrl.getNoSourceStyle(layertreeCtrl), gmfLayertreeCtrl.getNodeState(layertreeCtrl)]"> <a href ng-click=::gmfLayertreeCtrl.toggleActive(layertreeCtrl)> <span class=layerIcon> <img ng-src={{::gmfLayertreeCtrl.getLegendIconURL(layertreeCtrl)}}> </span> <span class=state></span> <span class=name>{{layertreeCtrl.node.name | translate}}</span> </a> <span class=rightButtons> <span class=metadata ng-if=::layertreeCtrl.node.metadata.metadataUrl> <span ng-if="::gmfLayertreeCtrl.openLinksInNewWindow === true"> <a title="More informations" href={{::layertreeCtrl.node.metadata.metadataUrl}} target=blank_></a> </span> <span ng-if="::gmfLayertreeCtrl.openLinksInNewWindow !== true"> <a title="More informations" href ng-click=gmfLayertreeCtrl.displayMetadata(layertreeCtrl)></a> </span> </span> <span class=zoom title="Zoom to a visible level" ng-click=::gmfLayertreeCtrl.zoomToResolution(layertreeCtrl.node)></span> <span class=legendButton ng-if="::(gmfLayertreeCtrl.getLegendURL(layertreeCtrl) && layertreeCtrl.node.metadata.legend == \'true\')"> <a title="Show/hide legend" data-toggle=collapse href=#node-{{::layertreeCtrl.uid}}-legend></a> </span> </span> <span class=legend> <div id=node-{{::layertreeCtrl.uid}}-legend class=collapse ng-class="::[layertreeCtrl.node.metadata.isLegendExpanded == \'true\' ? \'in\' : \'\']"> <a data-toggle=collapse href=#node-{{::layertreeCtrl.uid}}-legend> <img ng-src={{gmfLayertreeCtrl.getLegendURL(layertreeCtrl)}}> </a> </div> </span> </span> <ul ng-if=::layertreeCtrl.node.children> <li class=treenode ng-repeat="node in layertreeCtrl.node.children" ngeo-layertree=node ngeo-layertree-notroot ngeo-layertree-map=layertreeCtrl.map ngeo-layertree-nodelayerexpr=layertreeCtrl.nodelayerExpr ngeo-layertree-listenersexpr=layertreeCtrl.listenersExpr> </li> </ul> ');
b.put("ngeo/scaleselector.html",'<div ng-class="::{\'dropdown\': true, \'dropup\': scaleselectorCtrl.options.dropup}"> <button type=button class="btn btn-primary" data-toggle=dropdown> <span ng-bind-html=scaleselectorCtrl.currentScale></span>&nbsp;<span class=caret></span> </button> <ul class=dropdown-menu role=menu> <li ng-repeat="zoomLevel in ::scaleselectorCtrl.zoomLevels"> <a href ng-click=scaleselectorCtrl.changeZoom(zoomLevel) ng-bind-html=scaleselectorCtrl.getScale(zoomLevel)> </a> </li> </ul> </div> ');
b.put("gmf/mobilemeasurelength.html",'<a class="btn btn-default" ng-if="ctrl.drawing && (!ctrl.valid)" ng-click=ctrl.addPoint()> <span class="fa fa-check"></span> {{\'Set as starting point\' | translate}} </a> <a class="btn btn-default" ng-if=ctrl.dirty ng-click=ctrl.addPoint()> <span class="fa fa-plus"></span> {{\'Add new point\' | translate}} </a> <a class="btn btn-default" ng-if="ctrl.drawing && ctrl.valid && !ctrl.dirty" ng-click=ctrl.finish()> <span class="fa fa-check"></span> {{\'Terminate\' | translate}} </a> <a class="btn btn-default" ng-if=ctrl.valid ng-click=ctrl.clear()> <span class="fa fa-repeat"></span> {{\'Clear\' | translate}} </a> <a class="btn btn-default" ng-if=ctrl.active ng-click=ctrl.deactivate()> <span class="fa fa-times"></span> {{\'Close\' | translate}} </a> ');
b.put("gmf/mobilebackgroundlayerselector.html",'<ul class=gmf-mobile-backgroundlayerselector> <li ng-repeat="layer in ::ctrl.bgLayers" ng-click=ctrl.setLayer(layer)> <div class=gmf-check> <span class=gmf-icon ng-class="{\'gmf-icon-check\': ctrl.bgLayer == layer}"> </span> </div> <div class=gmf-text>{{layer.get("label") | translate}}</div> <img class=gmf-thumb ng-src="{{::layer.get(\'metadata\')[\'thumbnail\']}}"> <div class=gmf-eol></div> </li> </ul> ');b.put("gmf/mobilemeasurepoint.html",'<a class="btn btn-default" ng-if=ctrl.active ng-click=ctrl.deactivate()> <span class="fa fa-times"></span> {{\'Close\' | translate}} </a> ');
b.put("gmf/search.html",'<div class=gmf-search> <input type=text placeholder="{{\'Search\u2026\' | translate}}" class=form-control ng-model=ctrl.input_value ngeo-search=ctrl.options ngeo-search-datasets=ctrl.datasets ngeo-search-listeners=ctrl.listeners> <span class="clear-button ng-hide" ng-hide="!ctrl.clearButton || ctrl.input_value == \'\'" ng-click=ctrl.onClearButton()></span> </div> ');b.put("gmf/authentication.html","<div ng-if=authCtrl.gmfUser.username> <div class=form-group> <span>{{'Logged in as' | translate}}</span> <strong>{{ ::authCtrl.gmfUser.username }}</strong>. </div> <form name=logoutForm role=form ng-submit=authCtrl.logout() ng-controller=GmfAuthenticationController ng-class=\"{'has-error': authCtrl.error}\" ng-if=!authCtrl.changingPassword> <div class=form-group> <input type=submit class=\"form-control btn btn-primary\" value=\"{{'Logout' | translate}}\"> </div> <span ng-show=authCtrl.error class=help-block>{{ authCtrl.error }}</span> <div class=form-group> <input type=button class=\"form-control btn btn-default\" value=\"{{'Change password' | translate}}\" ng-click=\"authCtrl.changingPassword = true\"> </div> </form> <form name=changePasswordForm role=form ng-submit=authCtrl.changePassword() ng-controller=GmfAuthenticationController ng-class=\"{'has-error': authCtrl.error}\" ng-if=authCtrl.changingPassword> <div class=form-group> <input type=password class=form-control name=oldpassword ng-model=authCtrl.oldPwdVal required=required placeholder=\"{{'Old password' | translate}}\"> </div> <div class=form-group> <input type=password class=form-control name=newpassword ng-model=authCtrl.newPwdVal required=required placeholder=\"{{'New password' | translate}}\"> </div> <div class=form-group> <input type=password class=form-control name=newpasswordconfirm ng-model=authCtrl.newPwdConfVal required=required placeholder=\"{{'Confirm new password' | translate}}\"> </div> <div class=form-group> <input type=submit class=\"form-control btn btn-primary\" value=\"{{'Change password' | translate}}\"> </div> <div class=form-group> <span ng-show=authCtrl.error class=help-block>{{ authCtrl.error }}</span> <input type=button class=\"form-control btn btn-default\" value=\"{{'Cancel' | translate}}\" ng-click=authCtrl.changePasswordReset()> </div> </form> <ngeo-modal ng-model=authCtrl.changePasswordModalShown> <div class=modal-header> <button type=button class=close data-dismiss=modal aria-label=\"{{'Close' | translate}}\"> <span aria-hidden=true>&times;</span> </button> <h4 class=modal-title> {{'Password Changed' | translate}} </h4> </div> <div class=modal-body> {{'Your password has succesfully been changed.' | translate}} </div> <div class=modal-footer> <button type=button class=\"btn btn-default\" data-dismiss=modal>{{'OK' | translate}}</button> </div> </ngeo-modal> </div> <div ng-if=!authCtrl.gmfUser.username> <form name=loginForm role=form ng-submit=authCtrl.login() ng-controller=GmfAuthenticationController ng-class=\"{'has-error': authCtrl.error}\"> <div class=form-group> <input type=text class=form-control name=login ng-model=authCtrl.loginVal required=required placeholder=\"{{'Username' | translate}}\"> </div> <div class=form-group> <input type=password class=form-control name=password ng-model=authCtrl.pwdVal required=required placeholder=\"{{'Password' | translate}}\"> </div> <div class=form-group> <input type=submit class=\"form-control btn btn-primary\" value=\"{{'Connect' | translate}}\"> </div> <span ng-show=authCtrl.error class=help-block>{{ authCtrl.error }}</span> <div class=form-group> <a ng-click=authCtrl.resetPassword() href>{{'Password forgotten?' | translate}}</a> </div> </form> <ngeo-modal ng-model=authCtrl.resetPasswordModalShown> <div class=modal-header> <button type=button class=close data-dismiss=modal aria-label=\"{{'Close' | translate}}\"> <span aria-hidden=true>&times;</span> </button> <h4 class=modal-title> {{'Password Forgotten?' | translate}} </h4> </div> <div class=modal-body> {{ ::authCtrl.translate( 'A new password has just been sent to you by e-mail.') }} </div> <div class=modal-footer> <button type=button class=\"btn btn-default\" data-dismiss=modal>{{'OK' | translate}}</button> </div> </ngeo-modal> </div> ");
b.put("gmf/themeselector.html","<ul class=gmf-theme-selector> <li ng-repeat=\"theme in tsCtrl.themes\" ng-click=tsCtrl.switchTheme(theme)> <div class=gmf-check> <span class=gmf-icon ng-class=\"{'gmf-icon-check': tsCtrl.currentTheme['name'] == theme.name}\"> </span> </div> <div class=gmf-text>{{theme.name | translate}}</div> <img class=gmf-thumb ng-src={{::theme.icon}}> <div class=gmf-eol></div> </li> </ul> ");b.put("ngeo/layertree.html",'<span ng-if=::!layertreeCtrl.isRoot>{{::layertreeCtrl.node.name}}</span> <input type=checkbox ng-if="::layertreeCtrl.node && !layertreeCtrl.node.children" ng-model=layertreeCtrl.getSetActive ng-model-options="{getterSetter: true}"> <ul ng-if=::layertreeCtrl.node.children> <li ng-repeat="node in ::layertreeCtrl.node.children" ngeo-layertree=::node ngeo-layertree-notroot ngeo-layertree-map=layertreeCtrl.map ngeo-layertree-nodelayerexpr=layertreeCtrl.nodelayerExpr ngeo-layertree-listenersexpr=layertreeCtrl.listenersExpr> </li> </ul> ');
b.put("gmf/mobiledisplayqueries.html",'<div class=mobiledisplayqueries ng-show=ctrl.open ng-swipe-disable-mouse ng-swipe-left=ctrl.next() ng-swipe-right=ctrl.previous()> <button class=collapse-button type=button ng-init="ctrl.collapse = true" ng-click="ctrl.collapse = !ctrl.collapse" ng-class="[ctrl.collapse ? \'up\' : \'down\']"></button> <div class=displayqueries-container> <button type=button class=close ng-click=ctrl.close()></button> <div class=animation-container ng-class="[ctrl.collapse ? \'\' : \'detailed\', ctrl.isNext ? \'next\' : \'previous\']"> <div ng-animate-swap=ctrl.animate class=slide-animation> <div class=header> <p class=title>{{ctrl.source.label | translate}}</p> <p class=subtitle>{{ctrl.getFeatureValues()[ctrl.source.identifierAttributeField]}}</p> </div> <div class=details> <table> <tr ng-repeat="(key, value) in ctrl.getFeatureValues()" ng-if="value.length && key !== \'boundedBy\'"> <td class=key>{{key | translate}}</td> <td class=value>{{value}}</td> </tr> </table> </div> </div> </div> <div class=navigate> <button type=button class=previous ng-show="ctrl.getResultLength() - 1" ng-click=ctrl.previous()></button> <span>{{ctrl.currentResult + 1}}</span> <span>/</span> <span>{{ctrl.getResultLength()}}</span> <button type=button class=next ng-show="ctrl.getResultLength() - 1" ng-click=ctrl.next()></button> </div> </div> </div> ')}
b.$inject=["$templateCache"];B.run(b)})();var Tr=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"];function Ur(b,c,d){b.push(parseFloat(c.getAttribute("lon")),parseFloat(c.getAttribute("lat")));"ele"in d?(b.push(d.ele),delete d.ele):b.push(0);"time"in d?(b.push(d.time),delete d.time):b.push(0);return b}function Vr(b,c){var d=c[c.length-1],e=b.getAttribute("href");null!==e&&(d.link=e);Jd(Wr,b,c)}function Xr(b,c){c[c.length-1].extensionsNode_=b}
P(Tr,{rte:Ad(function(b,c){var d=c[0],e=Q({flatCoordinates:[]},Yr,b,c);if(e){var f=e.flatCoordinates;delete e.flatCoordinates;var g=new ui(null);g.K("XYZM",f);di(g,!1,d);d=new Xh(g);d.ka(e);return d}}),trk:Ad(function(b,c){var d=c[0],e=Q({flatCoordinates:[],ends:[]},Zr,b,c);if(e){var f=e.flatCoordinates;delete e.flatCoordinates;var g=e.ends;delete e.ends;var h=new yi(null);h.K("XYZM",f,g);di(h,!1,d);d=new Xh(h);d.ka(e);return d}}),wpt:Ad(function(b,c){var d=c[0],e=Q({},$r,b,c);if(e){var f=Ur([],b,
e),f=new Ci(f,"XYZM");di(f,!1,d);d=new Xh(f);d.ka(e);return d}})});
var Wr=P(Tr,{text:M(S,"linkText"),type:M(S,"linkType")}),Yr=P(Tr,{name:M(S),cmt:M(S),desc:M(S),src:M(S),link:Vr,number:M(Sd),extensions:Xr,type:M(S),rtept:function(b,c){var d=Q({},as,b,c);d&&Ur(c[c.length-1].flatCoordinates,b,d)}}),as=P(Tr,{ele:M(Qd),time:M(Pd)}),Zr=P(Tr,{name:M(S),cmt:M(S),desc:M(S),src:M(S),link:Vr,number:M(Sd),type:M(S),extensions:Xr,trkseg:function(b,c){var d=c[c.length-1];Jd(bs,b,c);d.ends.push(d.flatCoordinates.length)}}),bs=P(Tr,{trkpt:function(b,c){var d=Q({},cs,b,c);d&&Ur(c[c.length-
1].flatCoordinates,b,d)}}),cs=P(Tr,{ele:M(Qd),time:M(Pd)}),$r=P(Tr,{ele:M(Qd),time:M(Pd),magvar:M(Qd),geoidheight:M(Qd),name:M(S),cmt:M(S),desc:M(S),src:M(S),link:Vr,sym:M(S),type:M(S),fix:M(S),sat:M(Sd),hdop:M(Qd),vdop:M(Qd),pdop:M(Qd),ageofdgpsdata:M(Qd),dgpsid:M(Sd),extensions:Xr});function ds(b,c,d){b.setAttribute("href",c);c=d[d.length-1].properties;Kd({node:b},es,Hd,[c.linkText,c.linkType],d,fs)}
function gs(b,c,d){var e=d[d.length-1],f=e.node.namespaceURI,g=e.properties;yd(b,null,"lat",c[1]);yd(b,null,"lon",c[0]);switch(e.geometryLayout){case "XYZM":0!==c[3]&&(g.time=c[3]);case "XYZ":0!==c[2]&&(g.ele=c[2]);break;case "XYM":0!==c[2]&&(g.time=c[2])}c=hs[f];e=Id(g,c);Kd({node:b,properties:g},is,Hd,e,d,c)}
var fs=["text","type"],es=P(Tr,{text:O(Vd),type:O(Vd)}),js=P(Tr,"name cmt desc src link number type rtept".split(" ")),ks=P(Tr,{name:O(Vd),cmt:O(Vd),desc:O(Vd),src:O(Vd),link:O(ds),number:O(Xd),type:O(Vd),rtept:Ed(O(gs))}),ls=P(Tr,"name cmt desc src link number type trkseg".split(" ")),os=P(Tr,{name:O(Vd),cmt:O(Vd),desc:O(Vd),src:O(Vd),link:O(ds),number:O(Xd),type:O(Vd),trkseg:Ed(O(function(b,c,d){Kd({node:b,geometryLayout:c.layout,properties:{}},ms,ns,c.ja(),d)}))}),ns=Fd("trkpt"),ms=P(Tr,{trkpt:O(gs)}),
hs=P(Tr,"ele time magvar geoidheight name cmt desc src link sym type fix sat hdop vdop pdop ageofdgpsdata dgpsid".split(" ")),is=P(Tr,{ele:O(Wd),time:O(function(b,c){var d=new Date(1E3*c),d=d.getUTCFullYear()+"-"+Ga(d.getUTCMonth()+1,2)+"-"+Ga(d.getUTCDate(),2)+"T"+Ga(d.getUTCHours(),2)+":"+Ga(d.getUTCMinutes(),2)+":"+Ga(d.getUTCSeconds(),2)+"Z";b.appendChild(bd.createTextNode(d))}),magvar:O(Wd),geoidheight:O(Wd),name:O(Vd),cmt:O(Vd),desc:O(Vd),src:O(Vd),link:O(ds),sym:O(Vd),type:O(Vd),fix:O(Vd),
sat:O(Xd),hdop:O(Wd),vdop:O(Wd),pdop:O(Wd),ageofdgpsdata:O(Wd),dgpsid:O(Xd)});
P(Tr,{rte:O(function(b,c,d){var e=d[0],f=Ua({},c.u);b={node:b,properties:f};if(c=c.J())c=di(c,!0,e),b.geometryLayout=c.layout,f.rtept=c.ja();e=js[d[d.length-1].node.namespaceURI];f=Id(f,e);Kd(b,ks,Hd,f,d,e)}),trk:O(function(b,c,d){var e=d[0],f=Ua({},c.u);b={node:b,properties:f};if(c=c.J())c=di(c,!0,e),f.trkseg=zi(c);e=ls[d[d.length-1].node.namespaceURI];f=Id(f,e);Kd(b,os,Hd,f,d,e)}),wpt:O(function(b,c,d){var e=d[0],f=d[d.length-1];f.properties=Ua({},c.u);if(c=c.J())c=di(c,!0,e),f.geometryLayout=c.layout,
gs(b,c.ja(),d)})});function ps(b){b=b||{};this.b=b.font;this.g=b.rotation;this.l=b.scale;this.o=b.text;this.j=b.textAlign;this.u=b.textBaseline;this.a=void 0!==b.fill?b.fill:new Gh({color:"#333"});this.i=void 0!==b.stroke?b.stroke:null;this.f=void 0!==b.offsetX?b.offsetX:0;this.c=void 0!==b.offsetY?b.offsetY:0}ps.prototype.Ia=function(){return this.l};ps.prototype.va=function(){return this.o};var qs=["http://www.google.com/kml/ext/2.2"],Y=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],rs=[255,255,255,1],ss=new Gh({color:rs}),ts=[20,2],us=[64,64],vs=new ql({anchor:ts,ld:"bottom-left",md:"pixels",od:"pixels",crossOrigin:"anonymous",rotation:0,scale:.5,size:us,src:"https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png"}),ws=new Nh({color:rs,width:1}),xs=new ps({font:"bold 16px Helvetica",
fill:ss,stroke:new Nh({color:[51,51,51,1],width:2}),scale:.8});new Qh({fill:ss,image:vs,text:xs,stroke:ws,zIndex:0});var ys={fraction:"fraction",pixels:"pixels"};function zs(b){b=fd(b);if(b=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(b))return b=b[1],[parseInt(b.substr(6,2),16),parseInt(b.substr(4,2),16),parseInt(b.substr(2,2),16),parseInt(b.substr(0,2),16)/255]}
function As(b){b=fd(b);for(var c=[],d=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i,e;e=d.exec(b);)c.push(parseFloat(e[1]),parseFloat(e[2]),e[3]?parseFloat(e[3]):0),b=b.substr(e[0].length);return""!==b?void 0:c}function Bs(b){var c=fd(b);return b.baseURI?ip(b.baseURI,c.trim()).toString():c.trim()}function Cs(b){b=Qd(b);if(void 0!==b)return Math.sqrt(b)}function Ds(b,c){return Q(null,Es,b,c)}
function Fs(b,c){var d=Q({s:[],ag:[]},Gs,b,c);if(d){var e=d.s,d=d.ag,f,g;f=0;for(g=Math.min(e.length,d.length);f<g;++f)e[4*f+3]=d[f];d=new ui(null);d.K("XYZM",e);return d}}function Hs(b,c){var d=Q({},Is,b,c),e=Q(null,Js,b,c);if(e){var f=new ui(null);f.K("XYZ",e);f.ka(d);return f}}function Ks(b,c){var d=Q({},Is,b,c),e=Q(null,Js,b,c);if(e){var f=new Ji(null);f.K("XYZ",e,[e.length]);f.ka(d);return f}}
function Ls(b,c){var d=Q([],Ms,b,c);if(!d)return null;if(0===d.length)return new Sp(d);var e=!0,f=d[0].aa(),g,h,k;h=1;for(k=d.length;h<k;++h)if(g=d[h],g.aa()!=f){e=!1;break}if(e){if("Point"==f){g=d[0];e=g.layout;f=g.s;h=1;for(k=d.length;h<k;++h)g=d[h],Tc(f,g.s);g=new Di(null);g.K(e,f);Ns(g,d);return g}return"LineString"==f?(g=new yi(null),Bi(g,d),Ns(g,d),g):"Polygon"==f?(g=new Mi(null),Qi(g,d),Ns(g,d),g):"GeometryCollection"==f?new Sp(d):null}return new Sp(d)}
function Os(b,c){var d=Q({},Is,b,c),e=Q(null,Js,b,c);if(e){var f=new Ci(null);f.K("XYZ",e);f.ka(d);return f}}function Ps(b,c){var d=Q({},Is,b,c),e=Q([null],Qs,b,c);if(e&&e[0]){var f=new Ji(null),g=e[0],h=[g.length],k,l;k=1;for(l=e.length;k<l;++k)Tc(g,e[k]),h.push(g.length);f.K("XYZ",g,h);f.ka(d);return f}}
function Rs(b,c){var d=Q({},Ss,b,c);if(!d)return null;var e="fillStyle"in d?d.fillStyle:ss,f=d.fill;void 0===f||f||(e=null);var f="imageStyle"in d?d.imageStyle:vs,g="textStyle"in d?d.textStyle:xs,h="strokeStyle"in d?d.strokeStyle:ws,d=d.outline;void 0===d||d||(h=null);return[new Qh({fill:e,image:f,stroke:h,text:g,zIndex:void 0})]}
function Ns(b,c){var d=c.length,e=Array(c.length),f=Array(c.length),g,h,k,l;k=l=!1;for(h=0;h<d;++h)g=c[h],e[h]=g.get("extrude"),f[h]=g.get("altitudeMode"),k=k||void 0!==e[h],l=l||f[h];k&&b.set("extrude",e);l&&b.set("altitudeMode",f)}function Ts(b,c){Jd(Us,b,c)}
var Vs=P(Y,{value:Cd(S)}),Us=P(Y,{Data:function(b,c){var d=b.getAttribute("name");if(null!==d){var e=Q(void 0,Vs,b,c);e&&(c[c.length-1][d]=e)}},SchemaData:function(b,c){Jd(Ws,b,c)}}),Is=P(Y,{extrude:M(Nd),altitudeMode:M(S)}),Es=P(Y,{coordinates:Cd(As)}),Qs=P(Y,{innerBoundaryIs:function(b,c){var d=Q(void 0,Xs,b,c);d&&c[c.length-1].push(d)},outerBoundaryIs:function(b,c){var d=Q(void 0,Ys,b,c);d&&(c[c.length-1][0]=d)}}),Gs=P(Y,{when:function(b,c){var d=c[c.length-1].ag,e=fd(b);if(e=/^\s*(\d{4})($|-(\d{2})($|-(\d{2})($|T(\d{2}):(\d{2}):(\d{2})(Z|(?:([+\-])(\d{2})(?::(\d{2}))?)))))\s*$/.exec(e)){var f=
Date.UTC(parseInt(e[1],10),e[3]?parseInt(e[3],10)-1:0,e[5]?parseInt(e[5],10):1,e[7]?parseInt(e[7],10):0,e[8]?parseInt(e[8],10):0,e[9]?parseInt(e[9],10):0);if(e[10]&&"Z"!=e[10]){var g="-"==e[11]?-1:1,f=f+60*g*parseInt(e[12],10);e[13]&&(f+=3600*g*parseInt(e[13],10))}d.push(f)}else d.push(0)}},P(qs,{coord:function(b,c){var d=c[c.length-1].s,e=fd(b);(e=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(e))?d.push(parseFloat(e[1]),
parseFloat(e[2]),parseFloat(e[3]),0):d.push(0,0,0,0)}})),Js=P(Y,{coordinates:Cd(As)}),Zs=P(Y,{href:M(Bs)},P(qs,{x:M(Qd),y:M(Qd),w:M(Qd),h:M(Qd)})),$s=P(Y,{Icon:M(function(b,c){var d=Q({},Zs,b,c);return d?d:null}),heading:M(Qd),hotSpot:M(function(b){var c=b.getAttribute("xunits"),d=b.getAttribute("yunits");return{x:parseFloat(b.getAttribute("x")),ue:ys[c],y:parseFloat(b.getAttribute("y")),ve:ys[d]}}),scale:M(Cs)}),Xs=P(Y,{LinearRing:Cd(Ds)}),at=P(Y,{color:M(zs),scale:M(Cs)}),bt=P(Y,{color:M(zs),width:M(Qd)}),
Ms=P(Y,{LineString:Ad(Hs),LinearRing:Ad(Ks),MultiGeometry:Ad(Ls),Point:Ad(Os),Polygon:Ad(Ps)}),ct=P(qs,{Track:Ad(Fs)});P(Y,{ExtendedData:Ts,Link:function(b,c){Jd(dt,b,c)},address:M(S),description:M(S),name:M(S),open:M(Nd),phoneNumber:M(S),visibility:M(Nd)});var dt=P(Y,{href:M(Bs)}),Ys=P(Y,{LinearRing:Cd(Ds)}),et=P(Y,{Style:M(Rs),key:M(S),styleUrl:M(function(b){var c=fd(b).trim();return b.baseURI?ip(b.baseURI,c).toString():c})});
P(Y,{ExtendedData:Ts,MultiGeometry:M(Ls,"geometry"),LineString:M(Hs,"geometry"),LinearRing:M(Ks,"geometry"),Point:M(Os,"geometry"),Polygon:M(Ps,"geometry"),Style:M(Rs),StyleMap:function(b,c){var d=Q(void 0,ft,b,c);if(d){var e=c[c.length-1];ea(d)?e.Style=d:"string"===typeof d&&(e.styleUrl=d)}},address:M(S),description:M(S),name:M(S),open:M(Nd),phoneNumber:M(S),styleUrl:M(Bs),visibility:M(Nd)},P(qs,{MultiTrack:M(function(b,c){var d=Q([],ct,b,c);if(d){var e=new yi(null);Bi(e,d);return e}},"geometry"),
Track:M(Fs,"geometry")}));
var gt=P(Y,{color:M(zs),fill:M(Nd),outline:M(Nd)}),Ws=P(Y,{SimpleData:function(b,c){var d=b.getAttribute("name");if(null!==d){var e=S(b);c[c.length-1][d]=e}}}),Ss=P(Y,{IconStyle:function(b,c){var d=Q({},$s,b,c);if(d){var e=c[c.length-1],f="Icon"in d?d.Icon:{},g;g=(g=f.href)?g:"https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png";var h,k,l,n=d.hotSpot;n?(h=[n.x,n.y],k=n.ue,l=n.ve):"https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png"===g?(h=ts,l=k="pixels"):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(g)&&
(h=[.5,0],l=k="fraction");var q,n=f.x,p=f.y;void 0!==n&&void 0!==p&&(q=[n,p]);var r,n=f.w,f=f.h;void 0!==n&&void 0!==f&&(r=[n,f]);var u,f=d.heading;void 0!==f&&(u=f*Math.PI/180);d=d.scale;"https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png"==g&&(r=us,void 0===d&&(d=.5));h=new ql({anchor:h,ld:"bottom-left",md:k,od:l,crossOrigin:"anonymous",offset:q,sf:"bottom-left",rotation:u,scale:d,size:r,src:g});e.imageStyle=h}},LabelStyle:function(b,c){var d=Q({},at,b,c);d&&(c[c.length-1].textStyle=new ps({fill:new Gh({color:"color"in
d?d.color:rs}),scale:d.scale}))},LineStyle:function(b,c){var d=Q({},bt,b,c);d&&(c[c.length-1].strokeStyle=new Nh({color:"color"in d?d.color:rs,width:"width"in d?d.width:1}))},PolyStyle:function(b,c){var d=Q({},gt,b,c);if(d){var e=c[c.length-1];e.fillStyle=new Gh({color:"color"in d?d.color:rs});var f=d.fill;void 0!==f&&(e.fill=f);d=d.outline;void 0!==d&&(e.outline=d)}}}),ft=P(Y,{Pair:function(b,c){var d=Q({},et,b,c);if(d){var e=d.key;e&&"normal"==e&&((e=d.styleUrl)&&(c[c.length-1]=e),(d=d.Style)&&
(c[c.length-1]=d))}}});function ht(b,c){var d=mh(c),d=[255*(4==d.length?d[3]:1),d[2],d[1],d[0]],e;for(e=0;4>e;++e){var f=parseInt(d[e],10).toString(16);d[e]=1==f.length?"0"+f:f}Vd(b,d.join(""))}function it(b,c,d){Kd({node:b},jt,kt,[c],d)}
function lt(b,c,d){var e={node:b};c.Ya()&&b.setAttribute("id",c.Ya());b=Ua({},c.u);var f=c.i;f&&(f=f.call(c,0))&&(f=ea(f)?f[0]:f,this.a&&(b.Style=f),(f=f.va())&&(b.name=f.va()));f=mt[d[d.length-1].node.namespaceURI];b=Id(b,f);Kd(e,nt,Hd,b,d,f);b=d[0];(c=c.J())&&(c=di(c,!0,b));Kd(e,nt,ot,[c],d)}function pt(b,c,d){var e=c.s;b={node:b};b.layout=c.layout;b.stride=c.a;Kd(b,qt,rt,[e],d)}
function st(b,c,d){var e=c.layout,f=c.s,g=c.c;c=[];var h=0,k,l;k=0;for(l=g.length;k<l;++k){var n=g[k],q=new wi(null);xi(q,e,f.slice(h,n));c.push(q);h=n}e=c.shift();b={node:b};Kd(b,tt,ut,c,d);Kd(b,tt,vt,[e],d)}function wt(b,c){Wd(b,c*c)}P(Y,["Document","Placemark"]);P(Y,{Document:O(function(b,c,d){Kd({node:b},xt,yt,c,d,void 0,this)}),Placemark:O(lt)});
var xt=P(Y,{Placemark:O(lt)}),zt={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry"},At=P(Y,["href"],P(qs,["x","y","w","h"])),Bt=P(Y,{href:O(Vd)},P(qs,{x:O(Wd),y:O(Wd),w:O(Wd),h:O(Wd)})),Ct=P(Y,["scale","heading","Icon","hotSpot"]),Et=P(Y,{Icon:O(function(b,c,d){b={node:b};var e=At[d[d.length-1].node.namespaceURI],f=Id(c,e);Kd(b,Bt,Hd,f,d,e);e=At[qs[0]];f=Id(c,e);Kd(b,Bt,Dt,f,d,e)}),
heading:O(Wd),hotSpot:O(function(b,c){b.setAttribute("x",c.x);b.setAttribute("y",c.y);b.setAttribute("xunits",c.ue);b.setAttribute("yunits",c.ve)}),scale:O(wt)}),Ft=P(Y,["color","scale"]),Gt=P(Y,{color:O(ht),scale:O(wt)}),Ht=P(Y,["color","width"]),It=P(Y,{color:O(ht),width:O(Wd)}),jt=P(Y,{LinearRing:O(pt)}),Jt=P(Y,{LineString:O(pt),Point:O(pt),Polygon:O(st)}),mt=P(Y,"name open visibility address phoneNumber description styleUrl Style".split(" ")),nt=P(Y,{MultiGeometry:O(function(b,c,d){b={node:b};
var e=c.aa(),f,g;if("MultiPoint"==e){f=c.s;g=c.layout;c=c.a;var e=[],h,k;h=0;for(k=f.length;h<k;h+=c){var l=new Ci(null);l.K(g,f.slice(h,h+c));e.push(l)}f=e;g=Kt}else if("MultiLineString"==e)f=zi(c),g=Lt;else if("MultiPolygon"==e){f=c.layout;g=c.s;c=c.c;e=[];h=0;var n,q;k=0;for(l=c.length;k<l;++k){var p=c[k].slice(),r=p[p.length-1];if(0!==h)for(n=0,q=p.length;n<q;++n)p[n]-=h;n=new Ji(null);n.K(f,g.slice(h,r),p);e.push(n);h=r}f=e;g=Mt}Kd(b,Jt,g,f,d)}),LineString:O(pt),LinearRing:O(pt),Point:O(pt),
Polygon:O(st),Style:O(function(b,c,d){b={node:b};var e={},f=c.c,g=c.b,h=c.g;c=c.va();h instanceof ql&&(e.IconStyle=h);c&&(e.LabelStyle=c);g&&(e.LineStyle=g);f&&(e.PolyStyle=f);c=Nt[d[d.length-1].node.namespaceURI];e=Id(e,c);Kd(b,Ot,Hd,e,d,c)}),address:O(Vd),description:O(Vd),name:O(Vd),open:O(Ud),phoneNumber:O(Vd),styleUrl:O(Vd),visibility:O(Ud)}),qt=P(Y,{coordinates:O(function(b,c,d){d=d[d.length-1];var e=d.layout;d=d.stride;var f;"XY"==e||"XYM"==e?f=2:("XYZ"==e||"XYZM"==e)&&(f=3);var g,h=c.length,
k="";if(0<h){k+=c[0];for(e=1;e<f;++e)k+=","+c[e];for(g=d;g<h;g+=d)for(k+=" "+c[g],e=1;e<f;++e)k+=","+c[g+e]}Vd(b,k)})}),tt=P(Y,{outerBoundaryIs:O(it),innerBoundaryIs:O(it)}),Pt=P(Y,{color:O(ht)}),Nt=P(Y,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),Ot=P(Y,{IconStyle:O(function(b,c,d){b={node:b};var e={},f=c.ob(),g=c.Md(),h={href:c.a.l};if(f){h.w=f[0];h.h=f[1];var k=c.Yb(),l=c.Qa();l&&g&&0!==l[0]&&l[1]!==f[1]&&(h.x=l[0],h.y=g[1]-(l[1]+f[1]));k&&0!==k[0]&&k[1]!==f[1]&&(e.hotSpot={x:k[0],ue:"pixels",
y:f[1]-k[1],ve:"pixels"})}e.Icon=h;f=c.Ia();1!==f&&(e.scale=f);c=c.o;0!==c&&(e.heading=c);c=Ct[d[d.length-1].node.namespaceURI];e=Id(e,c);Kd(b,Et,Hd,e,d,c)}),LabelStyle:O(function(b,c,d){b={node:b};var e={},f=c.a;f&&(e.color=f.a);(c=c.Ia())&&1!==c&&(e.scale=c);c=Ft[d[d.length-1].node.namespaceURI];e=Id(e,c);Kd(b,Gt,Hd,e,d,c)}),LineStyle:O(function(b,c,d){b={node:b};var e=Ht[d[d.length-1].node.namespaceURI];c=Id({color:c.a,width:c.b},e);Kd(b,It,Hd,c,d,e)}),PolyStyle:O(function(b,c,d){Kd({node:b},Pt,
Qt,[c.a],d)})});function Dt(b,c,d){return ed(qs[0],"gx:"+d)}function yt(b,c){return ed(c[c.length-1].node.namespaceURI,"Placemark")}function ot(b,c){if(b)return ed(c[c.length-1].node.namespaceURI,zt[b.aa()])}var Qt=Fd("color"),rt=Fd("coordinates"),ut=Fd("innerBoundaryIs"),Kt=Fd("Point"),Lt=Fd("LineString"),kt=Fd("LinearRing"),Mt=Fd("Polygon"),vt=Fd("outerBoundaryIs");(function(){var b={},c={R:b};(function(d){if("object"===typeof b&&"undefined"!==typeof c)c.R=d();else{var e;"undefined"!==typeof window?e=window:"undefined"!==typeof global?e=global:"undefined"!==typeof self?e=self:e=this;e.rk=d()}})(function(){return function e(b,c,h){function k(n,p){if(!c[n]){if(!b[n]){var r="function"==typeof require&&require;if(!p&&r)return r(n,!0);if(l)return l(n,!0);r=Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r;}r=c[n]={R:{}};b[n][0].call(r.R,function(c){var e=
b[n][1][c];return k(e?e:c)},r,r.R,e,b,c,h)}return c[n].R}for(var l="function"==typeof require&&require,n=0;n<h.length;n++)k(h[n]);return k}({1:[function(b,c){function g(b){var c;b&&b.length&&(c=b,b=c.length);b=new Uint8Array(b||0);c&&b.set(c);b.Nf=l.Nf;b.te=l.te;b.Jf=l.Jf;b.dg=l.dg;b.ge=l.ge;b.cg=l.cg;b.ce=l.ce;b.bg=l.bg;b.toString=l.toString;b.write=l.write;b.slice=l.slice;b.copy=l.copy;b.wg=!0;return b}function h(b){for(var c=b.length,e=[],f=0,g,h;f<c;f++){g=b.charCodeAt(f);if(55295<g&&57344>g)if(h)if(56320>
g){e.push(239,191,189);h=g;continue}else g=h-55296<<10|g-56320|65536,h=null;else{56319<g||f+1===c?e.push(239,191,189):h=g;continue}else h&&(e.push(239,191,189),h=null);128>g?e.push(g):2048>g?e.push(g>>6|192,g&63|128):65536>g?e.push(g>>12|224,g>>6&63|128,g&63|128):e.push(g>>18|240,g>>12&63|128,g>>6&63|128,g&63|128)}return e}c.R=g;var k=b("ieee754"),l,n,q;l={Nf:function(b){return(this[b]|this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]},te:function(b,c){this[c]=b;this[c+1]=b>>>8;this[c+2]=b>>>16;this[c+
3]=b>>>24},Jf:function(b){return(this[b]|this[b+1]<<8|this[b+2]<<16)+(this[b+3]<<24)},ge:function(b){return k.read(this,b,!0,23,4)},ce:function(b){return k.read(this,b,!0,52,8)},cg:function(b,c){return k.write(this,b,c,!0,23,4)},bg:function(b,c){return k.write(this,b,c,!0,52,8)},toString:function(b,c,e){var f=b="";e=Math.min(this.length,e||this.length);for(c=c||0;c<e;c++){var g=this[c];127>=g?(b+=decodeURIComponent(f)+String.fromCharCode(g),f=""):f+="%"+g.toString(16)}return b+=decodeURIComponent(f)},
write:function(b,c){for(var e=b===n?q:h(b),f=0;f<e.length;f++)this[c+f]=e[f]},slice:function(b,c){return this.subarray(b,c)},copy:function(b,c){c=c||0;for(var e=0;e<this.length;e++)b[c+e]=this[e]}};l.dg=l.te;g.byteLength=function(b){n=b;q=h(b);return q.length};g.isBuffer=function(b){return!(!b||!b.wg)}},{ieee754:3}],2:[function(b,c){(function(g){function h(b){this.Oa=k.isBuffer(b)?b:new k(b||0);this.F=0;this.length=this.Oa.length}c.R=h;var k=g.Sj||b("./buffer");h.c=0;h.f=1;h.a=2;h.b=5;var l=Math.pow(2,
63);h.prototype={fe:function(b,c,e){for(e=e||this.length;this.F<e;){var f=this.ba(),g=this.F;b(f>>3,c,this);this.F===g&&this.rj(f)}return c},dj:function(){var b=this.Oa.ge(this.F);this.F+=4;return b},bj:function(){var b=this.Oa.ce(this.F);this.F+=8;return b},ba:function(){var b=this.Oa,c,e,f,g,h;c=b[this.F++];if(128>c)return c;c=c&127;f=b[this.F++];if(128>f)return c|f<<7;f=(f&127)<<7;g=b[this.F++];if(128>g)return c|f|g<<14;g=(g&127)<<14;h=b[this.F++];if(128>h)return c|f|g|h<<21;e=b[this.F++];c=(c|
f|g|(h&127)<<21)+268435456*(e&127);if(128>e)return c;e=b[this.F++];c+=34359738368*(e&127);if(128>e)return c;e=b[this.F++];c+=4398046511104*(e&127);if(128>e)return c;e=b[this.F++];c+=562949953421312*(e&127);if(128>e)return c;e=b[this.F++];c+=72057594037927936*(e&127);if(128>e)return c;e=b[this.F++];c+=0x7fffffffffffffff*(e&127);if(128>e)return c;throw Error("Expected varint not more than 10 bytes");},jj:function(){var b=this.F,c=this.ba();if(c<l)return c;for(var e=this.F-2;255===this.Oa[e];)e--;e<
b&&(e=b);for(var f=c=0;f<e-b+1;f++)var g=~this.Oa[b+f]&127,c=c+(4>f?g<<7*f:g*Math.pow(2,7*f));return-c-1},he:function(){var b=this.ba();return 1===b%2?(b+1)/-2:b/2},$i:function(){return!!this.ba()},ie:function(){var b=this.ba()+this.F,c=this.Oa.toString("utf8",this.F,b);this.F=b;return c},rj:function(b){b=b&7;if(b===h.c)for(;127<this.Oa[this.F++];);else if(b===h.a)this.F=this.ba()+this.F;else if(b===h.b)this.F+=4;else if(b===h.f)this.F+=8;else throw Error("Unimplemented type: "+b);},finish:function(){this.length=
this.F;this.F=0;return this.Oa.slice(0,this.length)}}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./buffer":1}],3:[function(b,c,g){g.read=function(b,c,e,f,g){var p;p=8*g-f-1;var r=(1<<p)-1,u=r>>1,v=-7;g=e?g-1:0;var A=e?-1:1,x=b[c+g];g+=A;e=x&(1<<-v)-1;x>>=-v;for(v+=p;0<v;e=256*e+b[c+g],g+=A,v-=8);p=e&(1<<-v)-1;e>>=-v;for(v+=f;0<v;p=256*p+b[c+g],g+=A,v-=8);if(0===e)e=1-u;else{if(e===r)return p?NaN:Infinity*(x?-1:1);p+=Math.pow(2,
f);e=e-u}return(x?-1:1)*p*Math.pow(2,e-f)};g.write=function(b,c,e,f,g,p){var r,u=8*p-g-1,v=(1<<u)-1,A=v>>1,x=23===g?Math.pow(2,-24)-Math.pow(2,-77):0;p=f?0:p-1;var C=f?1:-1,H=0>c||0===c&&0>1/c?1:0;c=Math.abs(c);isNaN(c)||Infinity===c?(c=isNaN(c)?1:0,f=v):(f=Math.floor(Math.log(c)/Math.LN2),1>c*(r=Math.pow(2,-f))&&(f--,r*=2),c=1<=f+A?c+x/r:c+x*Math.pow(2,1-A),2<=c*r&&(f++,r/=2),f+A>=v?(c=0,f=v):1<=f+A?(c=(c*r-1)*Math.pow(2,g),f+=A):(c=c*Math.pow(2,A-1)*Math.pow(2,g),f=0));for(;8<=g;b[e+p]=c&255,p+=
C,c/=256,g-=8);f=f<<g|c;for(u+=g;0<u;b[e+p]=f&255,p+=C,f/=256,u-=8);b[e+p-C]|=128*H}},{}]},{},[2])(2)})})();(function(){var b={},c={R:b};(function(d){if("object"===typeof b&&"undefined"!==typeof c)c.R=d();else{var e;"undefined"!==typeof window?e=window:"undefined"!==typeof global?e=global:"undefined"!==typeof self?e=self:e=this;e.vk=d()}})(function(){return function e(b,c,h){function k(n,p){if(!c[n]){if(!b[n]){var r="function"==typeof require&&require;if(!p&&r)return r(n,!0);if(l)return l(n,!0);r=Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r;}r=c[n]={R:{}};b[n][0].call(r.R,function(c){var e=
b[n][1][c];return k(e?e:c)},r,r.R,e,b,c,h)}return c[n].R}for(var l="function"==typeof require&&require,n=0;n<h.length;n++)k(h[n]);return k}({1:[function(b,c){c.R.fk=b("./lib/vectortile.js");c.R.gk=b("./lib/vectortilefeature.js");c.R.hk=b("./lib/vectortilelayer.js")},{"./lib/vectortile.js":2,"./lib/vectortilefeature.js":3,"./lib/vectortilelayer.js":4}],2:[function(b,c){function g(b,c,e){3===b&&(b=new h(e,e.ba()+e.F),b.length&&(c[b.name]=b))}var h=b("./vectortilelayer");c.R=function(b,c){this.layers=
b.fe(g,{},c)}},{"./vectortilelayer":4}],3:[function(b,c){function g(b,c,e,f,g){this.properties={};this.extent=e;this.type=0;this.Bb=b;this.Be=-1;this.qc=f;this.sc=g;b.fe(h,this,c)}function h(b,c,e){if(1==b)c.jk=e.ba();else if(2==b)for(b=e.ba()+e.F;e.F<b;){var f=c.qc[e.ba()],g=c.sc[e.ba()];c.properties[f]=g}else 3==b?c.type=e.ba():4==b&&(c.Be=e.F)}b("point-geometry");c.R=g;g.a=["Unknown","Point","LineString","Polygon"];g.prototype.bbox=function(){var b=this.Bb;b.F=this.Be;for(var c=b.ba()+b.F,e=1,
f=0,g=0,h=0,u=Infinity,v=-Infinity,A=Infinity,x=-Infinity;b.F<c;)if(f||(f=b.ba(),e=f&7,f=f>>3),f--,1===e||2===e)g+=b.he(),h+=b.he(),g<u&&(u=g),g>v&&(v=g),h<A&&(A=h),h>x&&(x=h);else if(7!==e)throw Error("unknown command "+e);return[u,A,v,x]}},{"point-geometry":5}],4:[function(b,c){function g(b,c){this.version=1;this.name=null;this.extent=4096;this.length=0;this.Bb=b;this.qc=[];this.sc=[];this.pc=[];b.fe(h,this,c);this.length=this.pc.length}function h(b,c,e){15===b?c.version=e.ba():1===b?c.name=e.ie():
5===b?c.extent=e.ba():2===b?c.pc.push(e.F):3===b?c.qc.push(e.ie()):4===b&&c.sc.push(k(e))}function k(b){for(var c=null,e=b.ba()+b.F;b.F<e;)c=b.ba()>>3,c=1===c?b.ie():2===c?b.dj():3===c?b.bj():4===c?b.jj():5===c?b.ba():6===c?b.he():7===c?b.$i():null;return c}var l=b("./vectortilefeature.js");c.R=g;g.prototype.feature=function(b){if(0>b||b>=this.pc.length)throw Error("feature index out of bounds");this.Bb.F=this.pc[b];b=this.Bb.ba()+this.Bb.F;return new l(this.Bb,b,this.extent,this.qc,this.sc)}},{"./vectortilefeature.js":3}],
5:[function(b,c){function g(b,c){this.x=b;this.y=c}c.R=g;g.prototype={clone:function(){return new g(this.x,this.y)},rotate:function(b){return this.clone().yg(b)},round:function(){return this.clone().zg()},equals:function(b){return this.x===b.x&&this.y===b.y},dist:function(b){return Math.sqrt(this.Pg(b))},Pg:function(b){var c=b.x-this.x;b=b.y-this.y;return c*c+b*b},angle:function(){return Math.atan2(this.y,this.x)},yg:function(b){var c=Math.cos(b);b=Math.sin(b);var e=b*this.x+c*this.y;this.x=c*this.x-
b*this.y;this.y=e;return this},zg:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this}};g.a=function(b){return b instanceof g?b:Array.isArray(b)?new g(b[0],b[1]):b}},{}]},{},[1])(1)})})();function Rt(b,c){c[c.length-1].kc[b.getAttribute("k")]=b.getAttribute("v")}var St=[null],Tt=P(St,{nd:function(b,c){c[c.length-1].Nb.push(b.getAttribute("ref"))},tag:Rt});
P(St,{node:function(b,c){var d=c[0],e=c[c.length-1],f=b.getAttribute("id"),g=[parseFloat(b.getAttribute("lon")),parseFloat(b.getAttribute("lat"))];e.nodes[f]=g;var h=Q({kc:{}},Ut,b,c);Wa(h.kc)||(g=new Ci(g),di(g,!1,d),d=new Xh(g),d.c=f,d.b(),d.ka(h.kc),e.features.push(d))},way:function(b,c){for(var d=c[0],e=b.getAttribute("id"),f=Q({Nb:[],kc:{}},Tt,b,c),g=c[c.length-1],h=[],k=0,l=f.Nb.length;k<l;k++)Tc(h,g.nodes[f.Nb[k]]);f.Nb[0]==f.Nb[f.Nb.length-1]?(k=new Ji(null),k.K("XY",h,[h.length])):(k=new ui(null),
k.K("XY",h));di(k,!1,d);d=new Xh(k);d.c=e;d.b();d.ka(f.kc);g.features.push(d)}});var Ut=P(St,{tag:Rt});function Vt(b,c){return Q({},Wt,b,c)}function Xt(b,c){return Q({},Yt,b,c)}function Zt(b,c){var d=Vt(b,c);if(d){var e=[Td(b.getAttribute("width")),Td(b.getAttribute("height"))];d.size=e;return d}}function $t(b,c){return Q([],au,b,c)}var bu=[null,"http://www.opengis.net/wms"];P(bu,{Service:M(function(b,c){return Q({},cu,b,c)}),Capability:M(function(b,c){return Q({},du,b,c)})});
var du=P(bu,{Request:M(function(b,c){return Q({},eu,b,c)}),Exception:M(function(b,c){return Q([],fu,b,c)}),Layer:M(function(b,c){return Q({},gu,b,c)})}),cu=P(bu,{Name:M(S),Title:M(S),Abstract:M(S),KeywordList:M($t),OnlineResource:M(Wb),ContactInformation:M(function(b,c){return Q({},hu,b,c)}),Fees:M(S),AccessConstraints:M(S),LayerLimit:M(Sd),MaxWidth:M(Sd),MaxHeight:M(Sd)}),hu=P(bu,{ContactPersonPrimary:M(function(b,c){return Q({},iu,b,c)}),ContactPosition:M(S),ContactAddress:M(function(b,c){return Q({},
ju,b,c)}),ContactVoiceTelephone:M(S),ContactFacsimileTelephone:M(S),ContactElectronicMailAddress:M(S)}),iu=P(bu,{ContactPerson:M(S),ContactOrganization:M(S)}),ju=P(bu,{AddressType:M(S),Address:M(S),City:M(S),StateOrProvince:M(S),PostCode:M(S),Country:M(S)}),fu=P(bu,{Format:Ad(S)}),gu=P(bu,{Name:M(S),Title:M(S),Abstract:M(S),KeywordList:M($t),CRS:Dd(S),EX_GeographicBoundingBox:M(function(b,c){var d=Q({},ku,b,c);if(d){var e=d.westBoundLongitude,f=d.southBoundLatitude,g=d.eastBoundLongitude,d=d.northBoundLatitude;
return void 0===e||void 0===f||void 0===g||void 0===d?void 0:[e,f,g,d]}}),BoundingBox:Dd(function(b){var c=[Rd(b.getAttribute("minx")),Rd(b.getAttribute("miny")),Rd(b.getAttribute("maxx")),Rd(b.getAttribute("maxy"))],d=[Rd(b.getAttribute("resx")),Rd(b.getAttribute("resy"))];return{crs:b.getAttribute("CRS"),extent:c,res:d}}),Dimension:Dd(function(b){return{name:b.getAttribute("name"),units:b.getAttribute("units"),unitSymbol:b.getAttribute("unitSymbol"),"default":b.getAttribute("default"),multipleValues:Od(b.getAttribute("multipleValues")),
nearestValue:Od(b.getAttribute("nearestValue")),current:Od(b.getAttribute("current")),values:S(b)}}),Attribution:M(function(b,c){return Q({},lu,b,c)}),AuthorityURL:Dd(function(b,c){var d=Vt(b,c);if(d)return d.name=b.getAttribute("name"),d}),Identifier:Dd(S),MetadataURL:Dd(function(b,c){var d=Vt(b,c);if(d)return d.type=b.getAttribute("type"),d}),DataURL:Dd(Vt),FeatureListURL:Dd(Vt),Style:Dd(function(b,c){return Q({},mu,b,c)}),MinScaleDenominator:M(Qd),MaxScaleDenominator:M(Qd),Layer:Dd(function(b,
c){var d=c[c.length-1],e=Q({},gu,b,c);if(e){var f=Od(b.getAttribute("queryable"));void 0===f&&(f=d.queryable);e.queryable=void 0!==f?f:!1;f=Td(b.getAttribute("cascaded"));void 0===f&&(f=d.cascaded);e.cascaded=f;f=Od(b.getAttribute("opaque"));void 0===f&&(f=d.opaque);e.opaque=void 0!==f?f:!1;f=Od(b.getAttribute("noSubsets"));void 0===f&&(f=d.noSubsets);e.noSubsets=void 0!==f?f:!1;(f=Rd(b.getAttribute("fixedWidth")))||(f=d.fixedWidth);e.fixedWidth=f;(f=Rd(b.getAttribute("fixedHeight")))||(f=d.fixedHeight);
e.fixedHeight=f;["Style","CRS","AuthorityURL"].forEach(function(b){b in d&&(e[b]=(e[b]||[]).concat(d[b]))});"EX_GeographicBoundingBox BoundingBox Dimension Attribution MinScaleDenominator MaxScaleDenominator".split(" ").forEach(function(b){b in e||(e[b]=d[b])});return e}})}),lu=P(bu,{Title:M(S),OnlineResource:M(Wb),LogoURL:M(Zt)}),ku=P(bu,{westBoundLongitude:M(Qd),eastBoundLongitude:M(Qd),southBoundLatitude:M(Qd),northBoundLatitude:M(Qd)}),eu=P(bu,{GetCapabilities:M(Xt),GetMap:M(Xt),GetFeatureInfo:M(Xt)}),
Yt=P(bu,{Format:Dd(S),DCPType:Dd(function(b,c){return Q({},nu,b,c)})}),nu=P(bu,{HTTP:M(function(b,c){return Q({},ou,b,c)})}),ou=P(bu,{Get:M(Vt),Post:M(Vt)}),mu=P(bu,{Name:M(S),Title:M(S),Abstract:M(S),LegendURL:Dd(Zt),StyleSheetURL:M(Vt),StyleURL:M(Vt)}),Wt=P(bu,{Format:M(S),OnlineResource:M(Wb)}),au=P(bu,{Keyword:Ad(S)});(function(){var b={},c={R:b};(function(d){if("object"===typeof b&&"undefined"!==typeof c)c.R=d();else{var e;"undefined"!==typeof window?e=window:"undefined"!==typeof global?e=global:"undefined"!==typeof self?e=self:e=this;e.sk=d()}})(function(){return function e(b,c,h){function k(n,p){if(!c[n]){if(!b[n]){var r="function"==typeof require&&require;if(!p&&r)return r(n,!0);if(l)return l(n,!0);r=Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r;}r=c[n]={R:{}};b[n][0].call(r.R,function(c){var e=
b[n][1][c];return k(e?e:c)},r,r.R,e,b,c,h)}return c[n].R}for(var l="function"==typeof require&&require,n=0;n<h.length;n++)k(h[n]);return k}({1:[function(b,c,g){b=b("./processor");g.dk=b},{"./processor":2}],2:[function(b,c){function g(b){return function(c){var e=c.buffers,f=c.meta,g=c.width,h=c.height,k=e.length,l=e[0].byteLength,C;if(c.imageOps){l=Array(k);for(C=0;C<k;++C)l[C]=new ImageData(new Uint8ClampedArray(e[C]),g,h);g=b(l,f).data}else{g=new Uint8ClampedArray(l);h=Array(k);c=Array(k);for(C=
0;C<k;++C)h[C]=new Uint8ClampedArray(e[C]),c[C]=[0,0,0,0];for(e=0;e<l;e+=4){for(C=0;C<k;++C){var H=h[C];c[C][0]=H[e];c[C][1]=H[e+1];c[C][2]=H[e+2];c[C][3]=H[e+3]}C=b(c,f);g[e]=C[0];g[e+1]=C[1];g[e+2]=C[2];g[e+3]=C[3]}}return g.buffer}}function h(b,c){var e=Object.keys(b.$h||{}).map(function(c){return"var "+c+" = "+b.$h[c].toString()+";"}).concat(["var __minion__ = ("+g.toString()+")(",b.Mi.toString(),");",'self.addEventListener("message", function(__event__) {',"var buffer = __minion__(__event__.data);",
"self.postMessage({buffer: buffer, meta: __event__.data.meta}, [buffer]);","});"]),e=URL.createObjectURL(new Blob(e,{type:"text/javascript"})),e=new Worker(e);e.addEventListener("message",c);return e}function k(b,c){var e=g(b.Mi);return{postMessage:function(b){setTimeout(function(){c({data:{buffer:e(b),Yd:b.Yd}})},0)}}}function l(b){this.hd=!!b.qk;var c;0===b.wj?c=0:this.hd?c=1:c=b.wj||1;var e=[];if(c)for(var f=0;f<c;++f)e[f]=h(b,this.Ee.bind(this,f));else e[0]=k(b,this.Ee.bind(this,0));this.tc=e;
this.Fe=[];this.rc=0;this.Ab={};this.jd=null}l.prototype.ug=function(){if(0===this.rc&&0<this.Fe.length){var b=this.jd=this.Fe.shift(),c=b.Lb[0].width,e=b.Lb[0].height,f=b.Lb.map(function(b){return b.data.buffer}),g=this.tc.length;this.rc=g;if(1===g)this.tc[0].postMessage({buffers:f,meta:b.Yd,imageOps:this.hd,width:c,height:e},f);else for(var h=4*Math.ceil(b.Lb[0].data.length/4/g),k=0;k<g;++k){for(var l=k*h,C=[],H=0,E=f.length;H<E;++H)C.push(f[k].slice(l,l+h));this.tc[k].postMessage({buffers:C,meta:b.Yd,
imageOps:this.hd,width:c,height:e},C)}}};l.prototype.Ee=function(b,c){this.ik||(this.Ab[b]=c.data,--this.rc,0===this.rc&&this.xg())};l.prototype.xg=function(){var b=this.jd,c=this.tc.length,e,f;if(1===c)e=new Uint8ClampedArray(this.Ab[0].buffer),f=this.Ab[0].meta;else{var g=b.Lb[0].data.length;e=new Uint8ClampedArray(g);f=Array(g);for(var g=4*Math.ceil(g/4/c),h=0;h<c;++h){var k=h*g;e.set(new Uint8ClampedArray(this.Ab[h].buffer),k);f[h]=this.Ab[h].meta}}this.jd=null;this.Ab={};b.mk(null,new ImageData(e,
b.Lb[0].width,b.Lb[0].height),f);this.ug()};c.R=l},{}]},{},[1])(1)})})();function pu(b){function c(b){b.each(function(b){function f(){var b=d3.mouse(this)[0],b=v.invert(b);c.highlight(b)}function g(){c.Se()}if(void 0===b)d3.select(this).selectAll("svg").remove();else{E=Math.max(this.clientWidth-e.right-e.left,0);v=d3.scale.linear().range([0,E]);H=Math.max(this.clientHeight-e.top-e.bottom,0);A=d3.scale.linear().range([H,0]);var k=d3.svg.axis().scale(v).orient("bottom"),l=d3.svg.axis().scale(A).orient("left"),q=d3.svg.area().x(function(b){return v(h.dist(b))}).y0(H).y1(function(b){return A(h.z(b))}),
N=d3.svg.line().x(function(b){return v(h.dist(b))}).y(function(b){return A(h.z(b))});u=d3.select(this).selectAll("svg").data([b]);var ja=u.enter().append("svg");void 0!==n&&ja.append("defs").append("style").attr("type","text/css").text(n);ja=ja.append("g");c.Uf([]);ja.style("font","11px Arial");ja.append("path").attr("class","area").style("fill","rgba(222, 222, 222, 0.5)");ja.append("path").attr("class","line").style("stroke","#F00").style("fill","none");ja.insert("g",":first-child").attr("class",
"grid-y");d||(ja.append("g").attr("class","x axis").attr("transform","translate(0,"+H+")"),ja.append("text").attr("class","x label").attr("text-anchor","end").attr("x",E-4).attr("y",H-4),ja.append("g").attr("class","y axis"),ja.append("text").attr("class","y label").attr("text-anchor","end").attr("y",6).attr("dy",".75em").attr("transform","rotate(-90)").style("fill","grey").text("elevation (m)"),ja.append("g").attr("class","metas").attr("transform","translate("+(E+3)+", 0)"));ja.append("g").attr("class",
"pois");var Cb=ja.append("g").attr("class","y grid-hover");Cb.append("svg:line").attr("stroke-dasharray","5,5");Cb.append("text");Cb=ja.append("g").attr("class","x grid-hover");Cb.append("svg:line").attr("stroke-dasharray","5,5");Cb.append("text");ja.append("rect").attr("class","overlay").attr("width",E).attr("height",H).style("fill","none").style("pointer-events","all");u.attr("width",E+e.left+e.right).attr("height",H+e.top+e.bottom);C=u.select("g").attr("transform","translate("+e.left+","+e.top+
")");F=d3.extent(b,function(b){return h.dist(b)});v.domain(F);b=d3.extent(b,function(b){return h.z(b)});A.domain(b);void 0!==x?x(v,A,E,H):(ja=.1*(b[1]-b[0]),A.domain([b[0]-ja,b[1]+ja]));C.select(".area").transition().attr("d",q);C.select(".line").transition().attr("d",N);2E3<F[1]?(D=1E3,R="km"):(D=1,R="m");d||(k.tickFormat(function(b){return p.xtick(b/D,R)}),r&&k.tickValues([0,v.domain()[1]]),l.tickFormat(function(b){return p.ytick(b,"m")}),C.select(".x.axis").transition().call(k),C.select(".x.label").text("distance ("+
R+")").style("fill","grey").style("shape-rendering","crispEdges"),10>H/15&&l.ticks(H/15),C.select(".y.axis").transition().call(l));C.select(".grid-y").transition().call(l.tickSize(-E,0).tickFormat("")).selectAll(".tick line").style("stroke","#ccc").style("opacity",.7);C.selectAll(".axis").selectAll("path, line").style("fill","none").style("stroke","#000").style("shape-rendering","crispEdges");C.selectAll(".grid-hover line").style("stroke","#222").style("opacity",.8);C.select(".overlay").on("mouseout",
g).on("mousemove",f)}})}var d=void 0!==b.light?b.light:!1,e=d?{top:0,right:0,bottom:0,left:0}:{top:10,right:20,bottom:30,left:40},f=void 0!==b.hoverCallback?b.hoverCallback:ca,g=void 0!==b.outCallback?b.outCallback:ca,h=b.elevationExtractor,k=d3.bisector(function(b){return h.dist(b)}).left,l=b.poiExtractor,n=b.styleDefs,q=void 0!==b.poiLabelAngle?b.poiLabelAngle:-60,p={xhover:function(b,c){return parseFloat(b.toPrecision(3))+" "+c},yhover:function(b){return Math.round(b)+" m"},xtick:function(b){return b},
ytick:function(b){return b}};void 0!==b.formatter&&fc(p,b.formatter);var r=void 0!==b.lightXAxis?b.lightXAxis:!1,u,v,A,x=b.scaleModifier,C,H,E,D,R,F;c.Se=function(){C.selectAll(".grid-hover").style("display","none");g.call(null)};c.highlight=function(b){var c=u.datum();b=k(c,b);if(!(b>=c.length)){c=c[b];b=h.z(c);var d=h.dist(c);C.select(".x.grid-hover").style("display","inline").select("line").attr("x1",v(d)).attr("y1",H).attr("x2",v(d)).attr("y2",A(b));C.select(".y.grid-hover").style("display","inline").select("line").attr("x1",
v(0)).attr("y1",A(b)).attr("x2",E).attr("y2",A(b));var e=d>F[1]/2,g=v(d),g=g+(e?-10:10);C.select(".x.grid-hover text").text(p.xhover(d/D,R)).style("text-anchor",e?"end":"start").attr("transform","translate("+g+","+(H-10)+")");C.select(".y.grid-hover text").text(p.yhover(b,"m")).style("text-anchor",e?"end":"start").attr("transform","translate("+g+","+(A(b)-10)+")");f.call(null,c,d/D,R,b,"m")}};c.Uf=function(b){b=void 0!==b?b:[];var c=u.select("g"),e=u.datum();b=c.select(".pois").selectAll(".poi").data(b,
function(b){var c=k(e,Math.round(10*l.dist(b))/10,1);if(c=e[c])c=h.z(c),l.z(b,c);return l.id(b)});c=b.enter().append("g").attr("class","poi");c.append("text").attr("x",d?0:9).attr("dy",".35em").attr("text-anchor",d?"middle":"start");c.append("line").style("shape-rendering","crispEdges");b.style("opacity",0).transition().duration(1E3).delay(100).style("opacity",1);b.selectAll("text").attr("transform",function(b){return d?["translate(",v(l.dist(b)),",",A(l.z(b))-10,")"].join(""):["translate(",v(l.dist(b)),
",",A(l.z(b))-20,") rotate(",q,")"].join("")}).text(function(b){return l.sort(b)+(d?"":" - "+l.title(b))});b.selectAll("line").style("stroke","grey").attr("x1",function(b){return v(l.dist(b))}).attr("y1",function(){return A(A.domain()[0])}).attr("x2",function(b){return v(l.dist(b))}).attr("y2",function(b){return A(l.z(b))});b.exit().remove()};return c}sa("ngeo.profile",pu);z.directive("ngeoControl",function(){return{restrict:"A",link:function(b,c,d){var e=b.$eval(d.ngeoControl);b=b.$eval(d.ngeoControlMap);e.A=Ac(c[0]);b.A.push(e)}}});sa("ngeo.DesktopGeolocationEventType",{ERROR:"desktop-geolocation-error"});z.directive("ngeoDesktopGeolocation",function(){return{restrict:"A",scope:{getDesktopMapFn:"&ngeoDesktopGeolocationMap",getDesktopGeolocationOptionsFn:"&ngeoDesktopGeolocationOptions"},controller:"NgeoDesktopGeolocationController",controllerAs:"ctrl"}});
function qu(b,c,d,e){c.on("click",this.toggle.bind(this));this.c=c=b.getDesktopMapFn();var f=b.getDesktopGeolocationOptionsFn()||{};this.i=b;this.b=xj(e);this.da=new Lr({projection:U(c).Y()});this.da.on("error",function(c){ru(this);b.$emit("desktop-geolocation-error",c)},this);this.f=new Xh;f.positionFeatureStyle&&$h(this.f,f.positionFeatureStyle);this.fb=new Xh;f.accuracyFeatureStyle&&$h(this.fb,f.accuracyFeatureStyle);this.g=f.zoom;this.a=!1;I(this.da,L("accuracyGeometry"),function(){Yh(this.fb,
this.da.get("accuracyGeometry")||null)},this);I(this.da,L("position"),function(b){this.me(b)},this);d(this.da)}sa("ngeo.DesktopGeolocationController",qu);qu.$inject=["$scope","$element","ngeoDecorateGeolocation","ngeoFeatureOverlayMgr"];qu.prototype.toggle=function(){this.a?ru(this):(this.b.ia(this.f),this.b.ia(this.fb),Kr(this.da,!0),this.a=!0)};qu.prototype.toggle=qu.prototype.toggle;function ru(b){b.b.clear();b.a=!1}
qu.prototype.me=function(){var b=this.da.get("position");if(void 0===b)ru(this),this.i.$emit("desktop-geolocation-error",null);else{var c=new Ci(b);Yh(this.f,c);Pl(U(this.c),b);void 0!==this.g&&Sl(U(this.c),this.g);Kr(this.da,!1)}};z.controller("NgeoDesktopGeolocationController",qu);function su(b){return{restrict:"A",scope:{fileContent:"=ngeoFilereader",supported:"=?ngeoFilereaderSupported"},link:function(c,d){var e="FileReader"in b;(c.supported=e)&&d.bind("change",function(d){var e=new b.FileReader;e.onload=function(b){c.$apply(function(){c.fileContent=b.target.result})};e.readAsText(d.target.files[0])})}}}su.$inject=["$window"];z.directive("ngeoFilereader",su);z.directive("ngeoProfile",function(){return{restrict:"A",link:function(b,c,d){function e(){void 0!==h&&(g.datum(k).call(h),void 0!==k&&h.Uf(l))}var f=d.ngeoProfileOptions,g=d3.select(c[0]),h,k,l;b.$watchCollection(f,function(c){c=dc(c);if(void 0!==c){if(void 0!==c.hoverCallback){var d=c.hoverCallback;c.hoverCallback=function(){d.apply(null,arguments);b.$applyAsync()}}if(void 0!==c.outCallback){var f=c.outCallback;c.outCallback=function(){f();b.$applyAsync()}}h=pu(c);e()}});b.$watch(d.ngeoProfile,
function(b){k=b;e()});b.$watch(d.ngeoProfilePois,function(b){l=b;e()});b.$watch(d.ngeoProfileHighlight,function(b){void 0!==b&&(0<b?h.highlight(b):h.Se())})}}});z.directive("ngeoRecenter",function(){return{restrict:"A",link:function(b,c,d){function e(c){var d=c.attr("ngeo-extent");if(void 0!==d){var e=Em(f);Nl(U(f),b.$eval(d),e)}c=c.attr("ngeo-zoom");void 0!==c&&Sl(U(f),b.$eval(c))}var f=b.$eval(d.ngeoRecenterMap);c.on("click",function(b){e(angular.element(b.target))});c.on("change",function(b){e(angular.element(b.target.options[b.target.selectedIndex]))})}}});z.value("ngeoScaleselectorTemplateUrl",function(b,c){var d=c.ngeoScaleselectorTemplateurl;return void 0!==d?d:"ngeo/scaleselector.html"});function tu(b){return{restrict:"A",scope:!0,controller:"NgeoScaleselectorController",templateUrl:b}}tu.$inject=["ngeoScaleselectorTemplateUrl"];z.directive("ngeoScaleselector",tu);
function uu(b,c,d){this.scales=b.$eval(d.ngeoScaleselector);c=Object.keys(this.scales).map(Number);c.sort();this.zoomLevels=c;this.a=b.$eval(d.ngeoScaleselectorMap);d=b.$eval(d.ngeoScaleselectorOptions);void 0===d?d={dropup:!1}:void 0===d.dropup&&(d.dropup=!1);this.options=d;this.c=b;this.b=null;this.currentScale=void 0;null!==U(this.a)&&(d=Ml(U(this.a)),void 0!==d&&(this.currentScale=this.Ia(d)));I(this.a,L("view"),this.g,this);vu(this);b.scaleselectorCtrl=this}
sa("ngeo.ScaleselectorController",uu);uu.$inject=["$scope","$element","$attrs"];uu.prototype.Ia=function(b){return this.scales[b.toString()]};uu.prototype.getScale=uu.prototype.Ia;uu.prototype.Ig=function(b){Sl(U(this.a),b)};uu.prototype.changeZoom=uu.prototype.Ig;uu.prototype.f=function(){var b=U(this.a),c=this.scales[Ml(b).toString()];this.c.$applyAsync(function(){this.currentScale=c}.bind(this))};uu.prototype.g=function(){vu(this)};
function vu(b){null!==b.b&&G(b.b);var c=U(b.a);b.b=I(c,L("resolution"),b.f,b)}z.controller("NgeoScaleselectorController",uu);function wu(b){db.call(this);this.b=b;this.a={}}y(wu,db);var xu=[];wu.prototype.Ba=function(b,c,d,e){ea(c)||(c&&(xu[0]=c.toString()),c=xu);for(var f=0;f<c.length;f++){var g=Eo(b,c[f],d||this.handleEvent,e||!1,this.b||this);if(!g)break;this.a[g.key]=g}return this};
wu.prototype.Qb=function(b,c,d,e,f){if(ea(c))for(var g=0;g<c.length;g++)this.Qb(b,c[g],d,e,f);else d=d||this.handleEvent,f=f||this.b||this,d=Fo(d),e=!!e,c=b&&b[so]?Ao(b.g,String(c),d,e,f):b?(b=Go(b))?Ao(b,c,d,e,f):null:null,c&&(Lo(c),delete this.a[c.key]);return this};function yu(b){ac(b.a,function(b,d){this.a.hasOwnProperty(d)&&Lo(b)},b);b.a={}}wu.prototype.L=function(){wu.U.L.call(this);yu(this)};wu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function zu(){db.call(this);this.g=new wo(this);this.X=this;this.M=null}y(zu,db);zu.prototype[so]=!0;m=zu.prototype;m.removeEventListener=function(b,c,d,e){Ko(this,b,c,d,e)};
m.B=function(b){var c,d=this.M;if(d)for(c=[];d;d=d.M)c.push(d);var d=this.X,e=b.type||b;if(ga(b))b=new po(b,d);else if(b instanceof po)b.target=b.target||d;else{var f=b;b=new po(e,d);fc(b,f)}var f=!0,g;if(c)for(var h=c.length-1;!b.f&&0<=h;h--)g=b.a=c[h],f=Au(g,e,!0,b)&&f;b.f||(g=b.a=d,f=Au(g,e,!0,b)&&f,b.f||(f=Au(g,e,!1,b)&&f));if(c)for(h=0;!b.f&&h<c.length;h++)g=b.a=c[h],f=Au(g,e,!1,b)&&f;return f};
m.L=function(){zu.U.L.call(this);if(this.g){var b=this.g,c=0,d;for(d in b.listeners){for(var e=b.listeners[d],f=0;f<e.length;f++)++c,vo(e[f]);delete b.listeners[d];b.a--}}this.M=null};m.Ba=function(b,c,d,e){return xo(this.g,String(b),c,d,e)};m.Qb=function(b,c,d,e){return this.g.remove(String(b),c,d,e)};
function Au(b,c,d,e){c=b.g.listeners[String(c)];if(!c)return!0;c=c.concat();for(var f=!0,g=0;g<c.length;++g){var h=c[g];if(h&&!h.Ob&&h.xc==d){var k=h.listener,l=h.Kc||h.src;h.hb&&zo(b.g,h);f=!1!==k.call(l,e)&&f}}return f&&0!=e.Rf};function Bu(b,c,d){zu.call(this);this.target=b;this.handle=c||b;this.l=d||new Cj(NaN,NaN,NaN,NaN);this.i=zc(b);this.a=new wu(this);gb(this,qa(hb,this.a));this.c=this.f=this.v=this.o=this.screenY=this.screenX=this.clientY=this.clientX=0;this.b=!1;this.j=0;Eo(this.handle,["touchstart","mousedown"],this.oe,!1,this)}y(Bu,zu);var Cu=t.document&&t.document.documentElement&&!!t.document.documentElement.setCapture;m=Bu.prototype;
m.L=function(){Bu.U.L.call(this);Ko(this.handle,["touchstart","mousedown"],this.oe,!1,this);yu(this.a);Cu&&this.i.releaseCapture();this.handle=this.target=null};
m.oe=function(b){var c="mousedown"==b.type;if(this.b||c&&(!(mo?0==b.b.button:"click"==b.type||b.b.button&ro[0])||kc&&lc&&b.c))this.B("earlycancel");else{if(0==this.j)if(this.B(new Du("start",this,b.clientX,b.clientY)))this.b=!0,b.preventDefault();else return;else b.preventDefault();var c=this.i,d=c.documentElement,e=!Cu;this.a.Ba(c,["touchmove","mousemove"],this.zh,e);this.a.Ba(c,["touchend","mouseup"],this.Ac,e);Cu?(d.setCapture(!1),this.a.Ba(d,"losecapture",this.Ac)):this.a.Ba(c?c.parentWindow||
c.defaultView:window,"blur",this.Ac);this.A&&this.a.Ba(this.A,"scroll",this.Li,e);this.clientX=this.o=b.clientX;this.clientY=this.v=b.clientY;this.screenX=b.screenX;this.screenY=b.screenY;this.f=this.target.offsetLeft;this.c=this.target.offsetTop;this.u=Nc(xc(this.i))}};m.Ac=function(b){yu(this.a);Cu&&this.i.releaseCapture();this.b?(this.b=!1,this.B(new Du("end",this,b.clientX,b.clientY,0,Eu(this,this.f),Fu(this,this.c)))):this.B("earlycancel")};
m.zh=function(b){var c=1*(b.clientX-this.clientX),d=b.clientY-this.clientY;this.clientX=b.clientX;this.clientY=b.clientY;this.screenX=b.screenX;this.screenY=b.screenY;if(!this.b){var e=this.o-this.clientX,f=this.v-this.clientY;if(e*e+f*f>this.j)if(this.B(new Du("start",this,b.clientX,b.clientY)))this.b=!0;else{this.W||this.Ac(b);return}}d=Gu(this,c,d);c=d.x;d=d.y;this.b&&this.B(new Du("beforedrag",this,b.clientX,b.clientY,0,c,d))&&(Hu(this,b,c,d),b.preventDefault())};
function Gu(b,c,d){var e=Nc(xc(b.i));c+=e.x-b.u.x;d+=e.y-b.u.y;b.u=e;b.f+=c;b.c+=d;return new vc(Eu(b,b.f),Fu(b,b.c))}m.Li=function(b){var c=Gu(this,0,0);b.clientX=this.clientX;b.clientY=this.clientY;Hu(this,b,c.x,c.y)};function Hu(b,c,d,e){b.target.style.left=d+"px";b.target.style.top=e+"px";b.B(new Du("drag",b,c.clientX,c.clientY,0,d,e))}function Eu(b,c){var d=b.l,e=isNaN(d.left)?null:d.left,d=isNaN(d.width)?0:d.width;return Math.min(null!=e?e+d:Infinity,Math.max(null!=e?e:-Infinity,c))}
function Fu(b,c){var d=b.l,e=isNaN(d.top)?null:d.top,d=isNaN(d.height)?0:d.height;return Math.min(null!=e?e+d:Infinity,Math.max(null!=e?e:-Infinity,c))}function Du(b,c,d,e,f,g,h){po.call(this,b);this.clientX=d;this.clientY=e;this.left=ba(g)?g:c.f;this.top=ba(h)?h:c.c}y(Du,po);function Iu(){zu.call(this);this.f=[];this.i=[];this.o={};this.j=new wu(this);this.I=!1}y(Iu,zu);function Ju(b,c){c.b=0;c.a=void 0;b.f.push(c)}function Ku(b,c){b.Ye=c}function Lu(b){if(!b.I){for(var c=0,d=b.f.length;c<d;c++)for(var e=Kc(b.f[c]),f=0,g=e.length;f<g;++f){var h=b,k=e[f],l=h.Ye(k),n=w(l);h.o[n]=k;h.C&&(h.j.Ba(k,"mouseover",h.nh),h.j.Ba(k,"mouseout",h.mh));h.A&&(h.j.Ba(l,"mouseover",h.lh),h.j.Ba(l,"mouseout",h.kh));h.i.push(k);h.j.Ba(l,["mousedown","touchstart"],h.Fh)}b.I=!0}}m=Iu.prototype;
m.L=function(){this.j.Db();for(var b=0,c=this.f.length;b<c;b++){var d=this.f[b];d.b=void 0;d.a=void 0}this.f.length=0;this.i.length=0;this.o=null;Mu(this);Iu.U.L.call(this)};function Nu(b,c){for(var d=0,e=b.f.length;d<e;d++){var f=b.f[d];f.Eb=Kj(f)}d=0;for(e=b.i.length;d<e;d++)f=b.i[d],f!=c&&(f.Eb=Kj(f))}
m.Fh=function(b){var c=w(b.a);this.a=this.o[c];a:{for(var c=this.a,d=c.cloneNode(!0),e=c.getElementsByTagName("TEXTAREA"),f=d.getElementsByTagName("TEXTAREA"),g=0;g<e.length;g++)f[g].value=e[g].value;switch(c.tagName){case "TR":c=Fc("TABLE",null,Fc("TBODY",null,d));break a;case "TD":case "TH":c=Fc("TABLE",null,Fc("TBODY",null,Fc("TR",null,d)));break a;case "TEXTAREA":d.value=c.value;default:c=d}}this.b=c;this.D&&hk(this.b,this.D||[]);this.b.style.margin="0";this.b.style.position="absolute";this.b.style.visibility=
"hidden";zc(this.a).body.appendChild(this.b);var d=Gj(this.a),c=this.b,e=d,h,d=Gj(c);e instanceof vc&&(h=e.y,e=e.x);f=c.offsetLeft+(e-d.x);f instanceof vc?(e=f.x,h=f.y):(e=f,h=c.offsetTop+(Number(h)-d.y));c.style.left=Hj(e);c.style.top=Hj(h);this.c=new Bu(this.b);this.c.j=Math.pow(0,2);Eo(this.c,"start",this.ph,!1,this);Eo(this.c,"end",this.jh,!1,this);Eo(this.c,"earlycancel",this.td,!1,this);this.c.oe(b)};
m.ph=function(b){this.B(new Ou("beforedragstart",0,0,this.a))?(this.v=this.a.parentNode,this.P=Lc(this.a),this.l=this.v,this.u?hk(this.a,this.u||[]):this.a.style.visibility="hidden",b=Ij(this.b),this.b.c=b.width/2,this.b.f=b.height/2,this.b.style.visibility="",this.a.style.display="none",Nu(this,this.a),this.a.style.display="",Eo(this.c,"drag",this.oh,!1,this),this.B(new Ou("dragstart",0,0,this.a))):(b.preventDefault(),this.td())};
m.oh=function(){var b=Gj(this.b),b=new vc(b.x+this.b.c,b.y+this.b.f),c;a:{c=null;if("none"!=this.a.style.display){c=this.a.parentNode;var d=Kj(c);if(Pu(b,d))break a}for(var d=0,e=this.f.length;d<e;d++){var f=this.f[d];if(f!=c&&Pu(b,f.Eb)){c=f;break a}}c=null}var g;if(c){if(null==c)throw Error("getHoverNextItem_ called with null hoverList.");var h,k,d=!1,e=void 0;switch(c.b){case 0:g=b.y;h=Qu;k=Ru;break;case 4:d=!0;case 2:g=b.x;h=Su;k=Ru;break;case 5:d=!0;case 3:g=b.x,h=Tu,k=Uu}for(var f=null,l,n=
Kc(c),q=0,p=n.length;q<p;q++){var r=n[q];if(r!=this.a){var u=h(r.Eb);if(d){var v=Vu(r,b);ba(e)||(e=v);k(g,u)&&(void 0==l||v<e||v==e&&(k(u,l)||u==l))&&(f=r,l=u);v<e&&(e=v)}else k(g,u)&&(void 0==l||k(u,l))&&(f=r,l=u)}}g=null!==f&&Vu(f,b)>e?null:f}else g=null;if(!this.B(new Ou("beforedragmove",0,0,this.a,0,0,0,c,g)))return!1;if(c)this.a.parentNode==c&&Lc(this.a)==g||c.insertBefore(this.a,g),this.a.style.display="",c.a&&gk(c,c.a);else for(this.a.style.display="none",h=0,k=this.f.length;h<k;h++)l=this.f[h],
l.a&&ik(l,l.a);c!=this.l&&(this.l=c,Nu(this,this.a));this.B(new Ou("dragmove",0,0,this.a,0,0,0,c,g));return!1};m.td=function(){Mu(this);this.c=this.b=this.P=this.v=this.l=this.a=null;for(var b=0,c=this.f.length;b<c;b++)this.f[b].Eb=null;b=0;for(c=this.i.length;b<c;b++)this.i[b].Eb=null};m.jh=function(){if(!this.B(new Ou("beforedragend",0,0,this.a)))return!1;Mu(this);this.B(new Ou("dragend",0,0,this.a));this.td();return!0};
function Mu(b){hb(b.c);b.b&&Jc(b.b);b.a&&"none"==b.a.style.display&&(b.v.insertBefore(b.a,b.P),b.a.style.display="");b.u&&b.a?jk(b.a,b.u||[]):b.a&&(b.a.style.visibility="");for(var c=0,d=b.f.length;c<d;c++){var e=b.f[c];e.a&&ik(e,e.a)}}m.Ye=function(b){return b};m.nh=function(b){hk(b.a,this.C||[])};m.mh=function(b){jk(b.a,this.C||[])};m.lh=function(b){hk(b.a,this.A||[])};m.kh=function(b){jk(b.a,this.A||[])};function Pu(b,c){return b.x>c.left&&b.x<c.left+c.width&&b.y>c.top&&b.y<c.top+c.height}
function Vu(b,c){var d=b.Eb;return Math.abs(c.y-(d.top+(d.height-1)/2))}function Qu(b){return b.top+b.height-1}function Su(b){return b.left+b.width-1}function Tu(b){return b.left||0}function Ru(b,c){return b<c}function Uu(b,c){return b>c}function Ou(b,c,d,e,f,g,h,k,l){po.call(this,b);this.Lg=e;this.Qh=k;this.Rh=l}y(Ou,po);function Wu(){return{restrict:"A",link:function(b,c,d){function e(){for(var d=c.children(),e=0;e<d.length;++e)angular.element(d[e]).data("idx",e);null!==h&&h.Db();h=new Iu;Ju(h,c[0]);Ku(h,function(b){return Bc(g.handleClassName,b)});void 0!==g.draggerClassName&&(h.D=va(g.draggerClassName).split(" "));var n=-1,q=null;Eo(h,"dragstart",function(){n=-1;q=null});Eo(h,"dragmove",function(b){var c=b.Rh;n=null===c?-1:angular.element(c).data("idx");q=b.Qh});Eo(h,"dragend",function(c){var d=angular.element(c.Lg).data("idx");
-1!=n?n!=d&&(n>d&&n--,b.$apply(function(){f.splice(n,0,f.splice(d,1)[0])})):null!==q&&b.$apply(function(){f.push(f.splice(d,1)[0])})});Lu(h)}var f=b.$eval(d.ngeoSortable),g=function(b){void 0===b?b={handleClassName:"handle"}:void 0===b.handleClassName&&(b.handleClassName="handle");return b}(b.$eval(d.ngeoSortableOptions)),h=null;b.$watchCollection(function(){return f},function(){e()})}}}Wu.$inject=["$timeout"];z.directive("ngeoSortable",Wu);function Xu(b){sm.call(this,{$a:Yu,handleEvent:Zu,ab:$u});this.o=null;this.v=void 0!==b.source?b.source:null;this.j=!1;this.c=this.a=null;this.l=new cj({source:new nj({nc:!1,wrapX:!1}),style:void 0!==b.style?b.style:er()});I(this,L("active"),this.C,this)}y(Xu,sm);sa("ngeo.interaction.DrawAzimut",Xu);function Yu(b){this.o=b.pixel;return!0}
function $u(b){var c=this.o,d=b.pixel,e=c[0]-d[0],c=c[1]-d[1],d=!0;4>=e*e+c*c&&(av(this,b),this.j?(b=bv(this),null!==this.v&&this.v.ia(b),this.B(new Wq("drawend",b))):(e=b.coordinate,this.j=!0,b=new ui([e.slice(),e.slice()]),e=new Uq(e,0),b=new Sp([b,e]),this.a=new Xh,Yh(this.a,b),cv(this),this.B(new Wq("drawstart",this.a))),d=!1);return d}
function Zu(b){var c;c=b.map;if(Mc(document,c.a)&&"none"!=c.a.style.display){var d=Em(c);c=!d||0>=d[0]||0>=d[1]?!1:(c=U(c))&&Ql(c)?!0:!1}else c=!1;if(!c)return!0;c=!0;b.type===cl?c=av(this,b):b.type===Xk&&(c=!1);return tm.call(this,b)&&c}
function av(b,c){if(b.j){var d=c.coordinate,e;e=b.a.J().a;var f=e[0],g,h;g=f.ja();b.c.J().Z(d);h=g[g.length-1];h[0]=d[0];h[1]=d[1];f.Z(g);d=e[1];e=f.s;g=f.a;h=e[0];var k=e[1],l=0,n;for(n=0+g;n<f.s.length;n+=g){var q=e[n],p=e[n+1],l=l+Math.sqrt((q-h)*(q-h)+(p-k)*(p-k));h=q;k=p}d.s[d.a]=d.s[0]+l;d.b();cv(b)}else f=c.coordinate.slice(),null===b.c?(b.c=new Xh(new Ci(f)),cv(b)):b.c.J().Z(f);return!0}function cv(b){var c=[];null!==b.a&&c.push(b.a);null!==b.c&&c.push(b.c);b=b.l.N();b.clear(!0);fj(b,c)}
function bv(b){b.j=!1;var c=b.a;null!==c&&(b.a=null,b.c=null,b.l.N().clear(!0));return c}Xu.prototype.sb=eh;Xu.prototype.C=function(){var b=this.g,c=this.getActive();null!==b&&c||bv(this);this.l.setMap(c?b:null)};Xu.prototype.setMap=function(b){Xu.U.setMap.call(this,b);this.C()};"function"==typeof proj4&&(proj4.defs("EPSG:2056","+proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +k_0=1 +x_0=2600000 +y_0=1200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs"),Ue(Oe("EPSG:2056"),[242E4,103E4,29E5,135E4]));z.value("ngeoDecorateLayer",function(b){Object.defineProperty(b,"visible",{configurable:!0,get:function(){return jf(b)},set:function(c){b.Ta(c)}});Object.defineProperty(b,"opacity",{configurable:!0,get:function(){return Math.round(100*b.get("opacity"))/100+""},set:function(c){b.set("opacity",+c)}})});function dv(b,c){this.b=b;this.a=c}dv.prototype.cancel=function(b,c){return this.a["delete"](this.b+"/cancel/"+b,void 0!==c?c:{})};function ev(b){return function(c){return new dv(c,b)}}ev.$inject=["$http"];z.factory("ngeoCreatePrint",ev);z.service("ngeoPrintUtils",function(){});z.value("ngeoSyncArrays",function(b,c,d,e,f){var g=e.$watchCollection(function(){return b},function(){var e,g,h;if(d)for(e=b.length-1,h=0;0<=e;--e)f(b[e])&&(c[h++]=b[e]);else for(e=0,g=b.length,h=0;e<g;++e)f(b[e])&&(c[h++]=b[e]);c.length=h}),h=e.$watchCollection(function(){return c},function(){var e,g,h;if(d)for(e=0,g=b.length,h=c.length-1;e<g;++e)f(b[e])&&(b[e]=c[h--]);else for(e=0,g=b.length,h=0;e<g;++e)f(b[e])&&(b[e]=c[h++])});return function(){g();h()}});}).call(window);
//# sourceMappingURL=mobile.js.map
